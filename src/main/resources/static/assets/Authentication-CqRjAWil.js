import{r as l,u as E,c as I,j as t,T,I as h,B as f,d as g}from"./index-CGf2ioEP.js";/* empty css                    */import{F as i}from"./index-CAqRiADC.js";import"./Portal-DNTSasz7.js";import"./collapse-BbEVqHco.js";import"./zoom-BBsSZ6In.js";import"./Keyframes-C_-_Pp7U.js";import"./index-BwX74PuQ.js";import"./index-BZFSh0ix.js";import"./index-BZvc4hf2.js";import"./useId-CMI7ykav.js";import"./useZIndex-fBMrknON.js";import"./useLocale-bq0wg74A.js";import"./ExclamationCircleFilled-C0NonI-2.js";const G=()=>{var x;const[a,y]=l.useState(""),[n,j]=l.useState(""),[s,u]=l.useState(null),[m,p]=l.useState(!1),c=E(),d=(x=I().state)==null?void 0:x.userType,b=async()=>{try{const e=await g.get(`/api/mail?email=${a}`);return console.log(e.data),e.data}catch(e){return console.log("error :",e),null}},C=async({email:e,code:r})=>{try{const o=await g.post("/api/mail",{email:e,code:r});return console.log(o.data),o.data}catch(o){return console.log(o),null}};l.useEffect(()=>{if(s!==null&&s>0){const e=setInterval(()=>{u(r=>r!==null&&r>0?r-1:0)},1e3);return()=>clearInterval(e)}else s===0&&p(!0)},[s]);const N=async()=>{await C({email:a,code:n})&&(d==="user"?c("/signup/user"):d==="business"&&c("/signup/business"))},v=async()=>{u(300),p(!1),await b()};return t.jsxs("div",{children:[t.jsx(T,{title:"이메일 인증",icon:"back",onClick:()=>c(-1)}),t.jsxs(i,{autoComplete:"off",className:"mt-6 px-4",onFinish:N,children:[t.jsxs(i.Item,{label:"이메일",className:"custom-form-item !text-xs",rules:[{required:!0,message:"Please input!"}],children:[t.jsx(h,{placeholder:"이메일을 입력하세요",className:"py-[14px] px-3",value:a,onChange:e=>y(e.target.value)}),t.jsx(f,{type:"primary",className:"text-xs font-medium inline-block px-4 !h-auto",onClick:v,disabled:!a,children:"인증코드 받기"})]}),t.jsxs(i.Item,{label:"인증코드",rules:[{required:!0,message:m?"입력 시간이 초과되었습니다":"인증 코드를 다시 입력해주세요"}],className:"custom-form-item !text-xs mt-3",children:[t.jsx(h,{className:"py-[14px] px-3 relative",value:n,onChange:e=>j(e.target.value),disabled:m||s===null}),t.jsx("div",{className:"text-secondary3 text-base absolute top-1/2 -translate-y-1/2 right-4 ",children:s!==null?s>0?`${Math.floor(s/60)}:${String(s%60).padStart(2,"0")}`:"시간 초과":""})]}),t.jsxs("p",{className:"text-xs text-slate-400",children:["메일을 받지 못했다면 인증 코드 재전송을 요청하거나 스팸 메일함을 확인해 보세요. 이메일이 오지 않았나요?"," ",t.jsx("span",{className:"text-slate-600 underline cursor-pointer",children:"이메일 재발송"})]}),t.jsx(i.Item,{children:t.jsx(f,{type:"primary",htmlType:"submit",className:"text-base py-3 !h-auto w-full mt-6",disabled:!a||!n,children:"이메일 인증"})})]})]})};export{G as default};
