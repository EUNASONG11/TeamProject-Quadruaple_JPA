import{g as k,k as C,r as c,u as E,i as A,h as B,j as e,l as p,c as P,B as S,m as U}from"./index-Bm9G2PMV.js";import{R as $}from"./api-RMrr9BxD.js";import{u as z}from"./userAtom-BHWscT0D.js";import"./jwt-Dn912jOj.js";import{T as D}from"./TitleHeader-C44OYHxH.js";import{F as s}from"./index-BlAJfQ7H.js";import{R as O}from"./index-8R5iMGzs.js";import{U as V}from"./index-D7LfL9HE.js";import"./index-C5zS-AqD.js";import"./index-C-xthC12.js";import"./index-BQ4hq33F.js";import"./motion-DRcDUBp1.js";import"./responsiveObserver-uzRv6USo.js";import"./zoom-K_8YKqxC.js";import"./Portal-DxuW4Xz7.js";import"./index-Be5biOyE.js";import"./index-ylnYrNX2.js";import"./index-D4xBV9bV.js";import"./useId-CZlJin9A.js";import"./roundedArrow-CubeYIpZ.js";import"./useLocale-D2xSzVRw.js";import"./fade-CmhG3U0-.js";import"./CheckOutlined-Dsj-6UOX.js";const xe=()=>{const u=k("accessToken"),[i,_]=C(z);c.useEffect(()=>{},[i]);const h=E(),m=()=>{h(`/contents/index?strfId=${n}`)},o=A().state,[g]=s.useForm(),[I,d]=c.useState([]),[j,b]=c.useState(!1),[v]=B(),n=v.get("strfId"),y=({fileList:l})=>d(l),N=async l=>{var f;const{content:w,file:t,rating:T,strfId:L,userId:R}=l,F={userId:parseInt(R),strfId:parseInt(L),rating:parseInt(T),content:w},a=new FormData;t!=null&&t.fileList&&d(t.fileList),a.append("p",new Blob([JSON.stringify(F)],{type:"application/json"})),((f=t==null?void 0:t.fileList)==null?void 0:f.length)>0&&t.fileList.forEach(r=>{a.append("pics",r.originFileObj)});const x=a.get("p");x&&x.text().then(r=>console.log("p의 내용:",r));try{(await U.post(`${$.postReview}`,a,{headers:{Authorization:`Bearer ${u}`}})).data&&m()}catch(r){console.error(r)}};return e.jsxs("div",{children:[e.jsx(D,{icon:"back",onClick:m,title:o==null?void 0:o.strfTitle}),e.jsx("div",{className:"px-[32px] mt-[60px]",children:e.jsxs(s,{form:g,onFinish:N,layout:"vertical",initialValues:{userId:i.userId,strfId:n},className:"mt-[50px]",children:[e.jsx(s.Item,{label:"userId",name:"userId",hidden:!0,children:e.jsx(p,{value:i.userId})}),e.jsx(s.Item,{label:"strfId",name:"strfId",hidden:!0,children:e.jsx(p,{value:n})}),e.jsx(s.Item,{name:"rating",className:"flex flex-col justify-center items-center gap-[10px] text-slate-300",help:e.jsx("div",{className:"text-center mt-[10px] text-slate-300",children:"별점을 입력해주세요."}),children:e.jsx(O,{style:{fontSize:54}})}),e.jsx("h3",{className:"mb-[10px] text-slate-700 text-[24px] font-semibold",children:"리뷰를 남겨주세요."}),e.jsx(s.Item,{name:"content",rules:[{required:!0,message:"리뷰를 입력해주세요."}],children:e.jsx(p.TextArea,{rows:4,placeholder:"직접 경험한 솔직한 리뷰를 남겨주세요.",variant:"borderless",style:{height:300,resize:"none"},onChange:()=>b(!0),className:`placeholder: text-[20px] placeholder: text-slate-400
                ${j?"bg-white":"bg-slate-50"}`})}),e.jsx(s.Item,{name:"file",label:e.jsx("h3",{className:"mb-[10px] text-slate-700 text-[24px] font-semibold",children:"사진 첨부하기"}),children:e.jsx(V,{id:"file",listType:"picture",beforeUpload:()=>!1,fileList:I,onChange:y,multiple:!0,children:e.jsx("div",{className:`w-[136px] h-[136px] flex items-center justify-center\r
               bg-slate-100 hover:bg-[rgb(237,242,248)] rounded-lg\r
               transition`,children:e.jsx(P,{className:"text-[36px] text-slate-400"})})})}),e.jsx(s.Item,{children:e.jsx(S,{type:"primary",htmlType:"submit",className:`w-full h-[80px] py-[10px] rounded-lg\r
              text-[24px] font-semibold`,children:"완료"})})]})})]})};export{xe as default};
