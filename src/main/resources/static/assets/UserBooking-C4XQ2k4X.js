import{r as a,u as k,g as y,j as e,m as N,a1 as S,B as l,a as O}from"./index-B-t7JaaM.js";import{T as A}from"./TitleHeader-CbY5H8BK.js";import"./jwt-Bl-NaAJk.js";import{u as F}from"./userAtom-DYSAQ6mw.js";import{F as R}from"./Footer-C0naZtsr.js";import{d as c}from"./dayjs.min-Du6NfNaN.js";import{a as $}from"./index-BQ6e9REa.js";import{B as P}from"./BottomSheet-CLsMzzT7.js";import{b as E}from"./index-KOvtdy0_.js";import"./ko-DcW15Vpk.js";import"./index-CIW6QNLh.js";import"./index-Box-1SdA.js";import"./DockBar-t10YCcN5.js";import"./index-d3dz7bZp.js";import"./searchAtom-DYI8tniR.js";import"./searchSelector-BOtln8Gu.js";c.locale("ko");const Z=n=>{console.log(n.data);const{checkInDate:d,checkOutDate:m,strfTitle:i,strfPic:u,price:D,state:o,strfId:p,checkInTime:I,checkOutTime:f,createdAt:t}=n.data,s=k(),T=y("accessToken"),Y=[{label:e.jsxs("p",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(E,{className:"text-slate-300"}),"문의하기"]}),onClick:()=>{w()}}],[v,g]=a.useState(!1),w=async()=>{const r="/api/chat-room",b={strfId:p,title:i};console.log("채팅방 생성 요청",b);try{const x=await N.post(r,b,{headers:{Authorization:`Bearer ${T}`}});console.log("채팅방 생성",x.data);const j=x.data;j&&s(`/chatroom?roomId=${j.data.roomId}`)}catch(x){console.log("채팅방 생성",x),S.error("채팅방 생성에 실패했습니다.")}};c().format("YYYY.MM.DD");const C=r=>{switch(r){case 0:return"결제완료";case 1:return"예약확정";case 2:return"이용완료";case 3:return"취소완료"}},B=r=>{switch(r){case 0:return"bg-[rgba(255,253,204,0.6)] text-[#FFCC00]";case 1:return"bg-[rgba(165,238,254,0.3)] text-primary";case 2:return"bg-slate-100 text-slate-400";case 3:return"bg-[rgba(253,180,161,0.3)] text-secondary3"}},M=r=>{switch(r){case 0:case 1:return e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"w-full h-auto py-3 rounded-lg text-base font-semibold text-slate-700",children:"상세보기"}),e.jsx(l,{className:"w-full h-auto py-3 rounded-lg text-base font-semibold text-slate-700",children:"예약 취소"})]});case 2:return e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"w-full h-auto py-3 rounded-lg text-base font-semibold text-slate-700",children:"상세보기"}),e.jsx(l,{type:"primary",className:"w-full h-auto py-3 rounded-lg text-base font-semibold  text-white bg-primary",children:"리뷰작성"})]});case 3:return e.jsx(e.Fragment,{children:e.jsx(l,{className:"w-full h-auto py-3 rounded-lg text-base font-semibold text-slate-700",children:"상세보기"})})}};return e.jsxs("div",{className:"w-full px-6 py-4 flex flex-col gap-4 border-b-[10px] border-slate-100 last:border-none",children:[e.jsx("div",{className:`w-fit flex items-center justify-center px-2 py-1 text-sm font-bold ${B(o)}`,children:e.jsx("p",{children:C(o)})}),e.jsx("div",{children:e.jsx("h3",{className:"text-xl font-bold text-slate-700",children:i})}),e.jsx("div",{className:"flex gap-[20px]",children:e.jsxs("div",{className:"flex flex-col gap-[10px]",children:[e.jsxs("div",{className:"flex items-center gap-3 text-[16px] text-slate-700",children:[e.jsx("h4",{className:"text-slate-400 font-semibold text-base tracking-tight",children:"이용일시"}),e.jsxs("p",{className:"text-base text-slate-700",children:[e.jsx("span",{children:c(d).format("YYYY.MM.DD ddd")}),e.jsx("span",{children:"~"}),e.jsx("span",{children:c(m).format("YYYY.MM.DD ddd")})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[16px] text-slate-700",children:[e.jsx("h4",{className:"text-slate-400 font-semibold text-base",children:"예약일시"}),e.jsx("p",{className:"text-base text-slate-700 tracking-tight",children:c(t).format("YYYY.MM.DD ddd")})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[16px] text-slate-700",children:[e.jsx("h4",{className:"text-slate-400 font-semibold text-base tracking-tight",children:"인원"}),e.jsx("p",{className:"text-base text-slate-700",children:c(t).format("YYYY.MM.DD ddd")})]})]})}),e.jsxs("div",{className:"flex gap-[8px] items-center",children:[M(o),e.jsx("button",{type:"button",className:"aspect-square h-auto py-3 px-3 text-2xl text-slate-700 rounded-lg border border-slate-300 flex justify-center items-center",onClick:()=>g(!0),children:e.jsx($,{})})]}),e.jsx(P,{open:v,onClose:()=>g(!1),actions:Y})]})},z=a.memo(Z),L={code:"200 성공",data:[{bookingId:1,strfId:930,strfTitle:"고양이요",strfPic:"https://example.com/image1.jpg",createdAt:"2025-02-20T12:34:56Z",checkInDate:"2025-03-01",checkOutDate:"2025-03-05",price:5e4,state:0,chatRoomId:301,checkInTime:"15:00",checkOutTime:"11:00"},{bookingId:102,strfId:4,strfTitle:"4번",strfPic:"https://example.com/image2.jpg",createdAt:"2025-02-21T15:20:10Z",checkInDate:"2025-03-10",checkOutDate:"2025-03-15",price:75e3,state:1,chatRoomId:302,checkInTime:"14:00",checkOutTime:"10:30"},{bookingId:103,strfId:305,strfTitle:"사업쨔 나와",strfPic:"https://example.com/image3.jpg",createdAt:"2025-02-22T18:45:30Z",checkInDate:"2025-03-20",checkOutDate:"2025-03-25",price:6e4,state:2,chatRoomId:303,checkInTime:"16:00",checkOutTime:"12:00"}]},h=L.data,_=["예약 목록","예약 완료"],oe=()=>{const n=y("accessToken");O(F);const d=k(),m=()=>{d(-1)},[i,u]=a.useState(0),[D,o]=a.useState([]);a.useState([]),a.useState([]),a.useState(!0);const[p,I]=a.useState(0),f=a.useCallback(async()=>{try{const t=await N.get(`/api/booking?page=${p}`,{headers:{Authorization:`Bearer ${n}`}});console.log("예약 목록",t.data);const s=t.data;s.code==="200 성공"&&o(s.data)}catch(t){console.log("예약 목록 불러오기 실패",t)}},[]);return a.useEffect(()=>{f()},[]),e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsx(A,{icon:"back",title:"내 예약",onClick:m}),e.jsxs("div",{className:"flex flex-col gap-[20px] w-full",children:[e.jsx("div",{children:e.jsx("ul",{className:"flex gap-6 w-full border-b border-slate-200 px-[32px]",children:_.map((t,s)=>e.jsx("li",{onClick:()=>u(s),className:`flex justify-center items-center 
                  pt-[17px] pb-[16px]
                  text-lg cursor-pointer
                  border-b-[2px] transition-all duration-300 ease-in-out
                  ${s===i?"border-primary text-primary":"border-transparent text-slate-500 hover:text-primary"}`,children:t},s))})}),e.jsx("div",{className:"min-h-[500px] flex flex-col justify-center items-center",children:h==null?void 0:h.map((t,s)=>e.jsx(z,{data:t},s))}),e.jsx(R,{})]})]})};export{oe as default};
