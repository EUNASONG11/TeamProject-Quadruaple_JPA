import{g as k,c as B,u as D,r as o,j as t,e as h}from"./index-CG8vYf2y.js";import{T as P}from"./TitleHeader-HJveUMRb.js";import{M as C}from"./index-D8sbcYBj.js";import{S as A}from"./ScheduleDay-Bu5RgQPL.js";import{F as i}from"./index-BDzwUFU-.js";import{U as E}from"./index-DrXjvzMl.js";import{I as u}from"./index-DmNkHtiY.js";import{B as O}from"./button-Qumjrz4E.js";import"./index-CkZhrZUZ.js";import"./iconBase-BliIWTH0.js";import"./index-BK2APq6_.js";import"./index-zbYbnkux.js";import"./index-CWOPntzi.js";import"./match-D1Z4e6My.js";import"./index-BSwssLiK.js";import"./index-DNP8OPt4.js";import"./index-DgAP2TMZ.js";import"./tripAtom-DLZgpzTu.js";import"./pic-Jp7D6aQ0.js";import"./CenterModal-BT34dXD9.js";import"./dayjs.min-DlVafnYe.js";import"./index-DipEv1TS.js";import"./useSize-s7Cj9DSQ.js";import"./useMergedState-DU3z-VtB.js";import"./KeyCode-DNlgD2sM.js";import"./pickAttrs-KpDTT5l5.js";import"./index-DrSQ8jn4.js";import"./index-E9bkYm6o.js";import"./Portal-CztClCTi.js";import"./index-N7vMWSMs.js";import"./useId-D1G52zAA.js";import"./ContextIsolator-BLCcxi2B.js";import"./context-PnQlGr6A.js";import"./UnstableContext-Cxtoe_qF.js";import"./useZIndex-DHIAsWu5.js";import"./reactNode-Dx8pTwlk.js";import"./zoom-Dx8PYXKT.js";import"./Keyframes-DQFvTPSf.js";import"./genStyleUtils-BNuyCX-p.js";import"./useCSSVarCls-DVyv07Mk.js";import"./collapse-BbEVqHco.js";import"./index-Dgnr2uwk.js";import"./useLocale-DGpfybmt.js";import"./ExclamationCircleFilled-B_QXJoCI.js";import"./CloseCircleFilled-BQjJuuZg.js";import"./fade-DL5WuKh7.js";import"./CheckOutlined-DEXRZQVp.js";import"./CloseOutlined-72i2lCdW.js";import"./index-Bo0Apytk.js";import"./BaseInput-CpL4Y_YZ.js";const Ct=()=>{var x;k("accessToken");const[g]=B(),p=parseInt(g.get("tripId")),n=D(),j=()=>{n(-1)},y=()=>{n("/scheduleboard/index")};o.useState(""),o.useState("여행기 제목"),o.useState("");const[b,v]=o.useState({}),[m,c]=o.useState([]),[w,d]=o.useState(!1),N=async()=>{try{const e=await h.get(`/api/trip?trip_id=${p}`);console.log("여행확인하기",e.data);const l=e.data.data;v(l)}catch(e){console.log(e)}};o.useEffect(()=>{N()},[]);const[S]=i.useForm(),F=({fileList:e})=>c(e),I=async e=>{const{title:l,file:s,content:T}=e,L={tripId:p,title:l,content:T},a=new FormData;c(s.fileList),a.append("req",new Blob([JSON.stringify(L)],{type:"application/json"})),console.log(e),console.log(m),s&&s.fileList&&s.fileList.length>0&&s.fileList.forEach(r=>{a.append("tripReviewPic",r.originFileObj)});const f=a.get("p");f&&f.text().then(r=>console.log("p의 내용:",r)),console.log("보낸 데이터",[...a]);try{const r=await h.post("/api/trip-review",a);console.log(r.data)}catch(r){console.error(r)}};return t.jsxs("div",{children:[t.jsx(P,{icon:"back",onClick:j,title:"여행기 공유"}),t.jsx("div",{className:"mt-[60px] py-[40px] flex flex-col gap-[40px]",children:t.jsx("div",{className:"flex flex-col  px-[32px]",children:t.jsxs(i,{form:S,onFinish:I,layout:"vertical",className:"flex flex-col gap-[48px]",children:[t.jsx(i.Item,{name:"file",children:t.jsx(E,{id:"file",listType:"picture-card",beforeUpload:()=>!1,fileList:m,onChange:F,multiple:!0,children:t.jsx("div",{htmlFor:"fileUpload",className:`\r
            w-[160px] h-[160px] \r
            flex items-center justify-center\r
            bg-slate-100 rounded-lg\r
            hover:bg-[#e9eef3]\r
            transition duration-300\r
            cursor-pointer shrink-0`,children:t.jsx(C,{size:60,className:"text-slate-400"})})})}),t.jsx(i.Item,{name:"title",className:`border-b ${w?"border-primary":"border-slate-200"}`,children:t.jsx(u,{variant:"borderless",className:` px-[10px] py-[10px]\r
                text-slate-400 text-[36px] font-semibold\r
              placeholder:text-slate-400\r
                 `,onFocus:()=>d(!0),onBlur:()=>d(!1),placeholder:"여행기 제목"})}),t.jsx(i.Item,{name:"content",children:t.jsx(u.TextArea,{rows:4,placeholder:"이번 여행은 어떠셨나요? 여행에 대한 감상과 여행에서 경험한 꿀팁들을 남겨 다른 회원님들과 공유해보세요 !",variant:"borderless",maxLength:100,autoSize:{minRows:3,maxRows:5},style:{height:300,resize:"none"},className:"placeholder: text-[24px] placeholder: text-slate-400"})}),t.jsx("div",{className:"flex flex-col gap-[50px]",children:(x=b.days)==null?void 0:x.map((e,l)=>t.jsx(A,{data:e,showMap:!1,readOnly:!0}))}),t.jsx(i.Item,{className:"w-full",children:t.jsx(O,{type:"primary",htmlType:"submit",className:`w-full h-[80px] \r
                    text-slate-50 text-[24px] font-semibold`,onClick:y,children:"완료"})})]})})})]})};export{Ct as default};
