import{r as s,g as y,u as N,j as t,$ as I,B as C}from"./index-CXgPt5JN.js";/* empty css                    */import{j as i}from"./jwt-68WmjUBv.js";import{a as R}from"./index-BIhRtoM_.js";import{B as S}from"./BottomSheet-B8X0Xgpj.js";import{f as k,g as B}from"./index-CDNxKOHP.js";import{T as E}from"./TitleHeader-CzykBaxH.js";import{D as T}from"./DynamicGrid-BufPzwKx.js";import{R as A}from"./index-2ZNAj9Vd.js";import"./proxy-BT939zl-.js";import"./dayjs.min-CM77hzp1.js";import"./index-BjxdQkl4.js";import"./index-B6bEYUbY.js";import"./index-rIVHL4Ay.js";import"./Portal-DyoJ0XAQ.js";import"./useId-CFvmNKkm.js";import"./index-Cc8zrrM2.js";import"./fade-DtEfEpc4.js";import"./zoom-DXKB7aGh.js";import"./addEventListener-DObYpp2P.js";import"./motion-COLDN99j.js";import"./RightOutlined-C0MJpxxt.js";import"./index-g46somhf.js";import"./index-DVNH3El3.js";import"./isMobile-B4CO7CVJ.js";import"./roundedArrow-BJ1xfU1K.js";const le=()=>{const[o,l]=s.useState([]),[p,f]=s.useState(0),[c,n]=s.useState(0),[u,L]=s.useState(!0),[v,a]=s.useState(!1),[d,g]=s.useState(null);y("accessToken");const x=async()=>{try{const e=await i.get(`/api/review/my?start_idx=${c}`);l(r=>[...r,...e.data.data.dtoList]),e.data.data.dtoList&&n(r=>r+10),console.log("✅  getUserReview  res.data.data:",e.data.data.dtoList)}catch(e){console.log("✅  getUserReview  error:",e)}},w=async()=>{try{const e=await i.get("/api/review/count");console.log("✅  reviewCount  res:",e.data),f(e.data)}catch(e){console.log("✅  reviewCount  error:",e)}};console.log(" reviewInfo",o);const j=async e=>{console.log(e);try{await i.delete(`/api/review/del?review_id=${e.reviewId}`),n(0),l([]),console.log("리뷰 삭제:",res.data)}catch(r){console.log("리뷰 삭제:",r)}};s.useEffect(()=>{o.length===0&&x()},[c]),s.useEffect(()=>{w()},[]);const h=()=>{x()},m=N(),b=e=>[{label:t.jsxs("div",{className:"flex items-center gap-3 text-lg",children:[t.jsx(k,{className:"text-slate-400"})," 수정하기"]}),onClick:()=>{console.log("인식")}},{label:t.jsxs("div",{className:"flex items-center gap-3 text-lg",children:[t.jsx(B,{className:"text-slate-400"}),"삭제하기"]}),onClick:()=>{j(e),a(!1)}}];return t.jsxs("div",{children:[t.jsx(E,{icon:"back",title:"리뷰",onClick:()=>m(-2)}),t.jsx("div",{className:"flex justify-between py-[14px] px-4 border-b-[1px] border-t-[1px] border-slate-100 ",children:t.jsxs("p",{className:"text-sm font-semibold",children:["총 ",p,"개"]})}),t.jsx("div",{children:o.map((e,r)=>t.jsxs("div",{className:"py-8 px-4 border-b-[10px] border-slate-100 last:border-none",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("div",{children:t.jsxs("h1",{className:"flex items-center gap-2 h text-lg font-semibold text-slate-700 mb-2 cursor-pointer",onClick:()=>m(`/contents/index?strfId=${e.strfId}`),children:[e.strfTitle,t.jsx(I,{})]})}),t.jsx(R,{className:"text-slate-400 text-2xl cursor-pointer",onClick:M=>{a(!0),g(e)}})]}),t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(A,{className:"custom-rate flex items-center gap-[2px]",disabled:!0,allowHalf:!0,defaultValue:e.rating}),t.jsx("p",{className:"text-slate-400 text-base",children:e.reviewWriteDate.split(" ")[0].replace(/-/g,".")})]}),t.jsx("p",{className:"text-base text-slate-700 mb-2",children:e.content}),e.myReviewPic&&e.myReviewPic.length>0&&t.jsx(T,{reviewPics:e,type:"myReview"})]},r))}),u&&t.jsx("div",{className:"flex justify-center py-[14px]",children:t.jsx(C,{className:"text-slate-500 text-base !h-auto py-2 px-5 border-1 border-slate-200 rounded-full",onClick:()=>h(),children:"더보기"})}),t.jsx(S,{open:v,onClose:()=>a(!1),actions:d?b(d):[]})]})};export{le as default};
