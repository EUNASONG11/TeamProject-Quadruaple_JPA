import{r as i,g as I,h as w,j as e,l as z,a2 as Y,S as M,m as T,a1 as D,C as R,ag as Q,f as G,k as J}from"./index-B-t7JaaM.js";import{g as U}from"./index-CIW6QNLh.js";import{k as W,T as _}from"./koreaAreaCode-CfOihLKb.js";import{e as X,f as Z,d as ee}from"./match-MQgv0O8F.js";import{d as k}from"./dayjs.min-Du6NfNaN.js";import{S as v}from"./index-DysomVzM.js";import{S as B}from"./index-CKioIcqV.js";import{P as te}from"./index-YEA0V6ek.js";import{c as se}from"./customParseFormat-CzCxXzWi.js";import"./PurePanel-DxMPlPr5.js";import"./index-DYpbPRiV.js";import"./index-C2GtDL4h.js";import"./Portal-CwazXomh.js";import"./useId-Dwe9TA6R.js";import"./Overflow-Bk0e6aBC.js";import"./useIcons-Bu1M7hRz.js";import"./CheckOutlined-Oh8e4ogq.js";import"./index-B2p7BWkp.js";import"./zoom-BYTBG-Mc.js";import"./useLocale-B2jXTKV4.js";import"./index-Dl_d6bPn.js";import"./index-BU4QIkP3.js";const ae=({title:o,content:s,type:a})=>{const c=I("accessToken"),p=I("user").busiNum[0],[y]=w(),j=Number(y.get("strfId")),[l,b]=i.useState(!1),[d]=i.useState(!1),[u,m]=i.useState(null);i.useEffect(()=>{console.log("value",u)},[u]);const[H,$]=i.useState(""),[A,S]=i.useState([]),C=t=>{A.includes(t)?S(r=>r.filter(n=>n!==t)):S(r=>[...r,t])},g=async()=>{const t="/api/detail/title",r={strfId:j,busiNum:p,title:u};console.log("payload",r);try{const N=(await T.put(t,r,{headers:{Authorization:`Bearer ${c}`}})).data;return console.log(N),N&&D.success("업체명 변경이 변경되었습니다"),N}catch(n){return console.log("이름 변경",n),D.error("업체명 변경에 실패했습니다."),null}},x=async()=>{const t="/api/detail/state",r={strfId:j,busiNum:p,state:u};console.log("payload",r);try{return(await T.put(t,r,{headers:{Authorization:`Bearer ${c}`}})).data}catch(n){return console.log("영업 상태 변경",n),D.error("영업 상태 변경에 실패했습니다."),null}},V=()=>{b(!l),l===!0&&u.trim()!==""&&a==="title"&&g(),l===!0&&a==="state"&&x()},F=[{value:0,label:"영업중"},{value:1,label:"휴업"},{value:2,label:"폐업"}],L=e.jsx(v,{defaultValue:H,children:W.map(t=>e.jsx(v.Option,{value:t.code,children:t.code},t.code))}),O=t=>{const n=t.replace(/[^\d]/g,"").slice(0,7);return n.length>3?`${n.slice(0,3)}-${n.slice(3)}`:n},q=t=>typeof t=="string"||typeof t=="number"||typeof t=="boolean"||t===null||t===void 0||M.isValidElement(t),K=t=>Array.isArray(t)&&t.every(r=>typeof r=="object"&&a==="amenity"&&"amenityTitle"in r),P=t=>Array.isArray(t)&&t.every(r=>typeof r=="string"),E={frequency:[{label:"없음",value:""},{label:"매주",value:"weekly"},{label:"격주",value:"biweekly"}],day:[{label:"월",value:"mon"},{label:"화",value:"tue"},{label:"수",value:"wed"},{label:"목",value:"thu"},{label:"금",value:"fri"},{label:"토",value:"sat"},{label:"일",value:"sun"}]};return i.useEffect(()=>{if(a==="tell"&&typeof s=="string"){const t=s?s.split("-"):["000","0000","0000"];$(t[0]),m(`${t[1]}-${t[2]}`)}a==="detail"&&typeof s=="string"&&m(s)},[s,a]),e.jsxs("section",{className:"px-7 pt-4 pb-5 flex flex-col gap-2 border-b-2 border-slate-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:o}),e.jsxs("button",{type:"button",className:"flex items-center gap-1 text-primary font-semibold hover:text-primary2 transition-all duration-300",onClick:V,children:[!l&&e.jsxs(e.Fragment,{children:[e.jsx(U,{}),"변경"]}),l&&e.jsx(e.Fragment,{children:"완료"})]})]}),e.jsxs(B,{spinning:d,children:[!l&&e.jsxs("div",{className:"text-lg font-medium text-slate-500 px-2 py-1",children:[q(s)&&e.jsx("div",{children:s}),K(s)&&e.jsx("ul",{children:s.map(t=>e.jsxs("li",{children:[t.icon," ",t.amenityTitle]},t.amenityId))}),P(s)&&e.jsxs(e.Fragment,{children:[a==="busiHour"&&`${s[0]}~${s[1]}`,a==="checkTime"&&`${s[0]}~${s[1]}`,a==="restDate"&&s.map((t,r)=>r!==s.length?e.jsx("p",{children:t},r):e.jsxs("p",{children:[t,","]},r))]})]}),l&&a==="title"&&e.jsx(z,{size:"large",defaultValue:s,placeholder:"업체 이름을 입력해주세요",onChange:t=>{m(t.target.value)}}),l&&a==="state"&&e.jsx(v,{defaultValue:s,options:F,size:"large",className:"w-1/3 ",onChange:t=>m(t)}),l&&a==="tell"&&e.jsx(z,{addonBefore:L,size:"large",defaultValue:u,placeholder:"전화번호를 입력해주세요.",onChange:t=>m(t.target.value),value:O(u??"0")}),l&&a==="detail"&&e.jsx(Y,{placeholder:"업체 소개를 작성해주세요",maxLength:50,onChange:t=>{m(t.target.value)},style:{resize:"none",height:"27.73vw",padding:"20px"},value:u}),l&&a==="amenity"&&e.jsx("div",{className:"flex flex-wrap gap-2",children:X.map((t,r)=>e.jsxs("button",{type:"button",className:`flex text-base items-center gap-2
                          border rounded-2xl w-fit px-2 py-1
                          ${A.includes(t.amenity_id)?"border-primary text-primary":"border-slate-300 text-slate-500"}`,onClick:()=>C(t.amenity_id),children:[t.icon,t.key]},r))}),l&&a==="busiHour"&&e.jsx("div",{children:e.jsx(_.RangePicker,{defaultValue:P(s)?[k(s[0]),k(s[1])]:void 0,format:"HH:mm"})}),l&&a==="checkTime"&&e.jsx("div",{children:e.jsx(_.RangePicker,{defaultValue:P(s)?[k(s[0],"HH:mm"),k(s[1],"HH:mm")]:void 0,format:"HH:mm",onChange:t=>m(t)})}),l&&a==="restDate"&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{options:E.frequency,placeholder:"휴무 주기",onChange:t=>{m({...t,frequency:t})},size:"large"}),e.jsx(v,{options:E.day,placeholder:"요일 선택",size:"large",mode:"multiple",allowClear:!0,className:"w-full",onChange:t=>{m({...t,day:t})}})]})]})]})},h=i.memo(ae),re=({strfData:o})=>{const[s]=w(),a=s.get("category"),f=I("user").title;console.log(o);const{state:p=0,tell:y="",detail:j="",amenity:l=[]}=o??{},b=d=>{switch(d){case 0:return"영업중";case 1:return"휴업";case 2:return"폐업";default:return"알 수 없음"}};return e.jsxs(e.Fragment,{children:[e.jsx(h,{title:"업체 이름",content:f,type:"title"}),e.jsx(h,{title:"업체 상태",content:b(p),type:"state"}),e.jsx(h,{title:"업체 전화번호",content:y,type:"tell"}),e.jsx(h,{title:"업체 전화번호",content:y,type:"tell"}),e.jsx(h,{title:"업체 소개",content:j,type:"detail"}),a===R.STAY&&e.jsx(h,{title:e.jsxs("span",{className:"flex items-center gap-2",children:["업체 편의 정보"," ",e.jsx(te,{trigger:"hover",placement:"right",content:"* 검색 시 사용되는 정보입니다.",children:e.jsx("button",{type:"button",children:e.jsx(Q,{className:"text-lg text-slate-300 cursor-help"})})})]}),content:l,type:"amenity"})]})};k.extend(se);const le=({strfData:o})=>{const[s]=w(),a=s.get("category");console.log(o);const{startAt:c,endAt:f,closeCheck:p,openCheck:y,restDate:j}=o,l=[c,f],b=[k(y,"HH:mm:ss").format("HH:mm"),k(p,"HH:mm:ss").format("HH:mm")],d=j.map(u=>Z(u));return e.jsxs(e.Fragment,{children:[a===R.FEST&&e.jsx(h,{title:"영업 시간",content:l,type:"busiHour"}),e.jsx(h,{title:"입실/퇴실 시간",content:b,type:"checkTime"}),e.jsx(h,{title:"휴무일",content:d,type:"restDate"}),e.jsx(h,{title:"임시 휴무일 등록",content:b,type:"tempRest"})]})},oe=({list:o,current:s,changeCateIndex:a})=>e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("section",{children:e.jsx("ul",{className:"flex items-center w-full",children:o.map((c,f)=>e.jsxs("li",{className:`w-full flex items-center justify-center gap-2 text-lg font-semibold py-2 cursor-pointer
          ${s===f?"text-primary border-b-4 border-primary":"text-slate-400 border-b-2 border-slate-200"}
          transition-all duration-300`,onClick:()=>{a(f)},children:[c.icon,c.label]},f))})}),e.jsx("section",{children:o[s].children})]}),ne=G({key:"strfAtom",default:{strfId:"",category:"",strfTitle:"",latit:0,longitude:0,address:"",post:"",tell:"",startAt:"",endAt:"",openCheck:"",closeCheck:"",detail:"",busiNum:"",locationName:"",state:0,cid:0,hostProfilePic:"",hostName:"",inquiredAt:"",wishCnt:0,ratingAvg:0,reviewCnt:"",wishIn:0,recentCheck:0,recentCheckStatus:0,strfPics:[{strfId:"",strfPic:""}],restDate:[],amenity:[]}}),He=()=>{const o=I("accessToken"),[s]=w(),a=s.get("strfId"),c=s.get("category"),f=Number(s.get("tab")),[p,y]=J(ne),[j,l]=i.useState(f),[b,d]=i.useState(!1),[u,m]=i.useState([]),H=async()=>{const C="/api/detail/member";d(!0);try{const g=await T.get(`${C}?strf_id=${a}`,{headers:{Authorization:`Bearer ${o}`}});console.log(g.data);const x=g.data;return x&&(y({...p,...x.data}),d(!1)),x}catch(g){return d(!1),console.log("상품조회",g),null}},$=async()=>{const C="/api/detail/parlor";d(!0);try{const x=(await T.get(`${C}?strf_id=${a}&category=${ee(c)}`)).data;return x&&(d(!1),m(x.data)),console.log("객실 조회",x),x}catch(g){return console.log("객실 조회",g),null}},A=[{label:e.jsx("p",{children:"기본 정보"}),children:e.jsx(re,{strfData:p})},{label:e.jsx("p",{children:"운영 정보"}),children:e.jsx(le,{strfData:p})}],S=C=>{l(C)};return i.useEffect(()=>{H(),c===R.STAY&&$()},[]),e.jsx("div",{children:e.jsx(B,{spinning:b,children:e.jsx(oe,{list:A,changeCateIndex:S,current:j})})})};export{He as default};
