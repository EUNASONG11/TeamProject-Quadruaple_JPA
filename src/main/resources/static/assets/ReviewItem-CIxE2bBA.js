import{f as $,u as A,i as O,k as S,r as t,j as e,n as E,B as M,ak as P,m as T,a1 as u}from"./index-B-t7JaaM.js";import{a as _}from"./index-BQ6e9REa.js";import{B as D}from"./BottomSheet-CLsMzzT7.js";import{R as L}from"./ReviewImage-CkQvU8ch.js";import{g as H,h as U}from"./index-CIW6QNLh.js";import{R as V}from"./index-B2JJb4AZ.js";const W=$({key:"editReview",default:{userReview:null,reviewReply:""}}),X=({strfId:i,item:s})=>{const n=A(),f=()=>{n(`/business/review/edit?type=create&strfId=${i}&reviewId=${s.reviewId}`)},h=()=>{n(`/business/review/edit?type=edit&strfId=${i}&reviewId=${s.reviewId}&replayId=${s.reviewReplyId}`)},r=O().pathname,[o,c]=S(W),[l,w]=t.useState(!1),[j,g]=t.useState(!1),[d,x]=t.useState(!1),[R,p]=t.useState(!1),a=t.useRef(null),y=async()=>{const B=`/api/business/review/delete?reviewReplyId=${s.reviewReplyId}`;try{const m=(await T.delete(B)).data;return console.log("삭제",m),u.success("삭제가 완료되었습니다"),m}catch(v){return console.log("삭제",v),u.error("삭제를 실패했습니다"),null}},b=[{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(H,{className:"text-slate-300"}),"수정하기"]}),onClick:()=>C()},{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(U,{className:"text-slate-400"}),"삭제하기"]}),onClick:()=>k()}],N=()=>{x(!d)},I=()=>{c({...o,userReview:s}),f()},C=()=>{c({...o,userReview:s,reviewReply:s.reviewReply??""}),h()},k=()=>{p(!0)};return t.useEffect(()=>{a.current&&g(a.current.scrollHeight>72)},[s.content]),e.jsxs("div",{className:"flex flex-col gap-4 px-4 py-5",children:[e.jsxs("section",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-slate-200 rounded-full w-10 h-10 overflow-hidden",children:e.jsx("img",{src:`${E}/${s.userId}/${s.writerUserProfilePic}`,alt:"프로필 사진"})}),e.jsx("p",{className:"text-lg font-semibold text-slate-700",children:s.userName})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{value:s.ratingAvg,disabled:!0}),e.jsx("p",{className:"text-sm font-semibold text-slate-700",children:s.ratingAvg})]}),e.jsx("p",{className:"text-sm text-slate-500",children:s.createdAt})]}),e.jsxs("div",{children:[e.jsx("p",{ref:a,className:`text-base text-slate-700 overflow-hidden transition-[max-height] duration-500 ease-in-out ${l?"max-h-[1000px]":"max-h-[72px]"}`,children:s.content}),j&&e.jsx("button",{type:"button",className:"text-primary text-base font-semibold mt-2",onClick:()=>w(!l),children:l?"접기":"더보기"})]}),e.jsx(L,{imgArr:s.reviewPicList,reviewId:s.reviewId})]}),s.reviewReply&&e.jsxs("section",{className:"p-4 bg-slate-100 rounded-lg flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"사장님"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-slate-500",children:s.reviewReplyCreatedAt}),r!=="/business/review/edit"&&e.jsx("button",{type:"button",className:"text-slate-500 text-xl font-semibold",onClick:()=>{x(!0)},children:e.jsx(_,{})})]})]}),e.jsx("div",{children:e.jsx("p",{className:"text-base text-slate-700",children:s.reviewReply})})]}),r==="/business/review/edit"||s.reviewReply?null:e.jsx(M,{color:"primary",variant:"outlined",className:"text-xl font-semibold px-3 py-1 max-h-[50px] h-[16vw]",onClick:I,children:"댓글 작성"}),e.jsx(D,{open:d,onClose:N,actions:b}),R&&e.jsx(P,{handleClickCancle:()=>p(!1),handleClickSubmit:y,content:"삭제하시겠습니까?"})]})};export{X as R,W as e};
