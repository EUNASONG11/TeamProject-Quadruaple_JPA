import{f,h as j,j as e,a_ as b,a2 as k,B as x,g,k as u,m,r as p}from"./index-Bm9G2PMV.js";import{d as y}from"./dayjs.min-C5j8qgA9.js";import{c as N}from"./customParseFormat-D3yiFwkY.js";import{o as v}from"./index-C5zS-AqD.js";import{D as w}from"./index-BdfRSEG9.js";import{L as D}from"./index-BkaPrlqb.js";import{S as L}from"./index-8pCYuP1t.js";import"./PurePanel-BxV2mXmV.js";import"./index-D4xBV9bV.js";import"./Portal-DxuW4Xz7.js";import"./useId-CZlJin9A.js";import"./Overflow-CM5TO8zT.js";import"./useIcons-DvO__9Nu.js";import"./CheckOutlined-Dsj-6UOX.js";import"./roundedArrow-CubeYIpZ.js";import"./useLocale-D2xSzVRw.js";const h=f({key:"bookingAtom",default:{date:[],bookingList:[]}});y.extend(N);const B=({item:s})=>{console.log("item",s);const[a]=j(),n=a.get("strfId"),i=t=>{switch(t){case"0":return"결제완료";case"1":return"예약확정";case"2":return"이용완료";case"3":return"취소완료"}},r=t=>{switch(t){case"0":return"bg-[rgba(255,253,204,0.6)] text-[#FFCC00]";case"1":return"bg-[rgba(165,238,254,0.3)] text-primary";case"2":return"bg-slate-100 text-slate-400";case"3":return"bg-[rgba(253,180,161,0.3)] text-secondary3"}},o=t=>{switch(t){case"0":case"1":return e.jsxs(e.Fragment,{children:[e.jsx(x,{color:"primary",variant:"filled",className:"w-full h-auto py-3 rounded-lg text-base font-semibold text-primary3 ",children:"예약 취소"}),e.jsx(x,{type:"primary",className:"w-full h-auto py-3 rounded-lg text-base font-semibold ",children:"예약 승인"})]});case"2":return e.jsx(e.Fragment,{children:e.jsx(x,{className:"w-full h-auto py-3 rounded-lg text-base font-semibold bg-primary2 text-slate-700",children:"예약 취소"})});case"3":return e.jsx(e.Fragment,{children:e.jsx(x,{className:"w-full h-auto py-3 rounded-lg text-base font-semibold text-slate-700",disabled:!0,children:"예약 취소 완료"})})}};return e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs("div",{className:"px-4 py-3 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-start justify-between h-[10vw] max-h-[60px] border-b border-slate-200 ",children:[e.jsx("p",{children:"날짜"}),e.jsxs("button",{type:"button",className:"flex gap-1 items-center text-primary",children:[e.jsx("p",{children:"상세보기"}),e.jsx("i",{children:e.jsx(b,{})})]})]}),e.jsxs("section",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:`w-fit flex items-center justify-center px-2 py-1 text-sm font-bold ${r(s.state)}`,children:e.jsx("p",{children:i(s.state)})}),e.jsx("div",{children:e.jsx("h2",{className:"text-xl font-bold text-slate-700",children:s.title})}),e.jsxs("div",{className:"flex items-start gap-5",children:[e.jsx("div",{className:"w-20 aspect-square rounded-2xl bg-slate-200 overflow-hidden",children:e.jsx("img",{src:`${k}/${n}/${s.picName}`,alt:s.title,className:"w-full h-full"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-base text-slate-700",children:`${s.checkInDate} ~ ${s.checkOutDate}`}),e.jsx("p",{className:"text-slate-500 text-sm",children:"4박 5일, 체크인 시간, 체크아웃 시간"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"결제 금액"})]})]})]}),e.jsx("div",{className:"flex items-center gap-3 w-full",children:o(s.state)})]})]})})},$=()=>{const s=g("accessToken"),[a,n]=u(h);console.log("bookingData",a);const i=async()=>{var o;const r="/api/business/my-page/booking";try{const l=(await m.get(`${r}?startDate=${a.date[0]}&endDate=${a.date[1]}`,{headers:{Authorization:`Bearer ${s}`}})).data;return console.log("예약 목록 확인",l),l&&n({...a,bookingList:l}),l}catch(t){return m.isAxiosError(t)&&(((o=t.response)==null?void 0:o.status)===404?(console.log("404 정보 없음",t.response.data),n({...a,bookingList:[]})):console.log("예약 목록 확인",t)),null}};return e.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[e.jsxs("div",{className:"px-5 py-4 flex gap-3 border border-slate-200 rounded-lg items-center",children:[e.jsx("i",{className:"text-3xl text-slate-500",children:e.jsx(v,{})}),e.jsxs("div",{children:[e.jsx("p",{className:"px-3 text-sm text-slate-700",children:"날짜 직접 선택"}),e.jsx(w.RangePicker,{placeholder:["검색필터 시작일","검색필터 종료일"],variant:"borderless",suffixIcon:!1,onChange:r=>{console.log(r),r&&n({...a,date:r.map(o=>o?o.format("YYYY-MM-DD"):"")})}})]})]}),e.jsx(x,{type:"primary",className:"text-xl py-1 max-h-[50px] h-[16vw]",onClick:i,children:"검색하기"})]})},F=({content:s="결과가 없습니다"})=>e.jsxs("div",{className:"flex flex-col items-center p-20",children:[e.jsx(D,{className:"w-full text-slate-300 text-8xl mb-5 "}),e.jsx("p",{className:"text-2xl text-slate-400 ",children:s})]}),J=()=>{const s=g("accessToken"),[a,n]=u(h),[i,r]=p.useState(!1),o=async()=>{var l;const t="/api/business/my-page/booking";r(!0);try{const d=(await m.get(t,{headers:{Authorization:`Bearer ${s}`}})).data;return console.log("예약 목록 확인",d),d&&(r(!1),n({...a,bookingList:d})),d}catch(c){return m.isAxiosError(c)&&(r(!1),((l=c.response)==null?void 0:l.status)===404?(console.log("404 정보 없음",c.response.data),n({...a,bookingList:[]})):console.log("예약 목록 확인",c)),null}};return p.useEffect(()=>{o()},[]),e.jsxs("div",{children:[e.jsx($,{}),e.jsxs(L,{spinning:i,children:[a.bookingList.length===0&&e.jsx(F,{content:"예약이 없습니다"}),a.bookingList.length>0&&a.bookingList.map((t,l)=>e.jsx(B,{item:t},l))]})]})};export{J as default};
