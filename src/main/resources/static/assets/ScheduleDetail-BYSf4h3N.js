import{u as B,r,j as e,N as U,B as O,g as _,Q as z,b as V,a3 as W,n as F,ao as G,a8 as Q,c as T}from"./index-CiM0iehI.js";import"./TitleHeader-bqTVMIXy.js";import{e as q}from"./index-D5eFVfyz.js";import{a as H}from"./index-CNygkORx.js";import{S as J}from"./ScheduleDay-BRjrnc7C.js";import{S as K,a as X}from"./swiper-react-DXCZApEp.js";import{j as S}from"./jwt-QgJYqd_L.js";import{u as Y}from"./userAtom-z3SjLGJk.js";import{R as Z}from"./index-BpFWN78L.js";import{a as ee}from"./index-DD-JyHDZ.js";import{S as E}from"./index-DRF_f7CH.js";import"./dayjs.min-H8NlPhUh.js";import"./index-DxYWFAJ6.js";import"./index-LQh0N3NZ.js";import"./match-CHJTCtXc.js";import"./index-CzF2OAM2.js";import"./index-Cpn1PKWB.js";import"./index-BCTjbqQi.js";import"./index-DutlALrt.js";import"./tripAtom-D7qNWu13.js";import"./MarkerClusterer-CesnT0MC.js";import"./index-ntae1Qnb.js";import"./index-c8GoCNeN.js";import"./index-BB0IkGXf.js";import"./Portal-C3bpsPPe.js";import"./useId-CfZRftqB.js";import"./isMobile-B4CO7CVJ.js";import"./motion-BUbX8Cb0.js";import"./roundedArrow-CePw_OaH.js";import"./zoom-BZWbfUq2.js";const te=({openSelectTripModal:d,setOpenSelectTripModal:m,tripLocationList:g,tripReviewId:o})=>{const j=B(),w=()=>{j("/schedule/days",{state:{selectedLocationId:g,tripReviewId:o,tripId:p.tripId,title:p.title,from:"/scheduleboard/scheduleDetail"}})},[l,f]=r.useState([]),[c,v]=r.useState(null),[p,u]=r.useState(null);r.useEffect(()=>{console.log("tripListData",l)},[l]),r.useEffect(()=>{console.log("selectedTripData",p)},[p]);const y=async()=>{try{const s=await S.get("/api/trip-list");console.log(s.data);const b=s.data.data.beforeTripList;f(b)}catch(s){console.log("여행 목록 불러오기:",s)}},h=(s,n)=>{v(n),console.log("item",s),u(s)},N=()=>{m(!1)},x=s=>{s.stopPropagation()};return r.useEffect(()=>{y()},[]),e.jsx("div",{className:`fixed top-0 left-[50%] translate-x-[-50%] z-10\r
\r
            max-w-3xl w-full mx-auto h-screen\r
            flex items-end justify-center\r
            bg-[rgba(0,0,0,0.5)]\r
            pb-[70px]\r
            `,onClick:()=>{N()},children:e.jsxs("div",{className:`bg-white w-full \r
                rounded-t-2xl px-[60px] py-[55px]\r
                flex flex-col gap-[20px]\r
                `,onClick:x,children:[e.jsx("h2",{className:"text-[28px] text-slate-700 font-bold",children:"이 일정을 담을 여행을 선택해주세요."}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("h3",{className:"text-[18px] text-slate-700 font-semibold",children:"나의 다가오는 여행"}),e.jsx("ul",{className:`flex flex-col px-[10px] py-[20px] gap-[30px]\r
          max-h-[55vh] overflow-y-auto`,children:l==null?void 0:l.map((s,n)=>e.jsxs("li",{className:`flex items-center gap-[20px] px-[20px] py-[10px] rounded-[16px] ${c===n?"bg-slate-200":""}`,onClick:()=>h(s,n),children:[e.jsx("div",{className:"w-[50px] h-[50px] bg-slate-100 rounded-full overflow-hidden",children:e.jsx("img",{src:`${U}/${s.locationPic}`,alt:"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("h4",{className:"text-[18px] text-slate-700 font-semibold",children:s.title}),e.jsxs("p",{className:"text-[16px] text-slate-500",children:[e.jsx("span",{children:s.startAt}),e.jsx("span",{children:"-"}),e.jsx("span",{children:s.endAt})]})]})]},n))})]}),e.jsx(O,{type:"primary",htmlType:"button",className:"h-[50px] px-[15px] py-[20px] text-[24px] text-white font-semibold",onClick:w,children:"선택 완료"})]})})},Pe=()=>{var R,k,D,I,L,$,C,P,A;const d=_("accessToken");z(Y);const[m]=V(),g=parseInt(m.get("tripId")),o=parseInt(m.get("TripReviewId")),j=B(),w=()=>{j(`/report?category=${Q.TRIPREVIEW}&reportTarget=${o}`)},[l,f]=r.useState({}),[c,v]=r.useState({}),[p,u]=r.useState(!1),[y,h]=r.useState(!1),[N,x]=r.useState(!1),s=async()=>{const a="/api/trip-review/otherTripReview";if(x(!0),d)try{const t=await T.get(`${a}?tripReviewId=${o}`,{headers:{Authorization:`Bearer ${d}`}});console.log("다른 사람 여행기 조회",t.data);const i=t.data;x(!1),f(i.data)}catch(t){x(!1),console.log("다른 사람 여행기 조회",t)}if(!d)try{const t=await T.get(`${a}?tripReviewId=${o}`);console.log("다른 사람 여행기 조회",t.data);const i=t.data;x(!1),f(i.data)}catch(t){x(!1),console.log("다른 사람 여행기 조회",t)}},n=async()=>{h(!0);try{const a=await T.get(`/api/trip?trip_id=${g}&signed=false`);console.log("여행확인하기",a.data);const t=a.data.data;v(t)}catch(a){console.log(a)}finally{h(!1)}},b=async()=>{const a="/api/trip-review/like",t={tripReviewId:o};try{const i=await S.post(a,t);console.log("여행기 추천",i.data),i.data.code==="200 성공"&&s()}catch(i){console.log("여행기 추천",i)}},M=async()=>{const a={tripReviewId:o};try{const t=await S.delete("/api/trip-review/like",a);console.log("여행기 추천 취소",t.data),t.data.status===200&&s()}catch(t){console.log("여행기 추천 취소",t)}};return r.useEffect(()=>{s(),n()},[]),e.jsxs("div",{children:[e.jsx("section",{className:"flex flex-col px-[32px] py-[30px] gap-[30px]",children:e.jsxs(E,{spinning:N,children:[e.jsx(K,{slidesPerView:1,spaceBetween:0,loop:!0,className:"mySwiper w-full h-[406px] overflow-hidden",children:l.length>0?(k=(R=l[0])==null?void 0:R.tripReviewPics)==null?void 0:k.map((a,t)=>e.jsx(X,{className:"max-w-3xl h-[406px] bg-slate-200",children:e.jsx("img",{src:`${W}/${l[0].tripReviewId}/${a}`,alt:"thum",className:"w-full h-full object-cover"})},t)):null}),e.jsx("div",{className:"flex flex-col gap-[10px]",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("h2",{className:"font-bold text-[36px] text-slate-700",children:(D=l[0])==null?void 0:D.title}),e.jsxs("ul",{className:"flex gap-[10px] items-center",children:[e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(q,{className:"text-slate-300 text-[18px]"}),e.jsx("p",{className:"text-slate-500 font-bold text-[14px]",children:(I=l[0])==null?void 0:I.recentCount})]}),e.jsxs("li",{className:"flex gap-[5px] items-center cursor-pointer",children:[e.jsx(H,{className:"text-slate-300 text-[18px] focus:text-secondary3 transition-all duration-300"}),e.jsx("button",{type:"button",className:"text-slate-500 font-bold text-[14px]",children:(L=l[0])==null?void 0:L.likeCount})]}),e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(F,{className:"text-slate-300 text-[18px]"}),e.jsxs("p",{className:"text-slate-500 font-bold text-[14px]",children:[" ",($=l[0])==null?void 0:$.scrapCount]})]})]})]}),e.jsxs("div",{className:"flex gap-[10px]",children:[d&&e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",className:`w-[50px] h-[50px] flex items-center justify-center
                    rounded-full text-[20px]
                   transition-all duration-300
                   ${((C=l[0])==null?void 0:C.likeUser)===1?"text-secondary3 bg-secondary3/10 hover:bg-secondary3/20":"text-slate-500 bg-slate-200 hover:bg-slate-200/85"}`,onClick:()=>{var a;((a=l[0])==null?void 0:a.likeUser)===0?b():M()},children:e.jsx(ee,{})})}),d&&e.jsx("button",{type:"button",className:`w-[50px] h-[50px] flex items-center justify-center
                    rounded-full text-[20px] bg-slate-200 text-slate-500
                   transition-all duration-300
                   hover:bg-slate-200/85`,onClick:w,children:e.jsx(Z,{})})]})]})}),e.jsx("div",{className:"py-3",children:e.jsx("p",{children:(P=l[0])==null?void 0:P.content})})]})}),e.jsx("section",{children:e.jsx(E,{spinning:y,children:e.jsx("div",{className:"flex flex-col gap-[50px]",children:(A=c==null?void 0:c.days)==null?void 0:A.map((a,t)=>e.jsx(J,{data:a,newTrip:!1,readOnly:!0},t))})})}),e.jsx("div",{className:"px-8 pb-5 mb-[30px]",children:e.jsxs(O,{type:"primary",variant:"filled",className:"flex gap-[10px] py-[10px] h-auto w-full",onClick:()=>u(!0),classNames:"bg-slate-100",children:[e.jsx(G,{className:"w-[30px] h-[30px] text-white"}),e.jsx("span",{className:"font-semibold text-[24px] text-white",children:"내 여행에 담기"})]})}),p&&e.jsx(te,{openSelectTripModal:p,setOpenSelectTripModal:u,tripLocationList:c==null?void 0:c.tripLocationList,tripReviewId:o})]})};export{Pe as default};
