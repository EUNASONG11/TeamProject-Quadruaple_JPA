import{r as i,j as e,d as p,a8 as g,g as h,aE as j,a3 as f,e as d}from"./index-DZF_lMwV.js";import{B as u}from"./BottomSheet-DBqcQm8j.js";import{a as N}from"./index-C8yBNrXo.js";import{N as b}from"./NoData-DFIY8mSl.js";import{P as y}from"./index-Cdasvksf.js";import{S as v}from"./index-Bv825Ok0.js";import"./proxy-sC5Jceop.js";import"./index-DWVMhexM.js";import"./motion-DnGLBzQj.js";import"./index-Cbswu_Hk.js";import"./index-D-wHe6FV.js";import"./Portal-hI7XGsNB.js";import"./useId-DRiPHj_v.js";import"./isMobile-DjGTsQxe.js";import"./roundedArrow-7xBDnTzZ.js";import"./zoom-CNuMB0di.js";const S=({item:t})=>{const[s,a]=i.useState(!1),l=[{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(N,{}),"환불하기"]}),onClick:()=>{console.log("환불하기")}}];return e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"flex flex-col gap-2 py-5 border-b border-slate-100",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center",children:[e.jsx("h5",{className:"col-span-1 text-slate-700 font-semibold text-lg",children:"거래 일시"}),e.jsx("p",{className:"col-span-2 text-slate-600 text-lg",children:p(t.usedAt).format("YYYY-MM-DD HH:mm:ss")}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",className:"text-slate-500 text-xl",onClick:()=>a(!0),children:e.jsx(g,{})})})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center",children:[e.jsx("h5",{className:"col-span-1 text-slate-700 font-semibold text-lg",children:"거래 구분"}),e.jsx("p",{className:`col-span-3 text-base px-2 rounded-sm w-fit flex items-center justify-center
            ${t.refund?"bg-[rgba(253,180,161,0.3)] text-secondary3":"bg-[rgba(165,238,254,0.3)] text-primary"}`,children:t.refund?"환불":"결제"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center",children:[e.jsx("h5",{className:"col-span-1 text-slate-700 font-semibold text-lg",children:"내역"}),e.jsx("p",{className:"col-span-3 text-slate-600 text-lg",children:t.title})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center",children:[e.jsx("h5",{className:"col-span-1 text-slate-700 font-semibold text-lg",children:"결제 금액"}),e.jsxs("p",{className:"col-span-3 text-slate-600 text-lg",children:[t.amount.toLocaleString(),"원"]})]})]}),e.jsx(u,{open:s,onClose:()=>a(!1),actions:l})]})},z=()=>{const t=h("accessToken"),[s,a]=i.useState({totalAmount:0,pointDetails:[]}),[l,x]=i.useState(!1),m=async()=>{var r;const n="/api/business/my-page/used-point";x(!0);try{const c=(await d.get(n,{headers:{Authorization:`Bearer ${t}`}})).data;return console.log("포인트 조회",c),a(c.data),c}catch(o){return d.isAxiosError(o)&&console.log("포인트 조회 오류",(r=o.response)==null?void 0:r.data),null}finally{x(!1)}};return i.useEffect(()=>{m()},[]),e.jsxs("div",{children:[e.jsxs("section",{className:"flex flex-col gap-2 px-4 py-5 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 ",children:[e.jsx("h3",{className:"text-2xl font-semibold text-slate-700",children:"사용된 포인트"}),e.jsx(y,{placement:"left",content:"결제된 포인트의 합계입니다. (환불된 포인트는 집계되지 않습니다)",trigger:"hover",children:e.jsx("span",{children:e.jsx(j,{className:"text-lg text-slate-300 cursor-help"})})})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-4xl text-primary",children:[(s==null?void 0:s.totalAmount.toLocaleString())??"0","원"]})}),e.jsx("div",{children:e.jsxs("p",{className:"bg-slate-100 rounded-lg p-5 text-sm text-slate-500",children:["포인트 결제가 잘못되었을 경우, 포인트 결제일부터"," ",e.jsx("span",{className:"text-primary",children:"1일 이내"})," 환불, 변경 가능합니다."]})})]}),e.jsx("section",{className:"px-4",children:e.jsx(v,{spinning:l,children:e.jsxs("ul",{className:"py-5",children:[!l&&(s==null?void 0:s.pointDetails.length)>0&&(s==null?void 0:s.pointDetails.map((n,r)=>e.jsx(S,{item:n},r))),!l&&((s==null?void 0:s.pointDetails.length)===0||!(s!=null&&s.pointDetails))&&e.jsx(b,{icon:e.jsx(f,{}),content:"포인트 결제 내역이 없습니다"})]})})})]})};export{z as default};
