import{r as d,j as e,k as D,a2 as E,S as _,f as $,C as P,ag as L,p as V,g as z,i as B,l as I}from"./index-C92yST0r.js";import{g as F}from"./index-CW0yvKRq.js";import{k as O,T}from"./koreaAreaCode-phZPg0xk.js";import{e as q,f as K,d as Y}from"./match-s7azGNcg.js";import{d as j}from"./dayjs.min-B-COSpK3.js";import{S as C}from"./index-aLs1U1KR.js";import{S as R}from"./index-D0x00QdK.js";import{P as Q}from"./index-DtI9acc4.js";import{c as G}from"./customParseFormat-CE-Jtp9c.js";import"./PurePanel-B-qTJSNP.js";import"./index-D1BkM8cw.js";import"./index-DjAo3hfb.js";import"./Portal-B9r0QGkI.js";import"./useId-DKane42G.js";import"./Overflow-BtLOdqkK.js";import"./useIcons-BRp1AXk3.js";import"./CheckOutlined-CRzxT-8S.js";import"./index-CEbxTe3l.js";import"./zoom-D5iPER1a.js";import"./useLocale-BpEBv4Dv.js";import"./index-3R4ZIZa1.js";import"./index-CooIYJh0.js";const J=({title:o,content:s,type:r})=>{const[a,n]=d.useState(!1),[u]=d.useState(!1),[m,l]=d.useState(null);d.useEffect(()=>{console.log("value",m)},[m]);const[h,b]=d.useState(""),[f,k]=d.useState([]),v=t=>{f.includes(t)?k(i=>i.filter(y=>y!==t)):k(i=>[...i,t])},A=()=>{n(!a)},S=[{value:0,label:"영업중"},{value:1,label:"휴업"},{value:2,label:"폐업"}],N=e.jsx(C,{defaultValue:h,children:O.map(t=>e.jsx(C.Option,{value:t.code,children:t.code},t.code))}),H=t=>{const y=t.replace(/[^\d]/g,"").slice(0,7);return y.length>3?`${y.slice(0,3)}-${y.slice(3)}`:y},g=t=>typeof t=="string"||typeof t=="number"||typeof t=="boolean"||t===null||t===void 0||_.isValidElement(t),x=t=>Array.isArray(t)&&t.every(i=>typeof i=="object"&&r==="amenity"&&"amenityTitle"in i),c=t=>Array.isArray(t)&&t.every(i=>typeof i=="string"),w={frequency:[{label:"없음",value:""},{label:"매주",value:"weekly"},{label:"격주",value:"biweekly"}],day:[{label:"월",value:"mon"},{label:"화",value:"tue"},{label:"수",value:"wed"},{label:"목",value:"thu"},{label:"금",value:"fri"},{label:"토",value:"sat"},{label:"일",value:"sun"}]};return d.useEffect(()=>{if(r==="tell"&&typeof s=="string"){const t=s?s.split("-"):["000","0000","0000"];b(t[0]),l(`${t[1]}-${t[2]}`)}r==="detail"&&typeof s=="string"&&l(s)},[s,r]),e.jsxs("section",{className:"px-7 pt-4 pb-5 flex flex-col gap-2 border-b-2 border-slate-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:o}),e.jsxs("button",{type:"button",className:"flex items-center gap-1 text-primary font-semibold hover:text-primary2 transition-all duration-300",onClick:A,children:[!a&&e.jsxs(e.Fragment,{children:[e.jsx(F,{}),"변경"]}),a&&e.jsx(e.Fragment,{children:"완료"})]})]}),e.jsxs(R,{spinning:u,children:[!a&&e.jsxs("div",{className:"text-lg font-medium text-slate-500 px-2 py-1",children:[g(s)&&e.jsx("div",{children:s}),x(s)&&e.jsx("ul",{children:s.map(t=>e.jsxs("li",{children:[t.icon," ",t.amenityTitle]},t.amenityId))}),c(s)&&e.jsxs(e.Fragment,{children:[r==="busiHour"&&`${s[0]}~${s[1]}`,r==="checkTime"&&`${s[0]}~${s[1]}`,r==="restDate"&&s.map((t,i)=>i!==s.length?e.jsx("p",{children:t},i):e.jsxs("p",{children:[t,","]},i))]})]}),a&&r==="state"&&e.jsx(C,{defaultValue:s,options:S,size:"large",className:"w-1/3 ",onChange:t=>l(t)}),a&&r==="tell"&&e.jsx(D,{addonBefore:N,size:"large",defaultValue:m,placeholder:"전화번호를 입력해주세요.",onChange:t=>l(t.target.value),value:H(m??"0")}),a&&r==="detail"&&e.jsx(E,{placeholder:"업체 소개를 작성해주세요",maxLength:50,onChange:t=>{l(t.target.value)},style:{resize:"none",height:"27.73vw",padding:"20px"},value:m}),a&&r==="amenity"&&e.jsx("div",{className:"flex flex-wrap gap-2",children:q.map((t,i)=>e.jsxs("button",{type:"button",className:`flex text-base items-center gap-2
                          border rounded-2xl w-fit px-2 py-1
                          ${f.includes(t.amenity_id)?"border-primary text-primary":"border-slate-300 text-slate-500"}`,onClick:()=>v(t.amenity_id),children:[t.icon,t.key]},i))}),a&&r==="busiHour"&&e.jsx("div",{children:e.jsx(T.RangePicker,{defaultValue:c(s)?[j(s[0]),j(s[1])]:void 0,format:"HH:mm"})}),a&&r==="checkTime"&&e.jsx("div",{children:e.jsx(T.RangePicker,{defaultValue:c(s)?[j(s[0],"HH:mm"),j(s[1],"HH:mm")]:void 0,format:"HH:mm",onChange:t=>l(t)})}),a&&r==="restDate"&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx(C,{options:w.frequency,placeholder:"휴무 주기",onChange:t=>{l({...t,frequency:t})},size:"large"}),e.jsx(C,{options:w.day,placeholder:"요일 선택",size:"large",mode:"multiple",allowClear:!0,className:"w-full",onChange:t=>{l({...t,day:t})}})]})]})]})},p=d.memo(J),M=({strfData:o})=>{const[s]=$(),r=s.get("category");console.log(o);const{state:a=0,tell:n="",detail:u="",amenity:m=[]}=o??{},l=h=>{switch(h){case 0:return"영업중";case 1:return"휴업";case 2:return"폐업";default:return"알 수 없음"}};return e.jsxs(e.Fragment,{children:[e.jsx(p,{title:"업체 상태",content:l(a),type:"state"}),e.jsx(p,{title:"업체 전화번호",content:n,type:"tell"}),e.jsx(p,{title:"업체 소개",content:u,type:"detail"}),r===P.STAY&&e.jsx(p,{title:e.jsxs("span",{className:"flex items-center gap-2",children:["업체 편의 정보"," ",e.jsx(Q,{trigger:"hover",placement:"right",content:"* 검색 시 사용되는 정보입니다.",children:e.jsx("button",{type:"button",children:e.jsx(L,{className:"text-lg text-slate-300 cursor-help"})})})]}),content:m,type:"amenity"})]})};j.extend(G);const U=({strfData:o})=>{console.log(o);const{startAt:s,endAt:r,closeCheck:a,openCheck:n,restDate:u}=o;if(!o||!s||!r||!a||!n||!u)return e.jsx("div",{children:"데이터가 없거나 불완전합니다"});const m=[s,r],l=[j(n,"HH:mm:ss").format("HH:mm"),j(a,"HH:mm:ss").format("HH:mm")],h=u.map(b=>K(b));return e.jsxs(e.Fragment,{children:[e.jsx(p,{title:"영업 시간",content:m,type:"busiHour"}),e.jsx(p,{title:"입실/퇴실 시간",content:l,type:"checkTime"}),e.jsx(p,{title:"휴무일",content:h,type:"restDate"}),e.jsx(p,{title:"임시 휴무일 등록",content:l,type:"tempRest"})]})},W=({list:o,current:s,changeCateIndex:r})=>e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("section",{children:e.jsx("ul",{className:"flex items-center w-full",children:o.map((a,n)=>e.jsxs("li",{className:`w-full flex items-center justify-center gap-2 text-lg font-semibold py-2 cursor-pointer
          ${s===n?"text-primary border-b-4 border-primary":"text-slate-400 border-b-2 border-slate-200"}
          transition-all duration-300`,onClick:()=>{r(n)},children:[a.icon,a.label]},n))})}),e.jsx("section",{children:o[s].children})]}),X=V({key:"strfAtom",default:{strfId:"",category:"",strfTitle:"",latit:0,longitude:0,address:"",post:"",tell:"",startAt:"",endAt:"",openCheck:"",closeCheck:"",detail:"",busiNum:"",locationName:"",state:0,cid:0,hostProfilePic:"",hostName:"",inquiredAt:"",wishCnt:0,ratingAvg:0,reviewCnt:"",wishIn:0,recentCheck:0,recentCheckStatus:0,strfPics:[{strfId:"",strfPic:""}],restDate:[],amenity:[]}}),Ce=()=>{const o=z("accessToken"),[s]=$(),r=s.get("strfId"),a=s.get("category"),n=Number(s.get("tab")),[u,m]=B(X),[l,h]=d.useState(n),[b,f]=d.useState(!1),[k,v]=d.useState([]),A=async()=>{const g="/api/detail/member";f(!0);try{const x=await I.get(`${g}?strf_id=${r}`,{headers:{Authorization:`Bearer ${o}`}});console.log(x.data);const c=x.data;return c&&(m({...u,...c.data}),f(!1)),c}catch(x){return f(!1),console.log("상품조회",x),null}},S=async()=>{const g="/api/detail/parlor";f(!0);try{const c=(await I.get(`${g}?strf_id=${r}&category=${Y(a)}`)).data;return c&&(f(!1),v(c.data)),console.log("객실 조회",c),c}catch(x){return console.log("객실 조회",x),null}},N=[{label:e.jsx("p",{children:"기본 정보"}),children:e.jsx(M,{strfData:u})},{label:e.jsx("p",{children:"운영 정보"}),children:e.jsx(U,{strfData:u})}],H=g=>{h(g)};return d.useEffect(()=>{A(),a===P.STAY&&S()},[]),e.jsx("div",{children:e.jsx(R,{spinning:b,children:e.jsx(W,{list:N,changeCateIndex:H,current:l})})})};export{Ce as default};
