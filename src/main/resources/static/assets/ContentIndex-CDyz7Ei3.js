import{j as e,b as le,r,bn as ae,af as z,u as P,bQ as W,B as T,d as E,H as V,a5 as re,m as A,aD as ie,M as oe,c as D,g as ce,J as Y,U as ne,b9 as de,ac as xe,ad as _,aQ as me,Q as pe,a7 as ee,Z as se,N as ue,ay as he}from"./index-DH-Wz4Mj.js";import{j as C}from"./jwt-DnEXN_lJ.js";import{p as te,F as B,q as fe,c as ge,h as je,r as be}from"./match-BxFHeRf5.js";import{b as we}from"./index-CQz5_Up4.js";/* empty css                    */import{D as ye}from"./index-KkjKTr2k.js";import{L as Ne}from"./index-BynuhZRZ.js";import{D as ve}from"./DynamicGrid-C-XS4jYf.js";import{R as ke}from"./index-DF0SKG1Y.js";import{m as R}from"./proxy-AvwZpyC7.js";import{t as L}from"./tripAtom-x0TtsSei.js";import{a as N,K as Se,b as $,u as Ie,M as Ce}from"./MarkerClusterer-DGVyVJNi.js";import{a as Me}from"./index-DOBopH_7.js";import{S as $e,a as Te}from"./swiper-react-DCHLNyw6.js";import{P as Pe}from"./index-B-C57IxQ.js";import{T as Re}from"./index-CXbh0qzA.js";import"./index-BuUvWuki.js";import"./index-CGzPRLSl.js";import"./index-C50gSxXV.js";import"./index-Zf4BwBOc.js";import"./customParseFormat-CgFv_ry4.js";import"./PurePanel-DCYXHnde.js";import"./index-Bl6CWuDB.js";import"./Portal-65BEOyHw.js";import"./useId-3Ovjxdih.js";import"./isMobile-DjGTsQxe.js";import"./Overflow-ChjsdAKz.js";import"./useIcons-BW0Wl4x_.js";import"./CheckOutlined-BQ9MdAo4.js";import"./DownOutlined-DgxMXBCT.js";import"./roundedArrow-C05pmbq5.js";import"./useLocale-DoMzA6HJ.js";import"./index-Dvz-Q9PH.js";import"./index-C3h-G8YL.js";import"./index-DhdEoO5n.js";import"./fade-BkDnt_Sp.js";import"./zoom-U1mf4JTG.js";import"./addEventListener-BBQjqPbJ.js";import"./motion-DegXBH0O.js";import"./RightOutlined-D2ucT0M2.js";import"./index-BN-dWTgu.js";import"./EllipsisOutlined-DQS3oH3F.js";const Le=({handleCancel:i,amenities:s})=>(console.log(s),e.jsxs("div",{className:"fixed top-0 left-1/2  -translate-x-1/2 z-[999] bg-white w-full max-w-[768px] h-screen",children:[e.jsx("div",{className:"",children:e.jsx(le,{icon:"close",title:"편의시설 및 서비스",onClick:i})}),e.jsx("ul",{className:"flex flex-wrap mt-6 px-4 gap-5",children:s.map(a=>e.jsxs("li",{className:"min-w-14 flex flex-col items-center justify-center gap-[6px] text-slate-700",children:[e.jsx("i",{className:"text-2xl ",children:te(a.amenityId??0)}),e.jsx("p",{children:a.amenityTitle})]},a.amenityId))})]})),Ee=({strfId:i})=>{const[s,a]=r.useState(),[c,u]=r.useState(!1),d=async()=>{try{const t=await C.get(`/api/detail/amenity?strf_id=${i}&category=숙소`);a(t.data.data),console.log("편의시설 조회",t.data.data)}catch(t){console.log("편의시설 조회",t)}};return r.useEffect(()=>{d()},[]),e.jsxs("div",{className:"px-4 my-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-slate-700 text-xl",children:"편의시설 및 서비스"}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-[6px] text-sm text-slate-400",children:["더보기 ",e.jsx(ae,{className:"text-xl"})]})]}),e.jsx("ul",{className:"grid grid-flow-col gap-4 overflow-hidden w-full h-[90px] mt-3",children:s==null?void 0:s.map(t=>e.jsxs("li",{className:"min-w-14 flex flex-col items-center justify-center gap-[6px] text-slate-700",children:[e.jsx("i",{className:"text-2xl ",children:te(t.amenityId??0)}),e.jsx("p",{children:t.amenityTitle})]},t.amenityId))}),c?e.jsx(Le,{handleCancel:()=>u(!c),amenities:s}):null]})},Ae=({strfId:i,menuData:s})=>e.jsxs("div",{className:"px-4 my-6",children:[e.jsx("h3",{className:"font-semibold text-slate-700 text-xl",children:"대표메뉴"}),e.jsx("ul",{className:"grid grid-cols-2 gap-3 mt-5",children:s.map(a=>e.jsxs("li",{children:[e.jsx("div",{className:"w-full aspect-square rounded-2xl overflow-hidden",children:e.jsx("img",{src:`${z}/${i}/menu/${a==null?void 0:a.menuPic}`,alt:a==null?void 0:a.menuTitle,className:"w-full h-full object-cover "})}),e.jsxs("div",{className:"mt-2 text-slate-700",children:[e.jsx("p",{className:"text-lg",children:a.menuTitle}),e.jsxs("p",{className:"text-base font-semibold tracking-tight",children:[a.menuPrice.toLocaleString(),"원"]})]})]},a.menuId))})]}),ze=({strfId:i,menuData:s})=>e.jsxs("div",{className:"px-4 my-6",children:[e.jsx("h3",{className:"font-semibold text-slate-700 text-xl",children:"입장권"}),e.jsx("ul",{children:s.map(a=>e.jsxs("li",{className:"flex items-center justify-between gap-4 py-4 border-b border-slate-200 last:border-b-0",children:[e.jsxs("div",{className:"text-slate-700",children:[e.jsx("h3",{className:"text-lg",children:a.menuTitle}),e.jsxs("p",{className:"text-base font-semibold",children:[a.menuPrice.toLocaleString(),"원"]})]}),e.jsx("div",{className:"w-24 aspect-square overflow-hidden rounded-2xl",children:e.jsx("img",{src:`${z}/${i}/menu/${a==null?void 0:a.menuPic}`,alt:a==null?void 0:a.menuTitle,className:"w-full h-full object-cover "})})]},a.menuId))})]}),{RangePicker:Ye}=ye,_e=({strfId:i,menuData:s,contentData:a})=>{const c=P(),[u,d]=r.useState([]),[t,f]=r.useState([]),[h,o]=r.useState(null),[n]=r.useState(1),[,b]=r.useState(null),v=async(l,p)=>{var w;try{const x=await C.get(`/api/detail/check?strfId=${i}&checkIn=${l}&checkOut=${p}`);(w=x.data)!=null&&w.data&&d(x.data.data),console.log("예약 가능 여부:",x.data)}catch(x){console.log("예약 조회 에러:",x),d([])}},g=async()=>{var l;try{const p=await C.get(`/api/detail/parlor?strf_id=${i}&category=숙소`);(l=p.data)!=null&&l.data&&f(p.data.data),console.log("예약 가능 여부:",p.data)}catch(p){console.log("예약 조회 에러:",p),d([])}};r.useEffect(()=>{g()},[]);const j=l=>{if(l){const[p,w]=l,x=E(p).format("YYYY-MM-DD"),M=E(w).format("YYYY-MM-DD");console.log("선택된 날짜 범위:",{start:x,end:M}),o([x,M]),v(x,M)}else console.log("날짜 선택이 취소됨"),o(null)},S=l=>{if(!h){V.error("날짜를 선택해주세요");return}b(l),c(`/booking/index?strfId=${i}`,{state:{quantity:n,dates:h,item:l,contentData:a,isRoom:t}})},I=l=>{if(!h)return!1;if(u&&u.length>0){const p=u.find(w=>w.menuId===l);return(p==null?void 0:p.check)||!1}return!1},m=l=>I(l)?"예약불가":"예약하기",y=l=>{if(!h){V.warning("날짜를 선택해주세요");return}S(l)},k=l=>!!l&&l.isBefore(E().startOf("day"));return e.jsxs("div",{className:"mt-3 ",children:[e.jsx("div",{className:"px-4",children:e.jsx(Ye,{className:"custom-lodgment-picker w-full border-slate-300 rounded-lg py-3 text-slate-700 mb-3",onChange:j,disabledDate:k,format:"YYYY-MM-DD"})}),e.jsx("ul",{children:s==null?void 0:s.map(l=>e.jsxs("li",{className:"py-5 px-4 border-b-[10px] border-slate-100 last:border-b-0",children:[e.jsx("i",{children:e.jsx("img",{src:`${z}/${i}/menu/${l==null?void 0:l.menuPic}`,alt:l==null?void 0:l.menuTitle,className:"w-full aspect-[2/1] object-cover rounded-lg"})}),e.jsxs("div",{className:"my-3",children:[e.jsx("h2",{className:"text-2xl text-slate-700 font-semibold",children:l==null?void 0:l.menuTitle}),e.jsxs("p",{className:"flex items-center gap-[6px] text-slate-500 text-sm my-1",children:[e.jsx(W,{className:"text-base"}),"입실 ",l.openCheckIn.replace(/:\d{2}$/,"")," - 퇴실",l.closeCheckIn.replace(/:\d{2}$/,"")]}),e.jsxs("p",{className:"flex items-center gap-[6px] text-slate-500 text-sm ",children:[e.jsx(we,{className:"text-base"}),"기준 ",l.recomCapacity,"인 / 최대 ",l.maxCapacity,"인"]}),e.jsxs("div",{className:"w-full border-t border-slate-100 mt-3 pt-3 flex justify-between items-center",children:[e.jsxs("span",{className:"text-xl text-slate-700 font-semibold",children:[l.menuPrice.toLocaleString(),"원"]}),e.jsx(T,{type:"primary",className:"text-base py-2 px-4 h-auto rounded-lg",onClick:()=>y(l),disabled:I(l.menuId),children:m(l.menuId)})]})]})]},l.menuId))})]})},Be=({strfId:i,contentData:s})=>{console.log("contentData",s);const[a,c]=r.useState([]),[u,d]=r.useState(),[t,f]=r.useState(0),[h,o]=r.useState(null),[n,b]=r.useState({}),v=r.useRef({}),[g,j]=r.useState(0);console.log(u),console.log("리뷰 목록:",a),console.log("reviewIndex:",t);const S=r.useCallback(async()=>{console.log("지금 보내는 start_idx",t);try{const m=await C.get(`/api/review?strf_id=${i}&start_idx=${t}`);console.log("리뷰 불러오기:",m.data),c([...a,...m.data.dtoList]),d(m.data.more)}catch(m){console.log("리뷰 불러오기:",m)}},[t,a,i]),I=async()=>{try{const m=await A.get(`/api/detail/count?strf_id=${i}`);j(m.data.data),console.log("리뷰 수:",m)}catch(m){console.error("리뷰 수 불러오기 실패:",m)}};return r.useEffect(()=>{S()},[t]),r.useEffect(()=>{I()},[i]),r.useEffect(()=>{const m={};a.forEach((y,k)=>{const l=v.current[k];if(l){const p=parseInt(window.getComputedStyle(l).lineHeight),w=l.scrollHeight;m[k]=w>p*3}}),b(m)},[a]),e.jsxs("div",{children:[e.jsxs("p",{className:"text-base text-slate-700 px-4",children:[e.jsx("span",{className:"font-semibold text-primary",children:g}),"개의 리뷰"]}),a?e.jsx("ul",{children:a==null?void 0:a.map((m,y)=>{const k=n[y];return e.jsxs("li",{className:"flex flex-col gap-3 py-8 border-b border-slate-200 px-4 last:border-none",children:[e.jsxs("div",{className:"flex flex-col gap-[6px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:e.jsx("img",{src:`${re}/${m.writerUserId}/${m.writerUserPic}`,alt:"pofilePic",className:"w-full h-full object-cover"})}),e.jsx("p",{className:"font-semibold text-slate-700 text-base",children:m.writerUserName})]}),e.jsxs("div",{className:"flex gap-[6px] items-center",children:[e.jsx(Ne,{className:"text-base text-slate-300"}),e.jsx("p",{className:"font-semibold text-sm text-slate-500",children:m.userWriteReviewCnt})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-[6px]",children:[e.jsx(ke,{disabled:!0,count:5,value:m.rating,className:"custom-review-rate"}),e.jsx("p",{className:"font-semibold text-sm text-slate-700",children:m.rating})]}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-slate-500",children:m.reviewWriteDate.split(" ")[0].replace(/-/g,".")})})]})]}),e.jsxs("div",{children:[e.jsx("p",{ref:l=>v.current[y]=l,className:`text-sm tracking-tight ${h===y?"":"line-clamp-3"}`,children:m.content}),k&&h!==y&&e.jsx("button",{type:"button",className:"text-primary text-sm font-semibold mt-[6px]",onClick:()=>o(y),children:"더보기"})]}),m.reviewPic&&m.reviewPic.length>0&&e.jsx(ve,{reviewPics:m,type:"review"})]},y)})}):e.jsx("ul",{children:e.jsx("li",{className:"flex flex-col gap-[20px] py-[30px] border-b border-slate-200"})}),u===!0&&e.jsx("button",{type:"button",className:"w-full py-[20px] rounded-lg border border-slate-300",onClick:()=>f(m=>m+10),children:"리뷰 더보기"})]})},Fe=r.memo(Be),He=({open:i,onClose:s})=>{const[a,c]=r.useState([]),u=P();console.log(i);const d=async()=>{try{const t=await C.get("/api/trip-list");c(t.data.data.beforeTripList)}catch(t){console.log("여행 목록 불러오기:",t)}};return r.useEffect(()=>{d()},[]),e.jsx("div",{children:e.jsx(R.div,{tabIndex:-1,className:"max-w-[768px] w-full left-1/2 -translate-x-1/2 fixed inset-0 bg-black/50 flex justify-center items-end z-50 overflow-hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>s(),children:e.jsxs(R.div,{className:" bg-white w-full rounded-t-3xl py-5 shadow-lg",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},drag:"y",dragConstraints:{top:0,bottom:100},dragElastic:.2,onDragEnd:(t,f)=>{f.offset.y>100&&s()},onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"w-12 h-1 bg-slate-400 rounded-full mx-auto mb-4"}),e.jsxs("div",{onClick:()=>u("/search/location"),className:"w-auto h-auto p-5 bg-slate-50 rounded-lg flex items-center gap-5 mx-3 cursor-pointer mb-4",children:[e.jsx("i",{className:"inline-block p-[10px] bg-primary rounded-full",children:e.jsx(ie,{className:"text-white"})}),e.jsx("div",{children:e.jsx("p",{className:"text-lg text-slate-700 font-semibold",children:"여행 일정 만들기"})})]}),e.jsx("div",{className:"px-3",children:a.map(t=>e.jsxs("div",{className:"flex items-center gap-3 w-full bg-slate-50 p-5 rounded-lg mb-3 cursor-pointer",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("img",{src:`${oe}/${t.locationPic}`,alt:t.title,className:"w-full h-full"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-base text-slate-700 font-semibold",children:t.title}),e.jsxs("p",{className:"text-sm text-slate-500 tracking-tight",children:[t.startAt.replace(/-/g,".")," -"," ",t.endAt.replace(/-/g,".")]})]})]}))})]})})})},Oe=({open:i,onClose:s})=>{console.log(i);const a=P(),[c]=D(),u=c.get("strfId"),d=ce("accessToken"),[t]=Y(L),f=ne(L);console.log("trip",t);const[h,o]=r.useState([]),[n,b]=r.useState(""),[v,g]=r.useState(null),[j,S]=r.useState(),I=async()=>{try{const p=(await A.get(`/api/transport/get?startLngSX=${t.prevSchelng}&startLatSY=${t.prevSchelat}&endLngEX=${t.nowLng}&endLatEY=${t.nowLat}`,{headers:{Authorization:`Bearer ${d}`}})).data;return o(p.data),b(p.code),p}catch(l){return console.log("길찾기 결과",l),null}},m=async()=>{const l="/api/schedule",p={seq:t.lastSeq+1,day:t.day,time:j==null?void 0:j.totalTime,distance:j==null?void 0:j.totalDistance,strf_id:u,trip_id:t.nowTripId,path_type:j==null?void 0:j.pathType};try{(await A.post(l,p,{headers:{Authorization:`Bearer ${d}`}})).data&&(f(),a(`/schedule/index?tripId=${t.nowTripId}`))}catch(w){console.log("일정 등록",w)}},y=l=>{const p=Math.floor(l/60),w=l%60;return`${p}시간 ${w.toString().padStart(2,"0")}분`},k=()=>{m()};return r.useEffect(()=>{I()},[]),e.jsx(R.div,{tabIndex:-1,className:"max-w-[768px] w-full left-1/2 -translate-x-1/2 fixed inset-0 bg-black/50 flex justify-center items-end z-[9999] overflow-hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>s(),children:e.jsx(R.div,{className:" bg-white w-full rounded-t-3xl py-5 shadow-lg",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},drag:"y",dragConstraints:{top:0,bottom:100},dragElastic:.2,onDragEnd:(l,p)=>{p.offset.y>100&&s()},onClick:l=>l.stopPropagation(),children:e.jsxs("div",{className:"px-8",children:[e.jsx("h2",{className:"text-2xl text-slate-700 font-bold px-1 pt-8 pb-6",children:"빠른 길 찾기"}),e.jsx("section",{children:e.jsxs("ul",{className:`flex flex-col w-full \r
                      px-6 py-3 gap-3\r
                      border border-slate-300 rounded-2xl`,children:[e.jsxs("li",{className:"flex gap-3 items-center py-3",children:[e.jsx(de,{className:"text-slate-300 text-xl"}),e.jsx("span",{className:"text-slate-700",children:t==null?void 0:t.nowName})]}),e.jsx("li",{className:"w-full h-[1px] bg-slate-100"}),e.jsxs("li",{className:"flex gap-3 items-center py-3",children:[e.jsx(B,{className:"text-primary text-xl"}),e.jsx("span",{className:"text-slate-700",children:t.prevScheName})]})]})}),e.jsxs("section",{children:[n==="400 거리가 너무 가깝거나 잘못된 값입니다."&&e.jsx("div",{className:`flex gap-5 items-center 
                          py-3
                          text-slate-700
                            rounded-lg`,children:n}),n==="200 성공"&&e.jsx("ul",{className:`flex flex-col  py-5 gap-7\r
              max-h-[30vh] overflow-y-auto`,children:h==null?void 0:h.map((l,p)=>e.jsxs("li",{className:`flex gap-5 items-center 
                          px-5 py-3
                          hover:bg-slate-50 cursor-pointer
                            rounded-lg
                            ${p===v?"bg-slate-100":"bg-white"}
                            `,onClick:()=>{g(p),console.log(l),S(l)},children:[e.jsx("div",{className:"text-2xl text-slate-400",children:fe(l.pathType)}),e.jsxs("ul",{className:"flex gap-3 items-center",children:[e.jsx("li",{className:"text-slate-700 text-2xl font-semibold",children:l.totalTime>60?y(l.totalTime):`${l.totalTime}분`}),e.jsxs("li",{className:"text-slate-700 text-base font-semibold",children:[l.payment.toLocaleString(),"원"]}),e.jsx("li",{className:"font-medium text-sm text-slate-400",children:l.totalDistance>1e3?`${(l.totalDistance/1e3).toFixed(2)}km`:`${l.totalDistance}m`})]})]},p))}),e.jsx("div",{className:"pb-5",children:e.jsx(T,{type:"primary",htmlType:"button",className:"text-2xl py-5 max-h-[50px] h-[16vw] w-full text-white font-semibold",onClick:k,children:"선택 완료"})})]})]})})})},Ue=({strfId:i,contentData:s})=>{const[,a]=r.useState({isRegistModalOpen:!1,openPathModal:!1,isReviewModalOpen:!1}),[c]=Y(L),[u,d]=r.useState(!1),[t,f]=r.useState(!1),h=P(),o=()=>{a(n=>({...n,isReviewModalOpen:!0})),h(`/contents/postreview?strfId=${i}`,{state:s})};return e.jsxs("div",{className:"sticky bottom-0 left-0 z-50 w-full px-4 py-5 flex gap-3 bg-white border-t-[1px] border-slate-100",children:[e.jsx(T,{onClick:()=>{d(!u),f(!t)},icon:e.jsx(B,{className:"!text-sm opacity-50 mb-[2px]"}),className:"flex items-center justify-center gap-[6px] border-slate-200 rounded-lg w-full h-auto py-[14px] text-lg text-slate-700 ",children:"일정 추가"}),e.jsx(T,{onClick:()=>{o()},icon:e.jsx(xe,{className:"text-sm opacity-50 mb-[2px]"}),className:"flex items-center justify-center gap-[6px]  border-slate-200 rounded-lg w-full  h-auto py-[14px] text-lg text-slate-700 ",children:"리뷰쓰기"}),u&&c.nowTripId===0&&e.jsx(He,{open:u,onClose:()=>d(!1)}),c.nowTripId!==0&&t&&e.jsx(Oe,{open:t,onClose:()=>f(!1)})]})},qe=_.forwardRef(function(s,a){let{map:c,position:u,marker:d,children:t,altitude:f,disableAutoPan:h,range:o,removable:n,zIndex:b,onCreate:v}=s;const g=r.useMemo(()=>{const S=document.createElement("div");return S.style.display="none",new kakao.maps.InfoWindow({altitude:f,disableAutoPan:h,range:o,removable:n,zIndex:b,content:S,position:u})},[h,n]),j=r.useMemo(()=>g.getContent(),[g]);return r.useImperativeHandle(a,()=>g,[g]),r.useLayoutEffect(()=>(g.open(c,d),()=>{g.close()}),[c,d]),r.useLayoutEffect(()=>{v&&v(g)},[g,v]),N(g,"setPosition",u),N(g,"setAltitude",f),N(g,"setRange",o),N(g,"setZIndex",b),me.createPortal(t,j.parentElement??j)}),Ke=_.forwardRef(function(s,a){let{map:c,position:u,children:d,altitude:t,clickable:f,draggable:h,image:o,infoWindowOptions:n,onCreate:b,onClick:v,onDragEnd:g,onDragStart:j,onMouseOut:S,onMouseOver:I,opacity:m,range:y,title:k,zIndex:l}=s;const p=r.useContext(Se),w=r.useMemo(()=>{var M,F,H,O,U,q,K,Q,Z,J,X,G;return o&&new kakao.maps.MarkerImage(o.src,new kakao.maps.Size(o.size.width,o.size.height),{alt:(M=o.options)==null?void 0:M.alt,coords:(F=o.options)==null?void 0:F.coords,offset:((H=o.options)==null?void 0:H.offset)&&new kakao.maps.Point((O=o.options)==null?void 0:O.offset.x,(U=o.options)==null?void 0:U.offset.y),shape:(q=o.options)==null?void 0:q.shape,spriteOrigin:((K=o.options)==null?void 0:K.spriteOrigin)&&new kakao.maps.Point((Q=o.options)==null?void 0:Q.spriteOrigin.x,(Z=o.options)==null?void 0:Z.spriteOrigin.y),spriteSize:((J=o.options)==null?void 0:J.spriteSize)&&new kakao.maps.Size((X=o.options)==null?void 0:X.spriteSize.width,(G=o.options)==null?void 0:G.spriteSize.height)})},[JSON.stringify(o)]),x=r.useMemo(()=>new kakao.maps.Marker({altitude:t,clickable:f,draggable:h,image:w,opacity:m,range:y,title:k,zIndex:l,position:u}),[]);return r.useImperativeHandle(a,()=>x,[x]),r.useLayoutEffect(()=>p?(p.addMarker(x,!0),()=>p.removeMarker(x,!0)):(x.setMap(c),()=>x.setMap(null)),[c,p,x]),r.useLayoutEffect(()=>{b&&b(x)},[x,b]),N(x,"setPosition",u),N(x,"setImage",w),N(x,"setAltitude",t),N(x,"setClickable",f),N(x,"setDraggable",h),N(x,"setOpacity",m),N(x,"setRange",y),N(x,"setRange",y),N(x,"setTitle",k),N(x,"setTitle",k),N(x,"setZIndex",l),$(x,"click",v),$(x,"dragstart",j),$(x,"dragend",g),$(x,"mouseout",S),$(x,"mouseover",I),d?e.jsx(qe,{position:u,map:c,marker:x,altitude:n==null?void 0:n.altitude,disableAutoPan:n==null?void 0:n.disableAutoPan,range:n==null?void 0:n.range,removable:n==null?void 0:n.removable,zIndex:n==null?void 0:n.zIndex,children:d}):null}),Qe=_.forwardRef(function(s,a){let{position:c,...u}=s;const d=Ie("MapMarker"),t=r.useMemo(()=>"lat"in c?new kakao.maps.LatLng(c.lat,c.lng):new kakao.maps.Coords(c.x,c.y).toLatLng(),[c.lat,c.lng,c.x,c.y]);return e.jsx(Ke,{map:d,position:t,...u,ref:a})}),Ze=({contentData:i})=>{const[s,a]=r.useState(!1),[c,u]=r.useState({lat:0,lng:0}),d={lat:(i==null?void 0:i.latit)||35.868358,lng:(i==null?void 0:i.longitude)||128.593778};return r.useEffect(()=>{const t=document.createElement("script");return t.async=!0,t.src="//dapi.kakao.com/v2/maps/sdk.js?appkey=1227efa5c91b2ace09ab915e643a15c9&autoload=false",t.addEventListener("load",()=>{window.kakao.maps.load(()=>{a(!0)})}),document.head.appendChild(t),()=>{document.head.removeChild(t)}},[]),s?e.jsx("div",{children:e.jsx(Ce,{center:d,style:{width:"100%",aspectRatio:"4 / 2",minHeight:"200px",borderRadius:"8px"},level:5,children:e.jsx(Qe,{position:d})})}):e.jsx("div",{children:"지도를 불러오는 중입니다..."})},Je=r.memo(Ze),Xe=({contentData:i})=>{const[s,a]=r.useState(!1),[c,u]=r.useState(!1),d=r.useRef(null);return r.useEffect(()=>{d.current&&u(d.current.scrollHeight>d.current.clientHeight)},[i==null?void 0:i.detail]),e.jsxs("div",{children:[e.jsxs("section",{className:"my-6 px-4",children:[e.jsx("h3",{className:"font-semibold text-slate-700 text-xl mb-4",children:"소개"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("p",{ref:d,className:`text-base text-slate-500 ${s?"":"line-clamp-5"}`,children:i==null?void 0:i.detail}),c&&!s&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white/100 to-white/0"})]}),c&&e.jsx(T,{onClick:()=>a(t=>!t),className:"w-full h-auto py-[14px] border border-slate-300 rounded-lg",children:s?"숨기기":"펼치기"})]}),e.jsx("section",{className:"w-full h-[10px] bg-slate-100"}),e.jsxs("section",{className:"my-6 px-4",children:[e.jsx("h3",{className:"font-semibold text-slate-700 text-xl mb-4",children:"위치"}),e.jsx(Je,{contentData:i}),e.jsx("div",{children:e.jsxs("dl",{className:"mt-4 px-4 py-6 bg-slate-50 rounded-lg",children:[e.jsx("dt",{className:"text-base text-slate-700 font-semibold float-left mr-3",children:"주소"}),e.jsxs("dd",{className:"text-base text-slate-500 mb-1",children:["(",i==null?void 0:i.post,") ",i==null?void 0:i.address]}),e.jsx("dt",{className:"text-base text-slate-700 font-semibold float-left mr-3",children:"전화"}),e.jsx("dd",{className:"text-base text-slate-500 mb-1",children:"062-610-7000"}),e.jsx("dt",{className:"text-base text-slate-700 font-semibold float-left mr-3",children:"사업자번호"}),e.jsx("dd",{className:"text-base text-slate-500",children:"410-86-60209"})]})})]})]})},Ge=({strfId:i,contentData:s})=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx($e,{loop:!0,className:"mySwiper",children:s==null?void 0:s.strfPics.map((a,c)=>e.jsx(Te,{className:"aspect-[1/2] max-h-[500px]",children:e.jsx("img",{src:`${pe}/${i}/${a==null?void 0:a.strfPics}`,alt:(s==null?void 0:s.strfTitle)||"",className:"w-full h-full object-cover"})},c))})}),e.jsxs("div",{className:"px-4 py-3 flex flex-col gap-2",children:[e.jsx("p",{className:"text-sm text-slate-500 -mb-[6px]",children:ge(s==null?void 0:s.category)}),e.jsx("h2",{className:"text-2xl text-slate-700 font-semibold",children:s==null?void 0:s.strfTitle}),e.jsxs("p",{className:"text-sm text-slate-500 flex items-center gap-[6px]",children:[e.jsx(B,{className:" text-slate-300"}),s==null?void 0:s.address]}),e.jsxs("ul",{className:"flex items-center gap-[6px]",children:[e.jsx("li",{children:e.jsx(Me,{className:"text-primary text-base"})}),e.jsx("li",{className:"text-sm text-slate-700 font-semibold",children:s==null?void 0:s.ratingAvg}),e.jsxs("li",{className:"text-sm text-primary underline",children:["리뷰 ",s==null?void 0:s.reviewCnt.toLocaleString(),"개"]}),e.jsx("li",{className:"text-slate-300 text-base mx-1",children:"|"}),e.jsx("li",{className:"text-lg text-slate-400",children:s!=null&&s.wishIn?e.jsx(ee,{className:"text-secondary3"}):e.jsx(se,{})}),e.jsx("li",{className:"text-slate-500 text-sm",children:s==null?void 0:s.wishCnt})]}),e.jsx("div",{children:e.jsxs("p",{className:"flex items-center gap-[6px] text-slate-500",children:[e.jsx(W,{className:"text-sm"}),s!=null&&s.restDate&&s.restDate.length>0?s.restDate.map(a=>` ${je(a)}요일 휴무 `):"매일",s==null?void 0:s.openCheck.replace(/:\d{2}$/,"")," ~",s==null?void 0:s.closeCheck.replace(/:\d{2}$/,"")]})})]})]}),Ve=({scrollEvent:i=!0,strfId:s,contentData:a,getDetailMember:c})=>{const[u,d]=r.useState(!1),t=P(),f=async()=>{const n={strfId:s};console.log("찜하기 데이터:",n);try{const b=await C.post("/api/wish-list",{...n});console.log("찜하기",b.data),b.data.code==="200 성공"&&c()}catch(b){console.log("찜하기",b)}};r.useEffect(()=>{if(!i){d(!1);return}const n=()=>{window.scrollY>0?d(!0):d(!1)};return window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}},[i]);const h=window.location.href,o=async()=>{try{await navigator.clipboard.writeText(h)}catch(n){console.error("복사 실패",n)}};return console.log("currentUri",h),e.jsx("div",{className:`max-w-[768px] w-full px-4  fixed top-0 left-1/2 -translate-x-1/2 z-10
        duration-300 ${i?u?"bg-white text-slate-700":"bg-transparent text-white":"bg-transparent"}`,children:e.jsxs("div",{className:"flex justify-between items-center h-[60px]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ue,{className:"text-3xl min-w-7 cursor-pointer",onClick:()=>t(-1)}),e.jsx("h2",{className:"font-semibold text-lg line-clamp-1",children:a==null?void 0:a.strfTitle})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[a!=null&&a.wishIn?e.jsx(ee,{className:`text-2xl cursor-pointer ${scrollY>0?"text-secondary3":"text-white"}`,onClick:f}):e.jsx(se,{className:`text-2xl cursor-pointer ${scrollY>0?"text-slate-700":"text-white"}`,onClick:f}),e.jsx(Pe,{className:"!rounded-2xl",content:e.jsxs("div",{className:"flex items-center justify-between gap-3 bg-slate-100 pl-3 pr-1 py-1 rounded-lg",children:[e.jsx("p",{className:"line-clamp-1 w-[189px]",children:h}),e.jsxs("button",{onClick:()=>o(),className:" flex items-center gap-1 bg-primary px-3 py-1 rounded-lg text-white",children:[e.jsx(be,{}),"복사"]})]}),trigger:"click",getPopupContainer:n=>n.parentElement||document.body,children:e.jsx(he,{className:" text-2xl cursor-pointer"})})]})]})})},Fs=()=>{const[,i]=Y(L),[s,a]=r.useState(null),[c,u]=r.useState([]),[d]=D(),t=Number(d.get("strfId"))||0,f=async()=>{try{const o=await C.get(`/api/detail/member?&strf_id=${t}`);o.data.data,console.log("상품조회-회원",o.data.data),a(o.data.data),i(n=>({...n,nowName:o.data.data.strfTitle,nowLat:o.data.data.latit,nowLng:o.data.data.longitude}))}catch(o){console.log("상품조회-회원",o)}},h=async()=>{try{const o=await C.get(`/api/detail/menu?strf_id=${t}`);u(o.data.data),console.log("상품조회-메뉴",o.data.data)}catch(o){console.log("상품조회-메뉴",o)}};return r.useEffect(()=>{h(),f()},[]),e.jsxs("div",{children:[s&&e.jsx(Ve,{strfId:t,contentData:s,getDetailMember:f}),e.jsx("section",{children:s&&e.jsx(Ge,{strfId:t,contentData:s})}),c&&e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"w-full h-[10px] bg-slate-100"}),e.jsxs("section",{children:[(s==null?void 0:s.category)==="STAY"&&e.jsx(_e,{strfId:t,menuData:c,contentData:s}),(s==null?void 0:s.category)==="RESTAUR"&&e.jsx(Ae,{strfId:t,menuData:c}),((s==null?void 0:s.category)==="TOUR"||(s==null?void 0:s.category)==="FEST")&&e.jsx(ze,{strfId:t,menuData:c})]}),e.jsx("section",{className:"w-full h-[10px] bg-slate-100"})]}),(s==null?void 0:s.category)==="STAY"&&e.jsxs(e.Fragment,{children:[e.jsx("section",{children:e.jsx(Ee,{strfId:t})}),e.jsx("section",{className:"w-full h-[10px] bg-slate-100"})]}),e.jsx("section",{children:e.jsx(Re,{defaultActiveKey:"1",centered:!0,className:"custom-strf-tabs",items:[{label:"상세정보",key:"1",children:e.jsx(e.Fragment,{children:s&&e.jsx(Xe,{strfId:t,contentData:s})})},{label:"리뷰",key:"2",children:e.jsx(e.Fragment,{children:s&&e.jsx(Fe,{strfId:t,contentData:s})})}]})}),s&&e.jsx(Ue,{strfId:t,contentData:s})]})};export{Fs as default};
