import{g as B,R as F,r as s,h as V,u as P,a as H,j as e,f as O,F as U,L as z,B as K,b as N}from"./index-C6bOqW8w.js";import{t as v}from"./tripAtom-KNWMMY8l.js";import"./SearchItems-Dv_-5khd.js";import{a as W}from"./pic-BhDB7TmH.js";import{a as Y,b as S}from"./index-dauweciz.js";import{I as q}from"./index-CHrNiM1z.js";import{R as w}from"./index-CeB-_bz0.js";import"./TitleHeader-1NAGEuNC.js";import"./searchAtom-u68Vfiv8.js";import"./match-CXPFdkLO.js";import"./Skeleton-D1Az-Nz8.js";import"./index-Bdhbbfqu.js";import"./index-BpHAwgWG.js";import"./Portal-B5J00w0m.js";import"./useId-CKoVMJQW.js";import"./zoom-CUKaUUev.js";const n=[{type:null,name:"전체"},{type:"TOUR",name:"관광지"},{type:"STAY",name:"숙소"},{type:"RESTAUR",name:"맛집"},{type:"FEST",name:"축제"}],pe=()=>{B("accessToken");const[o,G]=F(v);s.useEffect(()=>{console.log("trip",o)},[o]),V(v);const[y]=P(),p=parseInt(y.get("tripId"));s.useEffect(()=>{u(!0)},[]);const d=H(),b=t=>{console.log(t),d(`/contents/index?strfId=${t}`)},[I,C]=s.useState(0),[$,E]=s.useState(0);s.useState(0);const[l,m]=s.useState([]),[J,u]=s.useState(!1),[f,R]=s.useState(""),[r,L]=s.useState(""),[g,_]=s.useState(0),[i,A]=s.useState(null),[T,h]=s.useState(!1);s.useState(!0),s.useEffect(()=>{console.log("searchValue",r)},[r]),s.useEffect(()=>{},[g]);const j=async()=>{try{const a=(await N.get(`/api/search/strf-list-basic?trip_id=${p}&last_index=${I}`)).data;m([...l,...a.data.list]),a&&(h(!0),C(x=>x+10))}catch(t){console.log("결과-입력 전:",t)}},c=async(t=null)=>{try{const x=(await N.get(`/api/search/strf-list-word?trip_id=${p}&last_index=${$}&category=${i}&search_word=${r}`)).data;m([...l,...x.data.list]),x&&(h(!0),E(k=>k+10))}catch(a){console.log("결과-입력 후:",a)}};return s.useEffect(()=>{j()},[]),s.useEffect(()=>{i!==null&&c()},[i]),l==null||l.list,e.jsxs("div",{className:"w-full flex flex-col gap-[30px]",children:[T?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full px-[32px] py-[30px] flex items-center gap-[40px] relative ",children:[e.jsx("div",{className:"text-[36px] cursor-pointer",onClick:()=>{d(-1)},children:e.jsx(q,{})}),e.jsx(O,{placeholder:"지금 어디로 여행을 떠나고 싶으신가요?",variant:"borderless",prefix:e.jsx(U,{className:"text-slate-400 text-2xl"}),allowClear:!0,onChange:t=>{R(t.target.value)},onKeyDown:t=>{t.code==="Enter"&&(L(t.target.value),u(!0),c())},value:f,className:`w-full h-[60px] px-[12px] ${f?"bg-white":"bg-slate-100"}`})]}),e.jsx("ul",{className:"flex gap-[10px] px-[32px] justify-between items-center",children:n.map((t,a)=>e.jsx("li",{className:`cursor-pointer font-semibold text-[16px] w-[124px] flex justify-center items-center px-[15px] py-[10px] gap-[10px] rounded-[8px] ${a===g?"bg-primary text-white":"bg-white text-slate-500"}`,onClick:()=>{_(a),c(n[a].type),A(n[a].name)},children:t.name},a))}),e.jsx("ul",{className:"px-[32px] py-[30px] flex flex-col gap-[30px]",children:(l==null?void 0:l.length)>0?l==null?void 0:l.map((t,a)=>e.jsxs("li",{className:"flex gap-[20px] items-center cursor-pointer",onClick:()=>{b(t.strfId)},children:[e.jsx("div",{className:"w-[130px] h-[130px] bg-slate-200 rounded-[8px] overflow-hidden",children:e.jsx("img",{src:`${W}${t.strfId}/${t.picTitle}`,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("div",{className:"flex gap-[5px] items-center ",children:e.jsx("h3",{className:"text-[20px] font-semibold text-slate-700",children:t.title})}),e.jsx("div",{className:"flex gap-[5px] items-center"}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx(w,{disabled:!0,count:1,value:t.ratingIn?1:0,style:{fontSize:"16px"}}),e.jsx("p",{className:"text-[12px] text-slate-500",children:t.averageRating}),e.jsxs("p",{className:"text-[12px] text-slate-500",children:["(",t.ratingCnt.toLocaleString(),")"]})]}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx("div",{children:t.wishIn?e.jsx(Y,{className:"text-secondary3 text-[16px]"}):e.jsx(S,{className:"text-slate-400 text-[16px]"})}),e.jsx("p",{className:"text-[12px] text-slate-500",children:t.wishCnt.toLocaleString()})]})]})]},a)):e.jsxs("li",{className:"flex gap-[20px] items-center cursor-pointer",children:[e.jsx("div",{className:"w-[130px] h-[130px] bg-slate-200 rounded-[8px]"}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("div",{className:"flex gap-[5px] items-center ",children:e.jsx("h3",{className:"text-[20px] font-semibold text-slate-700",children:"검색 결과가 없습니다."})}),e.jsx("div",{className:"flex gap-[5px] items-center"}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx(w,{disabled:!0,count:1,value:0}),e.jsx("p",{className:"text-[12px] text-slate-500"}),e.jsx("p",{className:"text-[12px] text-slate-500"})]}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx("div",{children:e.jsx(S,{className:"text-slate-400"})}),e.jsx("p",{className:"text-[12px] text-slate-500"})]})]})]})})]}):e.jsx(z,{}),e.jsx(K,{onClick:()=>{r!==""?c():j()},className:"mb-[30px]",children:"더보기"})]})};export{pe as default};
