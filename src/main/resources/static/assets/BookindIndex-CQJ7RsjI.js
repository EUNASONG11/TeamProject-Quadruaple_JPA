import{e as v,c as Y,u as C,r as p,j as e,bn as w,Q as I,d as g,ae as h,B as f,g as k,J as b,bo as B,m as u}from"./index-DH-Wz4Mj.js";import{c as M}from"./customParseFormat-CgFv_ry4.js";import{D as L}from"./index-KkjKTr2k.js";import{N as $}from"./NoData-BXCjAEK8.js";import{S}from"./index-C9J3gJiJ.js";import"./PurePanel-DCYXHnde.js";import"./index-Bl6CWuDB.js";import"./Portal-65BEOyHw.js";import"./useId-3Ovjxdih.js";import"./isMobile-DjGTsQxe.js";import"./Overflow-ChjsdAKz.js";import"./useIcons-BW0Wl4x_.js";import"./CheckOutlined-BQ9MdAo4.js";import"./DownOutlined-DgxMXBCT.js";import"./roundedArrow-C05pmbq5.js";import"./useLocale-DoMzA6HJ.js";import"./index-BynuhZRZ.js";const j=v({key:"bookingAtom",default:{date:[],bookingList:[]}});g.extend(M);const O=({item:s})=>{console.log("item",s);const[t]=Y(),r=t.get("strfId"),x=C(),o=()=>{x(`/business/booking/detail?strfId=${r}&bookingId=${s.bookingId}&state=${s.state}`)},[c,a]=p.useState(!1),[n,l]=p.useState(!1),d=i=>{switch(i){case"0":return"결제완료";case"1":return"예약확정";case"2":return"이용완료";case"3":return"취소완료"}},D=i=>{switch(i){case"0":return"bg-[rgba(255,253,204,0.6)] text-[#FFCC00]";case"1":return"bg-[rgba(165,238,254,0.3)] text-primary";case"2":return"bg-slate-100 text-slate-400";case"3":return"bg-[rgba(253,180,161,0.3)] text-secondary3"}},m=(i,N)=>N.diff(i,"day"),y=i=>{switch(i){case"0":case"1":return e.jsx(e.Fragment,{children:e.jsx(f,{type:"primary",className:"w-full h-auto py-3 rounded-lg text-base font-semibold ",onClick:()=>a(!0),children:"예약 승인"})});case"2":return e.jsx(e.Fragment,{});case"3":return e.jsx(e.Fragment,{})}};return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"px-4 py-3 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-start justify-between h-[10vw] max-h-[60px] border-b border-slate-200 ",children:[e.jsx("p",{children:"생성 날짜"}),e.jsxs("button",{type:"button",className:"flex gap-1 items-center text-primary",onClick:o,children:[e.jsx("p",{children:"상세보기"}),e.jsx("i",{children:e.jsx(w,{})})]})]}),e.jsxs("section",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:`w-fit flex items-center justify-center px-2 py-1 text-sm font-bold ${D(s.state)}`,children:e.jsx("p",{children:d(s.state)})}),e.jsx("div",{children:e.jsx("h2",{className:"text-xl font-bold text-slate-700",children:s.title})}),e.jsxs("div",{className:"flex items-start gap-5",children:[e.jsx("div",{className:"w-20 aspect-square rounded-2xl bg-slate-200 overflow-hidden",children:e.jsx("img",{src:`${I}/${r}/${s.picName}`,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-base text-slate-700",children:`${s.checkInDate} ~ ${s.checkOutDate}`}),e.jsxs("p",{className:"text-slate-500 text-sm",children:[m(g(s.checkInDate,"YYYY-MM-DD dd"),g(s.checkOutDate,"YYYY-MM-DD dd")),"박"," ",m(g(s.checkInDate,"YYYY-MM-DD dd"),g(s.checkOutDate,"YYYY-MM-DD dd"))+1,"일, 체크인 ",s.checkInTime,", 체크아웃 ",s.checkOutTime]}),e.jsxs("p",{className:"text-slate-500 text-sm",children:[s.totalPayment.toLocaleString(),"원"]})]})]})]}),e.jsx("div",{className:"flex items-center gap-3 w-full",children:y(s.state)})]})]}),c&&e.jsx(h,{title:"예약 승인",content:"해당 예약을 승인하시겠습니까?",handleClickSubmit:()=>{},handleClickCancle:()=>a(!1)}),n&&e.jsx(h,{title:"예약 취소",content:"해당 예약을 취소하시겠습니까?",handleClickSubmit:()=>{console.log("예약 취소")},handleClickCancle:()=>l(!1)})]})},F=()=>{const s=k("accessToken"),[t,r]=b(j);console.log("bookingData",t);const x=async()=>{var c;const o="/api/business/my-page/booking";try{const n=(await u.get(`${o}?startDate=${t.date[0]}&endDate=${t.date[1]}`,{headers:{Authorization:`Bearer ${s}`}})).data;return console.log("예약 목록 확인",n),n&&r({...t,bookingList:n}),n}catch(a){return u.isAxiosError(a)&&(((c=a.response)==null?void 0:c.status)===404?(console.log("404 정보 없음",a.response.data),r({...t,bookingList:[]})):console.log("예약 목록 확인",a)),null}};return e.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[e.jsxs("div",{className:"px-5 py-4 flex gap-3 border border-slate-200 rounded-lg items-center",children:[e.jsx("i",{className:"text-3xl text-slate-500",children:e.jsx(B,{})}),e.jsxs("div",{children:[e.jsx("p",{className:"px-3 text-sm text-slate-700",children:"날짜 직접 선택"}),e.jsx(L.RangePicker,{placeholder:["검색필터 시작일","검색필터 종료일"],variant:"borderless",suffixIcon:!1,onChange:o=>{console.log(o),o&&r({...t,date:o.map(c=>c?c.format("YYYY-MM-DD"):"")})}})]})]}),e.jsx(f,{type:"primary",className:"text-xl py-1 max-h-[50px] h-[16vw]",onClick:x,children:"검색하기"})]})},ee=()=>{const s=k("accessToken"),[t,r]=b(j),[x,o]=p.useState(!1),c=async()=>{var n;const a="/api/business/my-page/booking";o(!0);try{const d=(await u.get(a,{headers:{Authorization:`Bearer ${s}`}})).data;return console.log("예약 목록 확인",d),d&&(o(!1),r({...t,bookingList:d})),d}catch(l){return u.isAxiosError(l)&&(o(!1),((n=l.response)==null?void 0:n.status)===404?(console.log("404 정보 없음",l.response.data),r({...t,bookingList:[]})):console.log("예약 목록 확인",l)),null}};return p.useEffect(()=>{c()},[]),e.jsxs("div",{children:[e.jsx(F,{}),e.jsxs(S,{spinning:x,children:[t.bookingList.length===0&&e.jsx($,{content:"예약이 없습니다"}),t.bookingList.length>0&&t.bookingList.map((a,n)=>e.jsx(O,{item:a},n))]})]})};export{ee as default};
