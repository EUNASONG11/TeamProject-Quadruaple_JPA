import{g as C,R as E,a as k,r as m,u as A,b as B,c as P,j as t,d as S}from"./index-CG8vYf2y.js";import{R as U}from"./api-B-eoqegl.js";import{T as $}from"./TitleHeader-HJveUMRb.js";import{A as z}from"./index-BSwssLiK.js";import{F as s}from"./index-BDzwUFU-.js";import{I as p}from"./index-DmNkHtiY.js";import{R as D}from"./index-DipEv1TS.js";import{U as O}from"./index-DrXjvzMl.js";import{B as V}from"./button-Qumjrz4E.js";import"./index-CkZhrZUZ.js";import"./iconBase-BliIWTH0.js";import"./index-BK2APq6_.js";import"./index-zbYbnkux.js";import"./index-CWOPntzi.js";import"./context-PnQlGr6A.js";import"./UnstableContext-Cxtoe_qF.js";import"./useSize-s7Cj9DSQ.js";import"./Portal-CztClCTi.js";import"./useCSSVarCls-DVyv07Mk.js";import"./collapse-BbEVqHco.js";import"./zoom-Dx8PYXKT.js";import"./Keyframes-DQFvTPSf.js";import"./genStyleUtils-BNuyCX-p.js";import"./reactNode-Dx8pTwlk.js";import"./index-Dgnr2uwk.js";import"./index-DrSQ8jn4.js";import"./index-E9bkYm6o.js";import"./index-N7vMWSMs.js";import"./useId-D1G52zAA.js";import"./useMergedState-DU3z-VtB.js";import"./ContextIsolator-BLCcxi2B.js";import"./useZIndex-DHIAsWu5.js";import"./useLocale-DGpfybmt.js";import"./ExclamationCircleFilled-B_QXJoCI.js";import"./CloseCircleFilled-BQjJuuZg.js";import"./index-Bo0Apytk.js";import"./BaseInput-CpL4Y_YZ.js";import"./pickAttrs-KpDTT5l5.js";import"./KeyCode-DNlgD2sM.js";import"./fade-DL5WuKh7.js";import"./CheckOutlined-DEXRZQVp.js";import"./CloseOutlined-72i2lCdW.js";const At=()=>{const h=C("accessToken"),[o,_]=E(k);m.useEffect(()=>{},[o]);const u=A(),c=()=>{u(`/contents/index?strfId=${n}`)},a=B().state,[g]=s.useForm(),[I,d]=m.useState([]),[j,b]=m.useState(!1),[v]=P(),n=v.get("strfId"),y=({fileList:l})=>d(l),N=async l=>{var f;const{content:w,file:e,rating:L,strfId:R,userId:T}=l,F={userId:parseInt(T),strfId:parseInt(R),rating:parseInt(L),content:w},i=new FormData;e!=null&&e.fileList&&d(e.fileList),i.append("p",new Blob([JSON.stringify(F)],{type:"application/json"})),((f=e==null?void 0:e.fileList)==null?void 0:f.length)>0&&e.fileList.forEach(r=>{i.append("pics",r.originFileObj)});const x=i.get("p");x&&x.text().then(r=>console.log("p의 내용:",r));try{(await S.post(`${U.postReview}`,i,{headers:{Authorization:`Bearer ${h}`}})).data&&c()}catch(r){console.error(r)}};return t.jsxs("div",{children:[t.jsx($,{icon:"back",onClick:c,title:a==null?void 0:a.strfTitle}),t.jsx("div",{className:"px-[32px] mt-[60px]",children:t.jsxs(s,{form:g,onFinish:N,layout:"vertical",initialValues:{userId:o.userId,strfId:n},className:"mt-[50px]",children:[t.jsx(s.Item,{label:"userId",name:"userId",hidden:!0,children:t.jsx(p,{value:o.userId})}),t.jsx(s.Item,{label:"strfId",name:"strfId",hidden:!0,children:t.jsx(p,{value:n})}),t.jsx(s.Item,{name:"rating",className:"flex flex-col justify-center items-center gap-[10px] text-slate-300",help:t.jsx("div",{className:"text-center mt-[10px] text-slate-300",children:"별점을 입력해주세요."}),children:t.jsx(D,{style:{fontSize:54}})}),t.jsx("h3",{className:"mb-[10px] text-slate-700 text-[24px] font-semibold",children:"리뷰를 남겨주세요."}),t.jsx(s.Item,{name:"content",rules:[{required:!0,message:"리뷰를 입력해주세요."}],children:t.jsx(p.TextArea,{rows:4,placeholder:"직접 경험한 솔직한 리뷰를 남겨주세요.",variant:"borderless",maxLength:100,style:{height:300,resize:"none"},onChange:()=>b(!0),className:`placeholder: text-[20px] placeholder: text-slate-400
                ${j?"bg-white":"bg-slate-50"}`})}),t.jsx(s.Item,{name:"file",label:t.jsx("h3",{className:"mb-[10px] text-slate-700 text-[24px] font-semibold",children:"사진 첨부하기"}),children:t.jsx(O,{id:"file",listType:"picture",beforeUpload:()=>!1,fileList:I,onChange:y,multiple:!0,children:t.jsx("div",{className:`w-[136px] h-[136px] flex items-center justify-center\r
               bg-slate-100 hover:bg-[rgb(237,242,248)] rounded-lg\r
               transition`,children:t.jsx(z,{className:"text-[36px] text-slate-400"})})})}),t.jsx(s.Item,{children:t.jsx(V,{type:"primary",htmlType:"submit",className:`w-full h-[80px] py-[10px] rounded-lg\r
              text-[24px] font-semibold`,children:"완료"})})]})})]})};export{At as default};
