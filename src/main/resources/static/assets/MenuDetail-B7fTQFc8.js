import{g as I,c as z,u as F,a as Y,r as o,j as e,af as u,ac as h,ah as q,ab as H,ai as C,ag as v,e as j}from"./index-BntdmLw6.js";import{B as K}from"./BottomSheet-BJ5uX72Z.js";import{m as a,c as V}from"./match-QPO8WXvd.js";import{S as _}from"./index-xetdIjy9.js";import"./proxy-UoHTkF4V.js";import"./index-DlpCU_wW.js";import"./index-D--tJV0U.js";import"./index-_SN7yVUb.js";import"./index-uPMp8crv.js";import"./index-B594j0i6.js";const ce=()=>{const N=I("user").strfDtos[0].busiNum,b=I("accessToken"),[f]=z(),l=f.get("strfId"),s=f.get("category"),i=f.get("menuId"),r=F(),x=Y().state,[k,m]=o.useState(!1),[S,d]=o.useState(!1),[w,y]=o.useState(!1),[t,D]=o.useState(null),[g,$]=o.useState(!1),T=async()=>{const p="/api/detail/parlor";$(!0);try{const n=(await j.get(`${p}?strf_id=${l}&category=${V(s)}`)).data,L=n.data.find(M=>M.menuId===i)??null;return D(L),n}catch(c){return console.log("객실/호실 조회",c),null}finally{$(!1)}},B=async()=>{const p="/api/detail/menu";try{const n=(await j.delete(`${p}?menuId=${i}&busiNum=${N}`,{headers:{Authorization:`Bearer ${b}`}})).data;n.code==="200 성공"&&(d(!1),r(`/business/menu?strfId=${l}&category=${s}`)),console.log("메뉴 삭제",n)}catch(c){console.log("메뉴 삭제",c)}},P=async()=>{const p="/api/detail/parlor";try{const n=(await j.delete(`${p}?roomId=${t==null?void 0:t.roomId}&busiNum=${N}`,{headers:{Authorization:`Bearer ${b}`}})).data;n.code==="200 성공"&&(console.log("객실 삭제",n),y(!1))}catch(c){console.log("객실 삭제",c)}};o.useEffect(()=>{},[t]),o.useEffect(()=>{T()},[]);const A=[{label:e.jsxs("div",{className:"flex flex-col items-start gap-1 px-4 py-[14px] text-lg text-slate-500",children:[e.jsxs("p",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"text-slate-300"}),"객실 기본 정보 수정하기"]}),e.jsx("p",{className:"text-slate-400 text-base px-6",children:"사진, 이름, 가격을 수정"})]}),onClick:()=>{r(`/business/menu/edit?strfId=${l}&category=${s}&menuId=${i}&what=menu`)}},{label:e.jsxs("div",{className:"flex flex-col items-start gap-1 px-4 py-[14px] text-lg text-slate-500",children:[e.jsxs("p",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"text-slate-300"}),"객실/호실 등록하기"]}),e.jsx("p",{className:"text-slate-400 text-base px-6",children:"* 예약을 위해 필수적으로 객실/호실 등록이 필요합니다."})]}),onClick:()=>{r(`/business/menu/create?strfId=${l}&category=${s}&menuId=${i}&what=room`,{state:t})}},{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(h,{className:"text-slate-300"}),a(s)," 삭제하기"]}),onClick:()=>{m(!1),d(!0)}}],O=[{label:e.jsxs("div",{className:"flex flex-col items-start gap-1 px-4 py-[14px] text-lg text-slate-500",children:[e.jsxs("p",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"text-slate-300"}),"객실 기본 정보 수정하기"]}),e.jsx("p",{className:"text-slate-400 text-base px-6",children:"사진, 이름, 가격을 수정"})]}),onClick:()=>{r(`/business/menu/edit?strfId=${l}&category=${s}&menuId=${i}&what=menu`)}},{label:e.jsxs("div",{className:"flex flex-col items-start gap-1 px-4 py-[14px] text-lg text-slate-500",children:[e.jsxs("p",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"text-slate-300"}),"객실/호실 수정하기"]}),e.jsx("p",{className:"text-slate-400 text-base px-6",children:"* 예약을 위해 필수적으로 객실/호실 등록이 필요합니다."})]}),onClick:()=>{r(`/business/menu/edit?strfId=${l}&category=${s}&menuId=${i}&what=room`,{state:t})}},{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(h,{className:"text-slate-300"}),a(s)," 삭제하기"]}),onClick:()=>{m(!1),d(!0)}},{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(h,{className:"text-slate-300"}),"객실 상세 정보 삭제하기"]}),onClick:()=>{m(!1),d(!0)}}],R=[{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(u,{className:"text-slate-300"}),a(s)," 수정하기"]}),onClick:()=>{r(`/business/menu/edit?strfId=${l}&category=${s}&menuId=${i}&what=room`,{state:t})}},{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(h,{className:"text-slate-400"}),a(s)," 삭제하기"]}),onClick:()=>{m(!1),d(!0)}}],E=()=>s===C.STAY&&t?t.recomCapacity?O:A:R;return e.jsxs("div",{className:"flex flex-col gap-6 py-3 ",children:[e.jsxs("section",{className:"flex flex-col gap-3 px-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("h3",{className:"text-2xl font-semibold text-slate-700 select-none",children:[a(s)," 사진"]}),e.jsx("p",{className:"text-base font-medium text-slate-500 select-none",children:"현재 고객에게 보여지는 객실 사진입니다."})]}),e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"max-w-[200px] w-[40vw] aspect-square rounded-lg overflow-hidden bg-slate-100",children:e.jsx("img",{src:`${q}/${l}/menu/${x.menuPic}`,alt:x.menuTitle,className:"w-full h-full object-cover"})})})]}),e.jsx("div",{className:"h-[10px] bg-slate-100"}),e.jsxs("section",{className:"flex flex-col gap-6 px-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-2xl font-semibold text-slate-700 select-none",children:[a(s)," 정보"]}),e.jsx("button",{type:"button",className:"text-slate-500 text-2xl select-none",onClick:()=>m(!0),children:e.jsx(H,{})})]}),e.jsxs("p",{className:"text-base font-medium text-slate-500",children:["현재 등록된 ",a(s)," 정보입니다."]})]}),e.jsx("div",{children:e.jsx(_,{spinning:g,children:e.jsxs("ul",{className:"flex flex-col gap-2",children:[e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsxs("h4",{className:"col-span-1 text-lg text-slate-600 font-semibold",children:[a(s)," 이름"]}),e.jsx("p",{className:"col-span-3 text-base text-slate-500",children:x.menuTitle})]}),e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsx("h4",{className:"col-span-1 text-lg text-slate-600 font-semibold",children:"금액"}),e.jsxs("p",{className:"col-span-3 text-base text-slate-500",children:[x.menuPrice.toLocaleString(),"원"]})]}),!g&&t!==null&&e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsx("h4",{className:"col-span-1 text-lg text-slate-600 font-semibold",children:"객실 수량"}),e.jsxs("p",{className:"col-span-3 text-base text-slate-500",children:[t==null?void 0:t.roomNum.length,"개"]})]}),e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsx("h4",{className:"col-span-1 text-lg text-slate-600 font-semibold",children:"추가 금액"}),e.jsxs("p",{className:"col-span-3 text-base text-slate-500",children:[t==null?void 0:t.surcharge.toLocaleString(),"원"]})]}),e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsx("h4",{className:"col-span-1 text-lg text-slate-600 font-semibold",children:"권장 인원"}),e.jsxs("p",{className:"col-span-3 text-base text-slate-500",children:[x.recomCapacity,"명"]})]}),e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsx("h4",{className:"col-span-1 text-lg text-slate-600 font-semibold",children:"최대 인원"}),e.jsxs("p",{className:"col-span-3 text-base text-slate-500",children:[x.maxCapacity,"명"]})]})]}),!g&&s===C.STAY&&t===null&&e.jsx(e.Fragment,{children:e.jsxs("li",{children:[e.jsx("h4",{className:"col-span-1 text-lg text-slate-600 font-semibold",children:"객실 상세"}),e.jsx("p",{className:"col-span-3 text-base text-secondary3",children:"예약을 위해 객실 상세 등록이 필요합니다."})]})})]})})})]}),e.jsx(K,{actions:E(),open:k,onClose:()=>m(!1)}),S&&e.jsx(v,{title:"객실 삭제",content:`${a(s)}를 삭제하시겠습니까?`,handleClickSubmit:()=>{B()},handleClickCancle:()=>{d(!1)}}),w&&e.jsx(v,{title:"객실 삭제",content:"객실 상세 정보를 삭제하시겠습니까?",handleClickSubmit:()=>{P()},handleClickCancle:()=>{y(!1)}})]})};export{ce as default};
