import{u as C,r as n,j as e,$ as v,b as I,g as S,B as w,a9 as A,c as $}from"./index-CXgPt5JN.js";import{d as N}from"./dayjs.min-CM77hzp1.js";import"./ko-Cry2HJvs.js";import{c as k}from"./customParseFormat-BPyA_Wd-.js";import{a as D}from"./index-BIhRtoM_.js";import{B as E}from"./BottomSheet-B8X0Xgpj.js";import{f as B,c as P}from"./index-CDNxKOHP.js";import{f as y,S as T}from"./StrfInfo-DuVrGspu.js";import{N as Y}from"./NoData-O6WytPnO.js";import{S as F}from"./index-DfBx3HSs.js";import"./proxy-BT939zl-.js";import"./index-D0c2BEnw.js";N.locale("ko");N.extend(k);const L=({strfId:f,item:d,selected:i,onClick:h})=>{const{couponId:r,title:s,discountPer:c,expiredAt:l,distributeAt:o}=d,m=C(),p=()=>{m(`/business/coupon/edit?strfId=${f}&couponId=${r}&title=${s}&discountPer=${c}&expiredAt=${l}&distributeAt=${o}`)},[x,j]=n.useState(!1),u=t=>N(t).format("YYYY-MM-DD(ddd)"),b=[{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(B,{className:"text-slate-300"}),"수정하기"]}),onClick:()=>{p()}}],a=()=>{j(!x)};return e.jsxs("div",{className:"px-2 pt-2 pb-5 flex flex-col gap-3 border-b border-slate-200",children:[e.jsxs("div",{className:"flex flex-col gap-2 relative",children:[e.jsxs("ul",{className:"flex flex-col gap-1 w-full ",children:[e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsx("h4",{className:"text-lg text-slate-700 font-semibold col-span-1",children:"쿠폰 ID"}),e.jsx("p",{className:"text-base text-slate-500 font-semibold col-span-3",children:y(r??0)})]}),e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsx("h4",{className:"text-lg text-slate-700 font-semibold col-span-1",children:"쿠폰 관리명"}),e.jsx("p",{className:"text-base text-slate-500 font-semibold col-span-3",children:s})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 absolute bottom-1 right-0",children:[e.jsxs("button",{type:"button",className:"flex items-center gap-2 text-base text-slate-500",onClick:h,children:["자세히",e.jsx("i",{className:`text-base text-slate-500 ${i?"rotate-90":"rotate-0"} transition-transform duration-300`,children:e.jsx(v,{})})]}),e.jsx("button",{type:"button",className:"text-base text-slate-500",onClick:a,children:e.jsx(D,{})})]})]}),e.jsx("div",{className:`${i?"visible h-auto opacity-100 relative":"invisible max-h-0 opacity-0 absolute"}
          overflow-hidden transition-[max-height] duration-300 ease-in-out opacity-transition`,style:{transitionProperty:"opacity, max-height, visibility",transitionDuration:i?"400ms":"300ms"},children:i&&e.jsxs("ul",{className:"px-4 py-4 bg-slate-100",children:[e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-base text-slate-700 font-semibold",children:"쿠폰 ID"}),e.jsx("p",{className:"text-sm text-slate-500 ",children:y(r??0)})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-base text-slate-700 font-semibold",children:"쿠폰 관리명"}),e.jsx("p",{className:"text-sm text-slate-500 ",children:s})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-base text-slate-700 font-semibold",children:"쿠폰 할인"}),e.jsxs("p",{className:"text-sm text-slate-500 ",children:[c,"%"]})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-base text-slate-700 font-semibold",children:"쿠폰 유효기간"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[u(o)," ~ ",u(l)]})]})]})}),e.jsx(E,{open:x,onClose:a,actions:b})]})},W=()=>{const[f]=I(),d=Number(f.get("strfId")),i=S("accessToken"),h=C(),r=()=>{h(`/business/coupon/create?strfId=${d}`)},[s,c]=n.useState([]),[l,o]=n.useState(!1),[m,p]=n.useState(!1),[x,j]=n.useState(0),u=a=>{x===a?p(!m):(j(a),p(!0))},b=async()=>{const a="/api/coupon/business/issuance";o(!0);try{const t=await $.get(a,{headers:{Authorization:`Bearer ${i}`}}),g=t.data;return Array.isArray(g)&&c(g),t.data&&o(!1),g}catch(t){return console.log(t),c([]),o(!1),null}};return n.useEffect(()=>{b()},[]),e.jsxs("div",{children:[e.jsx(T,{}),e.jsxs("section",{className:"px-4 py-3 flex flex-col gap-5",children:[e.jsxs("div",{className:"px-4 py-4 bg-[rgba(165,238,254,0.31)] rounded-lg",children:[e.jsx("p",{className:"text-base font-semibold text-slate-700",children:"쿠폰의 발급을 신청해보세요!"}),e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"신청이 승인되어을 때, 쿠폰을 발급 받을 수 있어요."})]}),e.jsx("div",{children:e.jsxs(w,{type:"primary",className:"w-full py-2 max-h-[60px] h-[13.33vw] text-xl font-medium",onClick:r,children:[e.jsx(A,{}),"혜택 등록"]})})]}),e.jsx("section",{className:"px-4 py-3 flex flex-col gap-5",children:e.jsx(F,{spinning:l,children:e.jsxs("ul",{className:"flex flex-col gap-5",children:[l&&e.jsx(e.Fragment,{}),!l&&(s==null?void 0:s.length)===0&&e.jsx(Y,{icon:e.jsx(P,{}),content:"쿠폰 목록이 없습니다."}),!l&&(s==null?void 0:s.map((a,t)=>e.jsx("li",{children:e.jsx(L,{strfId:d,item:a,selected:!!(x===t&&m),onClick:()=>u(t)})},t)))]})})})]})};export{W as default};
