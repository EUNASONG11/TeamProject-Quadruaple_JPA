import{r as s,at as T,c9 as Be,B as V,ca as se,w as y,aQ as H,bn as Le,H as Ae,bs as We,cb as ze,cc as ce,F as W,aq as ae,as as w,bF as De,bD as Ve,bG as He,cd as qe,c8 as _e,q as Z,D as ie,ce as Qe,aP as Ge,cf as Xe,cg as Ue,v as Ze,ch as Ye,ci as Je,cj as Ke,C as en}from"./index-BntdmLw6.js";import{g as A}from"./motion-C0u11WnX.js";import{u as ue,D as nn,p as tn,a as on,P as ln}from"./index-D-KvkW_H.js";import{S as rn}from"./Skeleton-C25bXjOT.js";import{u as q}from"./useLocale-DTUvsN8S.js";import{w as sn}from"./PurePanel-UKNAQVax.js";function cn(){const[e,t]=s.useState([]),l=s.useCallback(n=>(t(o=>[].concat(T(o),[n])),()=>{t(o=>o.filter(c=>c!==n))}),[]);return[e,l]}function z(e){return!!(e!=null&&e.then)}const fe=e=>{const{type:t,children:l,prefixCls:n,buttonProps:o,close:c,autoFocus:d,emitEvent:i,isSilent:a,quitOnNullishReturnValue:g,actionFn:r}=e,f=s.useRef(!1),m=s.useRef(null),[x,h]=Be(!1),C=function(){c==null||c.apply(void 0,arguments)};s.useEffect(()=>{let u=null;return d&&(u=setTimeout(()=>{var O;(O=m.current)===null||O===void 0||O.focus({preventScroll:!0})})),()=>{u&&clearTimeout(u)}},[]);const b=u=>{z(u)&&(h(!0),u.then(function(){h(!1,!0),C.apply(void 0,arguments),f.current=!1},O=>{if(h(!1,!0),f.current=!1,!(a!=null&&a()))return Promise.reject(O)}))},p=u=>{if(f.current)return;if(f.current=!0,!r){C();return}let O;if(i){if(O=r(u),g&&!z(O)){f.current=!1,C(u);return}}else if(r.length)O=r(c),f.current=!1;else if(O=r(),!z(O)){C();return}b(O)};return s.createElement(V,Object.assign({},se(t),{onClick:p,loading:x,prefixCls:n},o,{ref:m}),l)},M=y.createContext({}),{Provider:de}=M,Y=()=>{const{autoFocusButton:e,cancelButtonProps:t,cancelTextLocale:l,isSilent:n,mergedOkCancel:o,rootPrefixCls:c,close:d,onCancel:i,onConfirm:a}=s.useContext(M);return o?y.createElement(fe,{isSilent:n,actionFn:i,close:function(){d==null||d.apply(void 0,arguments),a==null||a(!1)},autoFocus:e==="cancel",buttonProps:t,prefixCls:`${c}-btn`},l):null},J=()=>{const{autoFocusButton:e,close:t,isSilent:l,okButtonProps:n,rootPrefixCls:o,okTextLocale:c,okType:d,onConfirm:i,onOk:a}=s.useContext(M);return y.createElement(fe,{isSilent:l,type:d||"primary",actionFn:a,close:function(){t==null||t.apply(void 0,arguments),i==null||i(!0)},autoFocus:e==="ok",buttonProps:n,prefixCls:`${o}-btn`},c)};function K(e){if(e)return{closable:e.closable,closeIcon:e.closeIcon}}function ee(e){const{closable:t,closeIcon:l}=e||{};return y.useMemo(()=>{if(!t&&(t===!1||l===!1||l===null))return!1;if(t===void 0&&l===void 0)return null;let n={closeIcon:typeof l!="boolean"&&l!==null?l:void 0};return t&&typeof t=="object"&&(n=Object.assign(Object.assign({},n),t)),n},[t,l])}function ne(){const e={};for(var t=arguments.length,l=new Array(t),n=0;n<t;n++)l[n]=arguments[n];return l.forEach(o=>{o&&Object.keys(o).forEach(c=>{o[c]!==void 0&&(e[c]=o[c])})}),e}const an={};function un(e,t){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:an;const n=ee(e),o=ee(t),c=typeof n!="boolean"?!!(n!=null&&n.disabled):!1,d=y.useMemo(()=>Object.assign({closeIcon:y.createElement(H,null)},l),[l]),i=y.useMemo(()=>n===!1?!1:n?ne(d,o,n):o===!1?!1:o?ne(d,o):d.closable?d:!1,[n,o,d]);return y.useMemo(()=>{if(i===!1)return[!1,null,c];const{closeIconRender:a}=d,{closeIcon:g}=i;let r=g;if(r!=null){a&&(r=a(g));const f=Le(i,!0);Object.keys(f).length&&(r=y.isValidElement(r)?y.cloneElement(r,f):y.createElement("span",Object.assign({},f),r))}return[!0,r,c]},[i,d])}const fn=()=>Ae()&&window.document.documentElement;function te(){}const dn=s.createContext({add:te,remove:te});function mn(e){const t=s.useContext(dn),l=s.useRef(null);return We(o=>{if(o){const c=e?o.querySelector(e):o;t.add(c),l.current=c}else t.remove(l.current)})}const oe=()=>{const{cancelButtonProps:e,cancelTextLocale:t,onCancel:l}=s.useContext(M);return y.createElement(V,Object.assign({onClick:l},e),t)},le=()=>{const{confirmLoading:e,okButtonProps:t,okType:l,okTextLocale:n,onOk:o}=s.useContext(M);return y.createElement(V,Object.assign({},se(l),{loading:e,onClick:o},t),n)};function me(e,t){return y.createElement("span",{className:`${e}-close-x`},t||y.createElement(H,{className:`${e}-close-icon`}))}const Ce=e=>{const{okText:t,okType:l="primary",cancelText:n,confirmLoading:o,onOk:c,onCancel:d,okButtonProps:i,cancelButtonProps:a,footer:g}=e,[r]=q("Modal",ce()),f=t||(r==null?void 0:r.okText),m=n||(r==null?void 0:r.cancelText),x={confirmLoading:o,okButtonProps:i,cancelButtonProps:a,okTextLocale:f,cancelTextLocale:m,okType:l,onOk:c,onCancel:d},h=y.useMemo(()=>x,T(Object.values(x)));let C;return typeof g=="function"||typeof g>"u"?(C=y.createElement(y.Fragment,null,y.createElement(oe,null),y.createElement(le,null)),typeof g=="function"&&(C=g(C,{OkBtn:le,CancelBtn:oe})),C=y.createElement(de,{value:h},C)):C=g,y.createElement(ze,{disabled:!1},C)};var Cn=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(l[n[o]]=e[n[o]]);return l};let D;const gn=e=>{D={x:e.pageX,y:e.pageY},setTimeout(()=>{D=null},100)};fn()&&document.documentElement.addEventListener("click",gn,!0);const ge=e=>{var t;const{getPopupContainer:l,getPrefixCls:n,direction:o,modal:c}=s.useContext(W),d=I=>{const{onCancel:$}=e;$==null||$(I)},i=I=>{const{onOk:$}=e;$==null||$(I)},{prefixCls:a,className:g,rootClassName:r,open:f,wrapClassName:m,centered:x,getContainer:h,focusTriggerAfterClose:C=!0,style:b,visible:p,width:u=520,footer:O,classNames:P,styles:j,children:k,loading:F}=e,S=Cn(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading"]),E=n("modal",a),_=n(),Q=ae(E),[je,G,Ie]=ue(E,Q),we=w(m,{[`${E}-centered`]:!!x,[`${E}-wrap-rtl`]:o==="rtl"}),Te=O!==null&&!F?s.createElement(Ce,Object.assign({},e,{onOk:i,onCancel:d})):null,[X,U,Se]=un(K(e),K(c),{closable:!0,closeIcon:s.createElement(H,{className:`${E}-close-icon`}),closeIconRender:I=>me(E,I)}),Ne=mn(`.${E}-content`),[ke,Fe]=De("Modal",S.zIndex),[Me,B]=s.useMemo(()=>u&&typeof u=="object"?[void 0,u]:[u,void 0],[u]),Re=s.useMemo(()=>{const I={};return B&&Object.keys(B).forEach($=>{const L=B[$];L!==void 0&&(I[`--${E}-${$}-width`]=typeof L=="number"?`${L}px`:L)}),I},[B]);return je(s.createElement(Ve,{form:!0,space:!0},s.createElement(He.Provider,{value:Fe},s.createElement(nn,Object.assign({width:Me},S,{zIndex:ke,getContainer:h===void 0?l:h,prefixCls:E,rootClassName:w(G,r,Ie,Q),footer:Te,visible:f??p,mousePosition:(t=S.mousePosition)!==null&&t!==void 0?t:D,onClose:d,closable:X&&{disabled:Se,closeIcon:U},closeIcon:U,focusTriggerAfterClose:C,transitionName:A(_,"zoom",e.transitionName),maskTransitionName:A(_,"fade",e.maskTransitionName),className:w(G,g,c==null?void 0:c.className),style:Object.assign(Object.assign(Object.assign({},c==null?void 0:c.style),b),Re),classNames:Object.assign(Object.assign(Object.assign({},c==null?void 0:c.classNames),P),{wrapper:w(we,P==null?void 0:P.wrapper)}),styles:Object.assign(Object.assign({},c==null?void 0:c.styles),j),panelRef:Ne}),F?s.createElement(rn,{active:!0,title:!1,paragraph:{rows:4},className:`${E}-body-skeleton`}):k))))},bn=e=>{const{componentCls:t,titleFontSize:l,titleLineHeight:n,modalConfirmIconSize:o,fontSize:c,lineHeight:d,modalTitleHeight:i,fontHeight:a,confirmBodyPadding:g}=e,r=`${t}-confirm`;return{[r]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${r}-body-wrapper`]:Object.assign({},_e()),[`&${t} ${t}-body`]:{padding:g},[`${r}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(a).sub(o).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(i).sub(o).equal()).div(2).equal()}},[`${r}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS,maxWidth:`calc(100% - ${Z(e.marginSM)})`},[`${e.iconCls} + ${r}-paragraph`]:{maxWidth:`calc(100% - ${Z(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${r}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:l,lineHeight:n},[`${r}-content`]:{color:e.colorText,fontSize:c,lineHeight:d},[`${r}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${r}-error ${r}-body > ${e.iconCls}`]:{color:e.colorError},[`${r}-warning ${r}-body > ${e.iconCls},
        ${r}-confirm ${r}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${r}-info ${r}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${r}-success ${r}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},pn=qe(["Modal","confirm"],e=>{const t=tn(e);return[bn(t)]},on,{order:-1e3});var xn=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(l[n[o]]=e[n[o]]);return l};function be(e){const{prefixCls:t,icon:l,okText:n,cancelText:o,confirmPrefixCls:c,type:d,okCancel:i,footer:a,locale:g}=e,r=xn(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let f=l;if(!l&&l!==null)switch(d){case"info":f=s.createElement(Ue,null);break;case"success":f=s.createElement(Xe,null);break;case"error":f=s.createElement(Ge,null);break;default:f=s.createElement(Qe,null)}const m=i??d==="confirm",x=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[h]=q("Modal"),C=g||h,b=n||(m?C==null?void 0:C.okText:C==null?void 0:C.justOkText),p=o||(C==null?void 0:C.cancelText),u=Object.assign({autoFocusButton:x,cancelTextLocale:p,okTextLocale:b,mergedOkCancel:m},r),O=s.useMemo(()=>u,T(Object.values(u))),P=s.createElement(s.Fragment,null,s.createElement(Y,null),s.createElement(J,null)),j=e.title!==void 0&&e.title!==null,k=`${c}-body`;return s.createElement("div",{className:`${c}-body-wrapper`},s.createElement("div",{className:w(k,{[`${k}-has-title`]:j})},f,s.createElement("div",{className:`${c}-paragraph`},j&&s.createElement("span",{className:`${c}-title`},e.title),s.createElement("div",{className:`${c}-content`},e.content))),a===void 0||typeof a=="function"?s.createElement(de,{value:O},s.createElement("div",{className:`${c}-btns`},typeof a=="function"?a(P,{OkBtn:J,CancelBtn:Y}):P)):a,s.createElement(pn,{prefixCls:t}))}const yn=e=>{const{close:t,zIndex:l,maskStyle:n,direction:o,prefixCls:c,wrapClassName:d,rootPrefixCls:i,bodyStyle:a,closable:g=!1,onConfirm:r,styles:f}=e,m=`${c}-confirm`,x=e.width||416,h=e.style||{},C=e.mask===void 0?!0:e.mask,b=e.maskClosable===void 0?!1:e.maskClosable,p=w(m,`${m}-${e.type}`,{[`${m}-rtl`]:o==="rtl"},e.className),[,u]=Ze(),O=s.useMemo(()=>l!==void 0?l:u.zIndexPopupBase+Ye,[l,u]);return s.createElement(ge,Object.assign({},e,{className:p,wrapClassName:w({[`${m}-centered`]:!!e.centered},d),onCancel:()=>{t==null||t({triggerCancel:!0}),r==null||r(!1)},title:"",footer:null,transitionName:A(i||"","zoom",e.transitionName),maskTransitionName:A(i||"","fade",e.maskTransitionName),mask:C,maskClosable:b,style:h,styles:Object.assign({body:a,mask:n},f),width:x,zIndex:O,closable:g}),s.createElement(be,Object.assign({},e,{confirmPrefixCls:m})))},pe=e=>{const{rootPrefixCls:t,iconPrefixCls:l,direction:n,theme:o}=e;return s.createElement(ie,{prefixCls:t,iconPrefixCls:l,direction:n,theme:o},s.createElement(yn,Object.assign({},e)))},N=[];let xe="";function ye(){return xe}const On=e=>{var t,l;const{prefixCls:n,getContainer:o,direction:c}=e,d=ce(),i=s.useContext(W),a=ye()||i.getPrefixCls(),g=n||`${a}-modal`;let r=o;return r===!1&&(r=void 0),y.createElement(pe,Object.assign({},e,{rootPrefixCls:a,prefixCls:g,iconPrefixCls:i.iconPrefixCls,theme:i.theme,direction:c??i.direction,locale:(l=(t=i.locale)===null||t===void 0?void 0:t.Modal)!==null&&l!==void 0?l:d,getContainer:r}))};function R(e){const t=Ke(),l=document.createDocumentFragment();let n=Object.assign(Object.assign({},e),{close:a,open:!0}),o,c;function d(){for(var r,f=arguments.length,m=new Array(f),x=0;x<f;x++)m[x]=arguments[x];if(m.some(b=>b==null?void 0:b.triggerCancel)){var C;(r=e.onCancel)===null||r===void 0||(C=r).call.apply(C,[e,()=>{}].concat(T(m.slice(1))))}for(let b=0;b<N.length;b++)if(N[b]===a){N.splice(b,1);break}c()}function i(r){clearTimeout(o),o=setTimeout(()=>{const f=t.getPrefixCls(void 0,ye()),m=t.getIconPrefixCls(),x=t.getTheme(),h=y.createElement(On,Object.assign({},r));c=Je()(y.createElement(ie,{prefixCls:f,iconPrefixCls:m,theme:x},t.holderRender?t.holderRender(h):h),l)})}function a(){for(var r=arguments.length,f=new Array(r),m=0;m<r;m++)f[m]=arguments[m];n=Object.assign(Object.assign({},n),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),d.apply(this,f)}}),n.visible&&delete n.visible,i(n)}function g(r){typeof r=="function"?n=r(n):n=Object.assign(Object.assign({},n),r),i(n)}return i(n),N.push(a),{destroy:a,update:g}}function Oe(e){return Object.assign(Object.assign({},e),{type:"warning"})}function he(e){return Object.assign(Object.assign({},e),{type:"info"})}function Pe(e){return Object.assign(Object.assign({},e),{type:"success"})}function Ee(e){return Object.assign(Object.assign({},e),{type:"error"})}function $e(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function hn(e){let{rootPrefixCls:t}=e;xe=t}var Pn=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(l[n[o]]=e[n[o]]);return l};const En=(e,t)=>{var l,{afterClose:n,config:o}=e,c=Pn(e,["afterClose","config"]);const[d,i]=s.useState(!0),[a,g]=s.useState(o),{direction:r,getPrefixCls:f}=s.useContext(W),m=f("modal"),x=f(),h=()=>{var u;n(),(u=a.afterClose)===null||u===void 0||u.call(a)},C=function(){var u;i(!1);for(var O=arguments.length,P=new Array(O),j=0;j<O;j++)P[j]=arguments[j];if(P.some(S=>S==null?void 0:S.triggerCancel)){var F;(u=a.onCancel)===null||u===void 0||(F=u).call.apply(F,[a,()=>{}].concat(T(P.slice(1))))}};s.useImperativeHandle(t,()=>({destroy:C,update:u=>{g(O=>Object.assign(Object.assign({},O),u))}}));const b=(l=a.okCancel)!==null&&l!==void 0?l:a.type==="confirm",[p]=q("Modal",en.Modal);return s.createElement(pe,Object.assign({prefixCls:m,rootPrefixCls:x},a,{close:C,open:d,afterClose:h,okText:a.okText||(b?p==null?void 0:p.okText:p==null?void 0:p.justOkText),direction:a.direction||r,cancelText:a.cancelText||(p==null?void 0:p.cancelText)},c))},$n=s.forwardRef(En);let re=0;const vn=s.memo(s.forwardRef((e,t)=>{const[l,n]=cn();return s.useImperativeHandle(t,()=>({patchElement:n}),[]),s.createElement(s.Fragment,null,l)}));function jn(){const e=s.useRef(null),[t,l]=s.useState([]);s.useEffect(()=>{t.length&&(T(t).forEach(d=>{d()}),l([]))},[t]);const n=s.useCallback(c=>function(i){var a;re+=1;const g=s.createRef();let r;const f=new Promise(b=>{r=b});let m=!1,x;const h=s.createElement($n,{key:`modal-${re}`,config:c(i),ref:g,afterClose:()=>{x==null||x()},isSilent:()=>m,onConfirm:b=>{r(b)}});return x=(a=e.current)===null||a===void 0?void 0:a.patchElement(h),x&&N.push(x),{destroy:()=>{function b(){var p;(p=g.current)===null||p===void 0||p.destroy()}g.current?b():l(p=>[].concat(T(p),[b]))},update:b=>{function p(){var u;(u=g.current)===null||u===void 0||u.update(b)}g.current?p():l(u=>[].concat(T(u),[p]))},then:b=>(m=!0,f.then(b))}},[]);return[s.useMemo(()=>({info:n(he),success:n(Pe),error:n(Ee),warning:n(Oe),confirm:n($e)}),[]),s.createElement(vn,{key:"modal-holder",ref:e})]}var In=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(l[n[o]]=e[n[o]]);return l};const wn=e=>{const{prefixCls:t,className:l,closeIcon:n,closable:o,type:c,title:d,children:i,footer:a}=e,g=In(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:r}=s.useContext(W),f=r(),m=t||r("modal"),x=ae(f),[h,C,b]=ue(m,x),p=`${m}-confirm`;let u={};return c?u={closable:o??!1,title:"",footer:"",children:s.createElement(be,Object.assign({},e,{prefixCls:m,confirmPrefixCls:p,rootPrefixCls:f,content:i}))}:u={closable:o??!0,title:d,footer:a!==null&&s.createElement(Ce,Object.assign({},e)),children:i},h(s.createElement(ln,Object.assign({prefixCls:m,className:w(C,`${m}-pure-panel`,c&&p,c&&`${p}-${c}`,l,b,x)},g,{closeIcon:me(m,n),closable:o},u)))},Tn=sn(wn);function ve(e){return R(Oe(e))}const v=ge;v.useModal=jn;v.info=function(t){return R(he(t))};v.success=function(t){return R(Pe(t))};v.error=function(t){return R(Ee(t))};v.warning=ve;v.warn=ve;v.confirm=function(t){return R($e(t))};v.destroyAll=function(){for(;N.length;){const t=N.pop();t&&t()}};v.config=hn;v._InternalPanelDoNotUseOrYouWillBeFired=Tn;export{v as M};
