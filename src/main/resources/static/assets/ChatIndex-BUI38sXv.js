import{r as c,u as m,j as e,U as j,g as h,T as f,c as v}from"./index-ztVTG9lp.js";import{L as C}from"./index-CAQOQu-_.js";const N=({chatList:l})=>{const s=m(),r=t=>{s(`/chatroom?roomId=${t}`)};return e.jsx(e.Fragment,{children:e.jsx("ul",{className:"flex flex-col",children:l.map((t,n)=>e.jsxs("li",{className:"flex items-center justify-between gap-3 px-4 py-4 cursor-pointer",onClick:()=>r(t.roomId),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 bg-slate-200 flex items-center justify-center rounded-2xl overflow-hidden",children:e.jsx("img",{src:`${j}/${t.pic}`,alt:"채팅방 사진"})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("p",{className:"text-lg text-slate-700 font-semibold",children:t.title}),e.jsx("p",{children:t.latestChat})]})]}),e.jsxs("div",{className:"flex flex-col items-end justify-between",children:[e.jsx("p",{className:"text-sm text-slate-400",children:t.lastChatTime}),t.unreadChat&&e.jsx("p",{className:"px-3 py-[5px] bg-primary rounded-2xl text-white text-sm",children:t.unreadChat})]})]},n))})})},y=c.memo(N),k=()=>{const l=h("accessToken"),s=h("user"),r=s==null?void 0:s.role[0],t=m(),n=()=>{t("/")},[u]=c.useState("전체"),[o,i]=c.useState([]),[x,p]=c.useState(0),g=async()=>{try{const a=(await v.get(`/api/chat-room?page=${x}&role=${r}`,{headers:{Authorization:`Bearer ${l}`}})).data;return console.log("채팅 목록 조회",a),a.code==="200 성공"&&i(a.data),a.data.length===30&&p(x+1),a}catch(d){return console.log("채팅 목록 조회",d),i([]),null}};return c.useEffect(()=>{g()},[]),e.jsxs("div",{className:"max-w-[768px] min-w-xs mx-auto relative min-h-screen ",children:[e.jsx(f,{title:"채팅",icon:"back",onClick:n}),e.jsx("div",{children:o.length>0?e.jsx(y,{category:u,chatList:o}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-[16px] pt-28",children:[e.jsx("i",{className:"text-6xl text-slate-400",children:e.jsx(C,{})}),e.jsx("p",{className:"text-slate-400",children:"채팅 목록이 없습니다."})]})})]})};export{k as default};
