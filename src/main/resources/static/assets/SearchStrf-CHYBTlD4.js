import{R as _,f as A,h as $,g as B,a as D,r as a,e as p,b as h,j as e,F as P}from"./index-DB3eQjaF.js";import{I as F}from"./index-CTtYMjrs.js";import{s as L}from"./searchAtom-DvnSBATg.js";import{a as T}from"./pic-Bp3CpqNF.js";import{c as E}from"./match-BwJlDZ8C.js";import{R as M}from"./index-BjDyQi0a.js";import{D as z}from"./BottomModal-CvidPzUl.js";import{I as O}from"./index-B30wfAHF.js";import"./button-x43GSXMA.js";import"./useSize-CL4N8q3x.js";import"./context-D2Tlqc8S.js";import"./BaseInput-BY0LxQI1.js";import"./useMergedState-CRVcgrPC.js";import"./ContextIsolator-BsDgCGPW.js";import"./index-CncOcDmE.js";const ce=()=>{_(L);const{userId:m}=A($),x=B("accessToken"),d=D(),[u,V]=a.useState(!1),[c,g]=a.useState([]),[r,j]=a.useState([]),[o,N]=a.useState([]);a.useState();const[b,n]=a.useState(!1),[W,y]=a.useState(""),v=a.useCallback(async()=>{const s="/api/search/popular";try{const t=await p.get(s);g(t.data.data)}catch(t){console.log("인기 검색어",t)}},[]),i=a.useCallback(async()=>{try{const t=(await h.get(`/api/search/basic?user_id=${m}`)).data;j(t.data)}catch(s){console.log("최근 본 검색 결과",s)}},[]),C=a.useCallback(async()=>{try{const l=(await h.get("/api/search/list")).data.data.filter(R=>R.txt!=="");N(l)}catch(s){console.log("최근 검색어 호출 결과:",s)}},[]),k=async s=>{const t={strf_id:s.strfId};try{const l=await p.patch(`/api/recent/hide?strf_id=${s.strfId}`,{...t},{headers:{Authorization:`Bearer ${x}`}});console.log(l.data),l.data&&i()}catch(l){console.log("개별 삭제",l)}},w=async()=>{try{const s=await p.patch("/api/recent/hide/all",{},{headers:{Authorization:`Bearer ${x}`}});console.log(s.data),s.data&&(i(),n(!1))}catch(s){console.log("개별 삭제",s)}},S=s=>{},f=a.useCallback(s=>{console.log("클릭한 인기 검색어:",s),y(s.strfName),d(`/contents/index?strfId=${s.strfId}`)},[]),I=()=>{n(!1)};return a.useEffect(()=>{v(),x&&(i(),C())},[]),e.jsxs("div",{className:"w-full flex flex-col gap-[30px] mb-[100px]",children:[e.jsxs("div",{className:"w-full px-[32px] py-[30px] flex items-center gap-[40px] relative",children:[e.jsx("div",{className:"text-[36px] cursor-pointer",onClick:()=>{d(-1)},children:e.jsx(F,{})}),e.jsx("label",{htmlFor:"searchBar",className:"relative w-full",children:e.jsx(O,{id:"searchBar",className:"h-[60px] text-lg rounded-lg gap-[5px]",placeholder:"관광지, 장소, 숙소,맛집을 검색해 보세요",allowClear:!0,prefix:e.jsx(P,{className:"text-slate-400 text-2xl"}),onChange:s=>S(),variant:"filled"})})]}),u?e.jsx(e.Fragment,{}):e.jsxs("div",{className:"px-[32px] flex flex-col gap-[50px]",children:[e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsx("h2",{className:"text-[24px] font-semibold text-slate-700",children:"최근 검색어"}),e.jsx("ul",{className:"flex gap-[20px] flex-wrap",children:o?o==null?void 0:o.map((s,t)=>e.jsx("li",{className:"cursor-pointer text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",onClick:()=>f(s),children:s.txt},t)):e.jsx("li",{className:"text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",children:"데이터 없음"})})]}),e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsx("h2",{className:"text-[24px] font-semibold text-slate-700",children:"인기 검색어"}),e.jsx("ul",{className:"flex gap-[20px] flex-wrap",children:c?c==null?void 0:c.map((s,t)=>e.jsx("li",{className:"cursor-pointer text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",onClick:()=>f(s),children:s.strfName},t)):e.jsx("li",{className:"text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",children:"데이터 없음"})})]}),e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-[24px] font-semibold text-slate-700",children:"최근 본 목록"}),e.jsx("button",{type:"button",className:"text-slate-400 text-[18px]",onClick:()=>n(!0),children:"모두 삭제"})]}),e.jsx("ul",{className:"flex flex-col gap-[20px]",children:r?r==null?void 0:r.map((s,t)=>e.jsxs("li",{className:"flex cursor-pointer items-center justify-between",children:[e.jsxs("div",{className:"flex gap-[15px]",onClick:()=>handleClickList(s),children:[e.jsx("div",{className:"w-[80px] h-[80px] rounded-2xl overflow-hidden",children:e.jsx("img",{className:"w-full h-full object-cover",src:s.strfPic?`${T}${s.strfId}/${s.strfPic}`:"/images/logo_icon_4.png",alt:s.strfName})}),e.jsxs("div",{className:"flex flex-col gap-[5px] justify-center",children:[e.jsx("div",{className:"text-[18px] text-slate-700 font-semibold",children:s.strfName}),e.jsxs("div",{className:"flex gap-[5px]",children:[e.jsx("span",{className:"text-slate-500 text-[14px]",children:E(s.category)}),e.jsx("span",{className:"text-slate-500 text-[14px]",children:"•"}),e.jsx("span",{className:"text-slate-500 text-[14px]",children:s.locationTitle})]})]})]}),e.jsx("button",{type:"button",className:"text-slate-400 text-[20px]",onClick:()=>k(s),children:e.jsx(M,{})})]},t)):null})]})]}),b&&e.jsx(z,{handleClickCancle:I,handleClickSubmit:w,content:"최근 본 목록을 모두 삭제하시겠습니까?"})]})};export{ce as default};
