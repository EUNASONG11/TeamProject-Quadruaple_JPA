import{u as B,r as i,j as e,Q as _,B as O,g as V,S as W,b as z,a4 as F,n as G,ao as H,a9 as Q,c as T}from"./index-ztVTG9lp.js";import{T as q,R as J}from"./TitleHeader-lhIfQ61P.js";import{e as K}from"./index-BNRq6L-3.js";import{a as X}from"./index-DlO1jS7p.js";import{S as Y}from"./ScheduleDay-C5VcGLro.js";import{S as Z,a as ee}from"./swiper-react-CoZtforU.js";import{j as S}from"./jwt-Dpt0WQzU.js";import{u as te}from"./userAtom-BNiKeFLi.js";import{R as se}from"./index-D6Qu_HcJ.js";import{a as ae}from"./index-DpREiSBa.js";import{S as A}from"./index-CUoWmka9.js";import"./dayjs.min-Ti2bJ-a6.js";import"./index-Dx8wNGhz.js";import"./index-DIofXRia.js";import"./match-D4UHT3tw.js";import"./index-DQQnbW7l.js";import"./index-CAQOQu-_.js";import"./index-BJLpRm29.js";import"./index-mc295g84.js";import"./tripAtom-DBBuOse9.js";import"./MarkerClusterer-DqxWsYWP.js";import"./index-BME9-B9L.js";import"./index-Cyve9Zid.js";import"./index-CFriIEhO.js";import"./Portal-Q4ncUo3s.js";import"./useId-z-Hxf0DT.js";import"./motion-Cigbmjr9.js";import"./roundedArrow-BEsDa3vf.js";import"./zoom-CZRi_VRg.js";const le=({openSelectTripModal:d,setOpenSelectTripModal:m,tripLocationList:w,tripReviewId:n})=>{const f=B(),v=()=>{f("/schedule/days",{state:{selectedLocationId:w,tripReviewId:n,tripId:x.tripId,title:x.title,from:"/scheduleboard/scheduleDetail"}})},[p,l]=i.useState([]),[u,c]=i.useState(null),[x,h]=i.useState(null);i.useEffect(()=>{console.log("tripListData",p)},[p]),i.useEffect(()=>{console.log("selectedTripData",x)},[x]);const g=async()=>{try{const s=await S.get("/api/trip-list");console.log(s.data);const N=s.data.data.beforeTripList;l(N)}catch(s){console.log("여행 목록 불러오기:",s)}},y=(s,r)=>{c(r),console.log("item",s),h(s)},j=()=>{m(!1)},b=s=>{s.stopPropagation()};return i.useEffect(()=>{g()},[]),e.jsx("div",{className:`fixed top-0 left-[50%] translate-x-[-50%] z-10\r
\r
            max-w-3xl w-full mx-auto h-screen\r
            flex items-end justify-center\r
            bg-[rgba(0,0,0,0.5)]\r
            pb-[70px]\r
            `,onClick:()=>{j()},children:e.jsxs("div",{className:`bg-white w-full \r
                rounded-t-2xl px-[60px] py-[55px]\r
                flex flex-col gap-[20px]\r
                `,onClick:b,children:[e.jsx("h2",{className:"text-[28px] text-slate-700 font-bold",children:"이 일정을 담을 여행을 선택해주세요."}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("h3",{className:"text-[18px] text-slate-700 font-semibold",children:"나의 다가오는 여행"}),e.jsx("ul",{className:`flex flex-col px-[10px] py-[20px] gap-[30px]\r
          max-h-[55vh] overflow-y-auto`,children:p==null?void 0:p.map((s,r)=>e.jsxs("li",{className:`flex items-center gap-[20px] px-[20px] py-[10px] rounded-[16px] ${u===r?"bg-slate-200":""}`,onClick:()=>y(s,r),children:[e.jsx("div",{className:"w-[50px] h-[50px] bg-slate-100 rounded-full overflow-hidden",children:e.jsx("img",{src:`${_}/${s.locationPic}`,alt:"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("h4",{className:"text-[18px] text-slate-700 font-semibold",children:s.title}),e.jsxs("p",{className:"text-[16px] text-slate-500",children:[e.jsx("span",{children:s.startAt}),e.jsx("span",{children:"-"}),e.jsx("span",{children:s.endAt})]})]})]},r))})]}),e.jsx(O,{type:"primary",htmlType:"button",className:"h-[50px] px-[15px] py-[20px] text-[24px] text-white font-semibold",onClick:v,children:"선택 완료"})]})})},Ae=()=>{var R,k,D,I,C,L,$,P,E;const d=V("accessToken");W(te);const[m]=z(),w=parseInt(m.get("tripId")),n=parseInt(m.get("TripReviewId")),f=B(),v=()=>{f(-1)},p=()=>{f(`/report?category=${Q.TRIPREVIEW}&reportTarget=${n}`)},[l,u]=i.useState({}),[c,x]=i.useState({}),[h,g]=i.useState(!1),[y,j]=i.useState(!1),[b,s]=i.useState(!1),r=async()=>{const a="/api/trip-review/otherTripReview";if(s(!0),d)try{const t=await T.get(`${a}?tripReviewId=${n}`);console.log("다른 사람 여행기 조회",t.data);const o=t.data;s(!1),u(o.data)}catch(t){s(!1),console.log("다른 사람 여행기 조회",t)}if(!d)try{const t=await T.get(`${a}?tripReviewId=${n}`);console.log("다른 사람 여행기 조회",t.data);const o=t.data;s(!1),u(o.data)}catch(t){s(!1),console.log("다른 사람 여행기 조회",t)}},N=async()=>{j(!0);try{const a=await T.get(`/api/trip?trip_id=${w}&signed=false`);console.log("여행확인하기",a.data);const t=a.data.data;x(t)}catch(a){console.log(a)}finally{j(!1)}},M=async()=>{const a="/api/trip-review/like",t={tripReviewId:n};try{const o=await S.post(a,t);console.log("여행기 추천",o.data),o.data.code==="200 성공"&&r()}catch(o){console.log("여행기 추천",o)}},U=async()=>{const a={tripReviewId:n};try{const t=await S.delete("/api/trip-review/like",a);console.log("여행기 추천 취소",t.data),t.data.status===200&&r()}catch(t){console.log("여행기 추천 취소",t)}};return i.useEffect(()=>{r(),N()},[]),e.jsxs("div",{children:[e.jsx(q,{icon:"back",onClick:v,title:"여행기",rightContent:e.jsx(J,{})}),e.jsx("section",{className:"flex flex-col px-[32px] py-[30px] gap-[30px]",children:e.jsxs(A,{spinning:b,children:[e.jsx(Z,{slidesPerView:1,spaceBetween:0,loop:!0,className:"mySwiper w-full h-[406px] overflow-hidden",children:l.length>0?(k=(R=l[0])==null?void 0:R.tripReviewPics)==null?void 0:k.map((a,t)=>e.jsx(ee,{className:"max-w-3xl h-[406px] bg-slate-200",children:e.jsx("img",{src:`${F}/${l[0].tripReviewId}/${a}`,alt:"thum",className:"w-full h-full object-cover"})},t)):null}),e.jsx("div",{className:"flex flex-col gap-[10px]",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-[36px] text-slate-700",children:(D=l[0])==null?void 0:D.title}),e.jsxs("ul",{className:"flex gap-[10px] items-center",children:[e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(K,{className:"text-slate-300 text-[18px]"}),e.jsx("p",{className:"text-slate-500 font-bold text-[14px]",children:(I=l[0])==null?void 0:I.recentCount})]}),e.jsxs("li",{className:"flex gap-[5px] items-center cursor-pointer",children:[e.jsx(X,{className:"text-slate-300 text-[18px] focus:text-secondary3 transition-all duration-300"}),e.jsx("button",{type:"button",className:"text-slate-500 font-bold text-[14px]",children:(C=l[0])==null?void 0:C.likeCount})]}),e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(G,{className:"text-slate-300 text-[18px]"}),e.jsxs("p",{className:"text-slate-500 font-bold text-[14px]",children:[" ",(L=l[0])==null?void 0:L.scrapCount]})]})]})]}),e.jsxs("div",{className:"flex gap-[10px]",children:[d&&e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",className:`w-[50px] h-[50px] flex items-center justify-center
                    rounded-full text-[20px]
                   transition-all duration-300
                   ${(($=l[0])==null?void 0:$.likeUser)===1?"text-secondary3 bg-secondary3/10 hover:bg-secondary3/20":"text-slate-500 bg-slate-200 hover:bg-slate-200/85"}`,onClick:()=>{var a;((a=l[0])==null?void 0:a.likeUser)===0?M():U()},children:e.jsx(ae,{})})}),d&&e.jsx("button",{type:"button",className:`w-[50px] h-[50px] flex items-center justify-center
                    rounded-full text-[20px] bg-slate-200 text-slate-500
                   transition-all duration-300
                   hover:bg-slate-200/85`,onClick:p,children:e.jsx(se,{})})]})]})}),e.jsx("div",{children:e.jsx("p",{children:(P=l[0])==null?void 0:P.content})})]})}),e.jsx("section",{children:e.jsx(A,{spinning:y,children:e.jsx("div",{className:"flex flex-col gap-[50px]",children:(E=c==null?void 0:c.days)==null?void 0:E.map((a,t)=>e.jsx(Y,{data:a,newTrip:!1,readOnly:!0},t))})})}),e.jsx("div",{className:"px-8 pb-5 mb-[30px]",children:e.jsxs(O,{type:"primary",variant:"filled",className:"flex gap-[10px] py-[10px] h-auto w-full",onClick:()=>g(!0),classNames:"bg-slate-100",children:[e.jsx(H,{className:"w-[30px] h-[30px] text-white"}),e.jsx("span",{className:"font-semibold text-[24px] text-white",children:"내 여행에 담기"})]})}),h&&e.jsx(le,{openSelectTripModal:h,setOpenSelectTripModal:g,tripLocationList:c==null?void 0:c.tripLocationList,tripReviewId:n})]})};export{Ae as default};
