import{g as A,b as C,u as B,Q as T,W as _,r as w,j as e,a7 as z,B as y,c as p,N as i}from"./index-CXgPt5JN.js";import{e as R,R as D}from"./ReviewItem-BMpRemSJ.js";import{S as L}from"./StrfInfo-DuVrGspu.js";import{S as $}from"./index-DfBx3HSs.js";import"./index-CDNxKOHP.js";import"./index-BIhRtoM_.js";import"./index-BHcAlC-o.js";import"./BottomSheet-B8X0Xgpj.js";import"./proxy-BT939zl-.js";import"./swiper-react-u2QqVARD.js";import"./index-2ZNAj9Vd.js";import"./index-g46somhf.js";import"./index-DVNH3El3.js";import"./Portal-DyoJ0XAQ.js";import"./useId-CFvmNKkm.js";import"./isMobile-B4CO7CVJ.js";import"./motion-COLDN99j.js";import"./roundedArrow-BJ1xfU1K.js";import"./zoom-DXKB7aGh.js";const re=()=>{const m=A("accessToken"),[o]=C(),d=Number(o.get("strfId")),j=Number(o.get("reviewId")),N=Number(o.get("replayId")),u=o.get("type"),x=B(),v=()=>{x(`/business/review?strfId=${d}`)},[t,I]=T(R),h=_(R),[b,n]=w.useState(!1),[f,g]=w.useState(!1),E=async()=>{var a;const r="/api/business/review/create",c={reviewId:j,content:t.reviewReply};n(!0);try{const l=(await p.post(r,c,{headers:{Authorization:`Bearer ${m}`}})).data;return l&&(n(!1),v(),h(),i.success("리뷰가 작성되었습니다")),console.log("대댓글 생성",l),l}catch(s){return p.isAxiosError(s)&&(console.error("Error status:",(a=s.response)==null?void 0:a.status),console.error("Error message:",s.message)),console.log("대댓글 생성",s),i.success("리뷰 작성에 실패했습니다"),n(!1),null}},S=async()=>{const r="/api/business/review/update",c={reviewReplyId:N,content:t.reviewReply};try{const s=(await p.put(r,c,{headers:{Authorization:`Bearer ${m}`}})).data;return s&&(h(),v(),i.success("리뷰 수정을 성공했습니다.")),console.log("대댓글 생성",s),s}catch(a){return console.log("대댓글 생성",a),i.success("리뷰 수정에 실패했습니다."),null}},k=()=>{if(t.reviewReply===""){g(!0);return}u==="create"?E():S()};return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(L,{}),e.jsx("div",{className:"px-4",children:e.jsx("h2",{className:"text-2xl font-semibold text-slate-600",children:u==="create"?"댓글 작성":"댓글 수정"})}),t.userReview&&e.jsx(D,{strfId:d,item:t.userReview}),e.jsx("div",{className:"px-4",children:e.jsxs($,{spinning:b,children:[e.jsx(z,{placeholder:"댓글을 입력해주세요",maxLength:50,style:{resize:"none",height:"27.73vw",padding:"20px"},value:t.reviewReply,onChange:r=>{r.target.value.trim()!==""&&g(!1),I({...t,reviewReply:r.target.value})},status:f?"error":void 0}),e.jsx("p",{className:"text-xs pt-2 text-error",children:f&&"* 내용을 입력해주세요"})]})}),e.jsxs("div",{className:"px-4 py-3 flex gap-3 justify-end",children:[e.jsx(y,{color:"primary",variant:"outlined",className:"text-xl font-semibold px-3 py-1 max-h-[50px] h-[16vw]",onClick:()=>x(-1),children:"취소"}),e.jsx(y,{type:"primary",className:"text-xl font-semibold px-3 py-1 max-h-[50px] h-[16vw]",onClick:k,children:"등록"})]})]})};export{re as default};
