import{u as R,j as e,$,a3 as S,g as C,an as n,r as l,B as I,c as f}from"./index-C93OXIGC.js";import{e as P}from"./index-C-xkmeiy.js";import{a as E}from"./index-CGk2k73P.js";import{a as L}from"./index-2yaZ5Cyw.js";import{S as k}from"./index-JFd191JF.js";import{S as A}from"./index-BTIIt3Y0.js";import"./isMobile-B4CO7CVJ.js";import"./Overflow-CzDwJyB6.js";import"./Portal-CSn-TfAb.js";import"./index-Q7DGeqqa.js";import"./useId-BANbKrPT.js";import"./motion-0KRY6bgR.js";import"./PurePanel-c64yA1Pw.js";import"./useLocale-OHgcCckO.js";import"./useIcons-DKkKQuNP.js";import"./CheckOutlined-3DJXerys.js";import"./DownOutlined-CgRvwqMd.js";const D=({item:s})=>{var i,o;const d=R(),c=()=>{d(`/scheduleboard/scheduleDetail?tripId=${s.tripId}&TripReviewId=${s.tripReviewId}`)};return e.jsxs("div",{className:"flex flex-col gap-4 border-b-8 border-slate-100 px-4 py-6",onClick:c,children:[e.jsxs("section",{className:"flex items-center gap-4 py-6",children:[e.jsx("div",{className:"w-8 aspect-square rounded-full overflow-hidden bg-slate-200",children:e.jsx("img",{src:`${$}/${s.userId}/${s.profilePic}`,alt:s.profilePic,className:"w-full h-full object-cover"})}),e.jsx("p",{className:"text-base text-slate-700 font-semibold",children:s.name})]}),e.jsxs("section",{children:[e.jsx("div",{className:"w-full h-[53.33vw] max-h-[350px] bg-slate-100 rounded-lg overflow-hidden",children:e.jsx("img",{src:`${S}/${s.tripReviewId}/${(i=s.tripReviewPics)==null?void 0:i[0]}`,alt:(o=s.tripReviewPics)==null?void 0:o[0],className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"py-4 flex flex-col gap-4",children:[e.jsx("h3",{className:"text-lg text-slate-700 font-semibold",children:s.title}),e.jsx("p",{className:"text-base text-slate-500 line-clamp-3",children:s.content}),e.jsxs("ul",{className:"flex items-center justify-end gap-3",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"text-slate-300 text-base",children:e.jsx(P,{})}),e.jsx("p",{className:"text-slate-500 font-semibold text-sm",children:s.recentCount})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("i",{className:` text-base ${s.likeUser?"text-secondary3":"text-slate-300"}`,children:e.jsx(E,{})}),e.jsx("p",{className:"text-slate-500 font-semibold text-sm",children:s.likeCount})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"text-slate-300 text-base",children:e.jsx(L,{})}),e.jsx("p",{className:"text-slate-500 font-semibold text-sm",children:s.scrapCount})]})]})]})]})]})},Z=()=>{const s=C("accessToken"),d=[{label:"최신순",value:n.LATEST},{label:"추천순",value:n.POPULAR}],[c,i]=l.useState([]),[o,j]=l.useState(0),[g,h]=l.useState(!0),[x,v]=l.useState(n.LATEST),[p,b]=l.useState(1),[w,m]=l.useState(!1);console.log(c);const N=async()=>{const t="/api/trip-review/allTripReview";if(m(!0),!s)try{const a=(await f.get(`${t}?orderType=${x}&pageNumber=${p}`)).data;return console.log("여행기 리스트 조회",a),a.code==="200 성공"&&(h(a.data.hasMore),i(u=>[...u,...a.data.reviews])),a}catch(r){console.log("여행기 리스트 조회",r)}finally{m(!1)}if(s)try{const a=(await f.get(`${t}?orderType=${x}&pageNumber=${p}`,{headers:{Authorization:`Bearer ${s}`}})).data;return console.log("여행기 리스트 조회",a),a.code==="200 성공"&&(h(a.data.hasMore),i(u=>[...u,...a.data.reviews])),a}catch(r){console.log("여행기 리스트 조회",r)}finally{m(!1)}},T=async()=>{try{const r=(await f.get("/api/trip-review/allTripReviewCount")).data;return j(r.data),r}catch(t){return console.log("여행기 개수",t),null}},y=()=>{b(t=>t+1)};return l.useEffect(()=>{N()},[x,p]),l.useEffect(()=>{T()},[]),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("section",{className:"flex justify-between items-center px-4 py-4 border-b border-t border-slate-100",children:[e.jsxs("p",{className:"font-semibold text-sm text-slate-700",children:["총 ",o==null?void 0:o.toLocaleString(),"건"]}),e.jsx(k,{options:d,defaultValue:n.LATEST,variant:"borderless",className:"text-sm text-slate-700",onChange:t=>v(t)})]}),e.jsxs("section",{children:[e.jsx(A,{spinning:w,children:c.map((t,r)=>e.jsx(D,{item:t},r))}),e.jsx("div",{className:"flex items-center justify-center",children:g&&e.jsx(I,{className:`px-5 py-4 border border-slate-300 \r
        rounded-3xl text-base text-slate-600`,onClick:y,children:"더보기"})})]})]})};export{Z as default};
