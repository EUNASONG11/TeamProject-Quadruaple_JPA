import{g as k,h as S,u as T,k as A,R as B,r as v,j as e,a8 as C,B as h,m as l,w as _}from"./index-LV_9s5-1.js";import{e as w,R as z}from"./ReviewItem-DCB02svx.js";import{S as D}from"./StrfInfo-BVxyddvS.js";import{S as L}from"./index-Bm7FllQO.js";import"./index-Ds3yrZWO.js";import"./BottomSheet-CXhYr7pz.js";import"./ReviewImage-MuHt47Cr.js";import"./swiper-react-Ck51p-jd.js";import"./index-CoXfSCcE.js";import"./index-BsJ66pFJ.js";import"./index-DN57V0sg.js";import"./index-Btv3waz5.js";import"./Portal-CiuFLH_K.js";import"./useId-LGEjO-HJ.js";import"./motion-D8x5Mwwf.js";import"./roundedArrow-D1YheW33.js";import"./zoom-Bx4l_5D1.js";const ee=()=>{const p=k("accessToken"),[a]=S(),m=Number(a.get("strfId")),f=Number(a.get("reviewId")),g=Number(a.get("replayId")),d=a.get("type"),y=T(),x=()=>{y(`/business/review?strfId=${m}`)},[t,R]=A(w),u=B(w),[j,i]=v.useState(!1),I=async()=>{var o;const r="/api/business/review/create",n={reviewId:f,content:t.reviewReply};i(!0);try{const c=(await l.post(r,n,{headers:{Authorization:`Bearer ${p}`}})).data;return c&&(i(!1),x(),u(),_.success("리뷰 작성 완료")),console.log("대댓글 생성",c),c}catch(s){return l.isAxiosError(s)&&(console.error("Error status:",(o=s.response)==null?void 0:o.status),console.error("Error message:",s.message)),console.log("대댓글 생성",s),i(!1),null}},N=async()=>{const r="/api/business/review/update",n={reviewReplyId:g,content:t.reviewReply};try{const s=(await l.put(r,n,{headers:{Authorization:`Bearer ${p}`}})).data;return s&&(u(),x()),console.log("대댓글 생성",s),s}catch(o){return console.log("대댓글 생성",o),null}},b=()=>{d==="create"?I():N()},E=()=>{window.scrollTo({top:0,behavior:"smooth"})};return v.useEffect(()=>{E()},[]),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(D,{}),e.jsx("div",{className:"px-4",children:e.jsx("h2",{className:"text-2xl font-semibold text-slate-600",children:d==="create"?"댓글 작성":"댓글 수정"})}),t.userReview&&e.jsx(z,{strfId:m,item:t.userReview}),e.jsx("div",{className:"px-4",children:e.jsx(L,{spinning:j,children:e.jsx(C,{placeholder:"댓글을 입력해주세요",maxLength:50,style:{resize:"none",height:"27.73vw",padding:"20px"},value:t.reviewReply,onChange:r=>{R({...t,reviewReply:r.target.value})}})})}),e.jsxs("div",{className:"px-4 py-3 flex gap-3 justify-end",children:[e.jsx(h,{color:"primary",variant:"outlined",className:"text-xl font-semibold px-3 py-1 max-h-[50px] h-[16vw]",children:"취소"}),e.jsx(h,{type:"primary",className:"text-xl font-semibold px-3 py-1 max-h-[50px] h-[16vw]",onClick:b,children:"등록"})]})]})};export{ee as default};
