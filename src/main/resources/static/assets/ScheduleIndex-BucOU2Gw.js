import{r as a,g as P,R,u as $,a as O,j as t,I as _,L as D,b as u}from"./index-DB3eQjaF.js";import{T as B,R as M}from"./TitleHeader-DaR7UnBM.js";import{A as g}from"./index-Se5up3L9.js";import{S as f}from"./ScheduleDay-BEpVd7gs.js";import{t as U}from"./tripAtom-CTJPa7nJ.js";import{M as F}from"./MarkerClusterer-B-2czHIc.js";import"./dayjs.min-Ck2CLik8.js";import{U as H}from"./UserIndex-Beqo5kUs.js";import{I as q}from"./index-B30wfAHF.js";import{D as z}from"./index-Q-WIkL0Y.js";import"./index-CTtYMjrs.js";import"./match-BwJlDZ8C.js";import"./button-x43GSXMA.js";import"./useSize-CL4N8q3x.js";import"./pic-Bp3CpqNF.js";import"./BottomModal-CvidPzUl.js";import"./index-gFeoScXN.js";import"./useMergedState-CRVcgrPC.js";import"./index-Chfy1tKF.js";import"./index-CSeeWeAv.js";import"./Portal-cPad4SNO.js";import"./index-CncOcDmE.js";import"./useId-BBTtT7-5.js";import"./ContextIsolator-BsDgCGPW.js";import"./context-D2Tlqc8S.js";import"./zoom-BfpzSntc.js";import"./index-Bro5j5Ov.js";/* empty css                    */import"./UserTrips-BdCQGssn.js";import"./Footer-DTKyr1CX.js";import"./index-BU4NXrqZ.js";import"./index-CrKY0ESG.js";import"./collapse-BbEVqHco.js";import"./index-CG393yrs.js";import"./useLocale-MgMWvS9W.js";import"./swiper-react-DjoWp6rM.js";import"./BaseInput-BY0LxQI1.js";import"./EllipsisOutlined-GYs8w76R.js";import"./PurePanel-B7bAwhhG.js";const G={day:1,weather:"",schedules:[]},J=()=>{P("accessToken");const[l,h]=R(U);a.useEffect(()=>{console.log("trip",l)},[l]);const[j]=$(),o=parseInt(j.get("tripId"));a.useEffect(()=>{h({...l,nowTripId:o})},[]);const c=O(),y=()=>{c(-1)},b=()=>{c(`/schedule/calculation?tripId=${o}`)},v=()=>{c(`/scheduleboard/schedulePost?tripId=${o}`)},[s,p]=a.useState({}),[C,N]=a.useState(!1),[d,m]=a.useState(s.title),[r,k]=a.useState(""),[I,K]=a.useState(!1),[w,S]=a.useState(!1);a.useState(!1),a.useEffect(()=>{console.log("여행 데이터",s)},[s]),a.useEffect(()=>{console.log("링크",r)},[r]),a.useEffect(()=>{console.log("title",d)},[d]);const T=e=>{m(e.target.value)},A=async()=>{try{const e=await u.get(`/api/trip/add-link?trip_id=${o}`);console.log(e.data),k(e.data.data)}catch(e){console.log("초대코드",e)}},E=async()=>{try{await navigator.clipboard.writeText(r),console.log("복사 성공")}catch(e){console.error("복사 실패:",e)}},L=[{label:t.jsxs("div",{onClick:()=>E(),className:"flex flex-col gap-[10px] items-center justify-center",children:[t.jsx("p",{className:"bg-slate-100 px-[15px] py-[10px] rounded-lg text-slate-600",children:r}),t.jsxs("p",{className:"flex items-center gap-1 border-b border-slate-300",children:[t.jsx("i",{className:"text-slate-500",children:t.jsx(F,{})}),t.jsx("span",{className:"text-slate-500",children:"초대코드 복사하기"})]})]}),key:"0"}],x=async()=>{try{const e=await u.get(`/api/trip?trip_id=${o}&signed=true`);console.log("여행확인하기",e.data);const n=e.data.data;p(n),n&&N(!0)}catch(e){console.log(e)}};a.useEffect(()=>{x(),s&&m(s.title)},[]);const i=s.days;return t.jsx("div",{children:C?t.jsxs(t.Fragment,{children:[t.jsx(H,{isOpen:w,onClose:()=>S(!1)}),t.jsx(B,{icon:"back",onClick:y,rightContent:t.jsx(M,{icon1:!1,icon2:!0,icon3Click:v,icon3:!0,icon4:!0})}),t.jsxs("div",{className:"flex flex-col gap-[30px] py-[30px]",children:[t.jsxs("div",{className:"mt-[60px] flex flex-col gap-[10px] px-[32px]",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-[18px] text-slate-700 ",children:[t.jsx("span",{children:s.startAt}),"-",t.jsx("span",{children:s.endAt})]}),t.jsx("button",{type:"button",children:t.jsx(_,{className:"text-[24px] text-slate-300 bg-white"})})]}),I?t.jsx(q,{placeholder:"메모를 입력해주세요.",variant:"borderless",allowClear:!0,onChange:e=>{T(e)}}):t.jsx("h2",{className:"text-[36px] text-slate-700 font-bold",children:s.title})]}),t.jsxs("div",{className:"flex items-center gap-[10px] px-[32px]",children:[t.jsx(z,{menu:{items:L},trigger:["click"],overlayStyle:{marginTop:"10px"},children:t.jsx("a",{onClick:e=>e.preventDefault(),children:t.jsxs("button",{type:"button",className:`flex items-center gap-[10px] \r
                px-[15px] py-[10px] rounded-3xl\r
                text-white bg-primary`,onClick:()=>A(),children:[t.jsx(g,{}),"초대 코드"]})})}),t.jsxs("button",{type:"button",className:`flex items-center gap-[10px] \r
                px-[15px] py-[10px] rounded-3xl\r
                text-slate-500 bg-slate-100`,onClick:b,children:[t.jsx(g,{className:"text-slate-300"}),"가계부"]})]}),t.jsx("div",{className:"flex flex-col gap-[50px]",children:i===null?t.jsx(f,{newTrip:!0,data:G,startAt:s==null?void 0:s.startAt,tripId:o,getTrip:x,setTripData:p}):i==null?void 0:i.map((e,n)=>t.jsx(f,{newTrip:!0,data:e,startAt:s==null?void 0:s.startAt,tripId:o,getTrip:x,setTripData:p},n))})]})]}):t.jsx(D,{})})},Rt=a.memo(J);export{Rt as default};
