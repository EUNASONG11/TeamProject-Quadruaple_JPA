import{M as k,r as o,g as I,u as R,j as e,S as C,U as A,V as T,B as p,c}from"./index-BimvysYt.js";import{u as S}from"./userAtom-DU7sATRD.js";import{L as $}from"./index-DLTftulB.js";import{F as U}from"./Footer-C-9zJy6D.js";/* empty css                    */import{T as B}from"./TitleHeader-BBuSlQzH.js";import{R as E}from"./index-CBWZLvrn.js";import{M as L}from"./index-P3tCNRhE.js";import"./index-CBTeAnO8.js";import"./DockBar-D3mIRaO0.js";import"./index-BPQRvUZ9.js";import"./index-CKWfeYRa.js";import"./searchAtom-D6yePTRh.js";import"./eventsource-Cd5SwtWz.js";import"./dayjs.min-B9EaxONI.js";import"./index-Dq1YK8SL.js";import"./index-Bu3kyb_U.js";import"./index-CqxRxLoj.js";import"./index-DYQH-41S.js";import"./Portal-Bk9kCZLz.js";import"./useId-BXEVvoiT.js";import"./isMobile-B4CO7CVJ.js";import"./motion-DYW1fBvL.js";import"./roundedArrow-IL0Hi0Qw.js";import"./zoom-C5LY8eIZ.js";import"./index-C_D2ZbZh.js";import"./index-CGcwtSLS.js";import"./fade-CgfSO28j.js";import"./Skeleton-DHrpSXvd.js";import"./useLocale-DPSLmQeZ.js";import"./PurePanel-JLGR16VI.js";const he=()=>{const[f,M]=k(S),[O,h]=o.useState([]),[s,u]=o.useState([]),[g,n]=o.useState(!1),r=I("accessToken"),j=async()=>{try{const t=await c.get("/api/user/userInfo",{headers:{Authorization:`Bearer ${r}`}});h(t.data.data)}catch(t){console.log(t)}};console.log("isRecents",s);const i=async()=>{try{const t=await c.get("/api/recent/list",{headers:{Authorization:`Bearer ${r}`}});u(t.data.data),console.log("✅  isRecents:",t.data.data)}catch(t){console.log("✅  error:",t)}},N=async()=>{try{const t=await c.patch("/api/recent/hide/all",{},{headers:{Authorization:`Bearer ${r}`}});i()}catch(t){console.log("✅  error:",t)}},b=async t=>{console.log("isRecents.strfId",t.strfId,r);const l={strf_id:t.strfId};try{const a=await c.patch(`/api/recent/hide?strf_id=${t.strfId}`,{...l},{headers:{Authorization:`Bearer ${r}`}});console.log("숨기기 결과",a.data),i()}catch(a){console.log("✅  error:",a)}};o.useEffect(()=>{f.accessToken&&j()},[]),o.useEffect(()=>{i()},[]);const v=()=>n(!0),d=()=>{N(),n(!1)},x=()=>n(!1),w={TOUR:"관광지",FEST:"축제",STAY:"숙소",RESTAUR:"맛집"},m=R();return e.jsxs("div",{children:[e.jsx(B,{icon:"back",title:"최근 본 목록",onClick:()=>{m(-1)}}),s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx($,{className:"w-full text-slate-300 text-8xl mb-5 "}),e.jsx("p",{className:"text-2xl text-slate-400 font-semibold",children:"최근에 본 목록이 없습니다."})]}):e.jsxs("div",{className:"relative flex flex-col gap-6 px-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between py-[14px] border-b-[1px] border-slate-100 ",children:[e.jsxs("p",{className:"text-sm font-semibold text-slate-700",children:["총 ",s.length,"개"]}),e.jsx("button",{onClick:v,className:"text-sm font-light text-slate-400",children:"전체 삭제"})]}),s==null?void 0:s.map(t=>{var l,a;return e.jsxs("li",{className:"flex gap-3 items-start cursor-pointer",onClick:()=>m(`/contents/index?strfId=${t.strfId}`),children:[e.jsxs("div",{className:"w-32 min-w-32 aspect-square bg-slate-200 rounded-lg overflow-hidden relative",children:[e.jsx("img",{src:`${C}/${t.strfId}/${t.strfPic}`,alt:t.title,className:"w-full h-full object-cover"}),e.jsx(A,{className:"text-secondary3 text-xl absolute top-2 right-2"})]}),e.jsxs("div",{className:"flex flex-col gap-[5px] mr-auto",children:[e.jsx("div",{className:"flex gap-[5px] items-center ",children:e.jsx("h3",{className:"text-lg font-medium text-slate-700",children:t.strfTitle})}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-slate-500",children:[w[t.category]||t.category," ·"," ",t.locationName]})}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(E,{disabled:!0,allowHalf:!0,value:t.ratingAvg,className:"flex items-center custom-star-wish custom-star"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["(",(l=t.reviewCnt)==null?void 0:l.toLocaleString(),")"]})]}),e.jsxs("div",{className:"flex gap-1 items-center text-sm",children:[e.jsx(T,{className:"text-slate-400 text-lg"}),e.jsx("p",{className:"text-slate-500",children:(a=t.wishCnt)==null?void 0:a.toLocaleString()})]})]}),e.jsx("button",{onClick:y=>{y.stopPropagation(),b(t)},className:"text-slate-400 text-sm w-9 text-right",children:"삭제"})]},t.strfId)})]}),e.jsx(U,{}),e.jsx(L,{open:g,onOk:d,onCancel:x,closable:!1,footer:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{onClick:x,className:"w-full h-14 border-0 rounded-none shadow-none",children:"취소"},"back"),e.jsx("span",{className:"text-slate-300 font-thin",children:"|"}),e.jsx(p,{onClick:d,className:"w-full h-14 border-none shadow-none",children:"확인"},"submit")]})],children:e.jsx("p",{className:"text-lg text-slate-700 font-semibold text-center py-6",children:"최근 본 목록을 전체 삭제하시겠습니까 ?"})})]})};export{he as default};
