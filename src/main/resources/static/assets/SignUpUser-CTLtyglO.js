import{C as R,j as e,r,u as Y,f as x,e as i,B as Z}from"./index-Cwx4I7Vi.js";import{C as o}from"./Checkbox-BcUCEU_c.js";import{U as f}from"./api-B-eoqegl.js";import{T as S}from"./TitleHeader-B_AiqjDt.js";import"./dayjs.min-DnVSsyDC.js";import{F as a}from"./index-CrprEvdX.js";import{S as H}from"./index-DlIUb5UQ.js";import{S as g}from"./index-CWn9-xbr.js";import"./index-CWBfKhhN.js";import"./index-zy4pIAEY.js";import"./index-C1nPTQe_.js";import"./Portal-SJsC_TZ1.js";import"./collapse-BbEVqHco.js";import"./zoom-D6z5ctYs.js";import"./Keyframes-C9Oo5sJi.js";import"./index-BBJIY0lA.js";import"./index-G7OR39Gq.js";import"./index-B7BtatMF.js";import"./useId-cPQzkJ8H.js";import"./useZIndex-0xqzHicI.js";import"./useLocale-Dwzm1w12.js";import"./ExclamationCircleFilled-Dk5DvsjU.js";import"./KeyCode-DNlgD2sM.js";import"./Overflow-CYHc8NuW.js";import"./PurePanel-I9Hrkew6.js";import"./useIcons-DeEXsX5s.js";import"./CheckOutlined-CC4htO-i.js";import"./CloseOutlined-GwKmxF7X.js";const K=R.memo(({policyType:n,setShowPolicy:p})=>e.jsxs("div",{className:"pt-[60px] max-w-3xl w-[768px] mx-auto h-screen fixed z-50 top-0 right-[50%] translate-x-[50%] bg-white",children:[e.jsx(S,{icon:"close",title:"약관",onClick:()=>{p(!1)}}),e.jsxs("h1",{className:"text-[24px] font-bold text-center",children:["약관 ",n]})]})),Q={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:24}}},W={wrapperCol:{xs:{span:24,offset:0},sm:{span:24,offset:0}}};o.Group;const Pe=()=>{const[n]=a.useForm(),[p,X]=r.useState("vertical"),[ee,v]=r.useState({}),[y,te]=r.useState(""),[j,b]=r.useState([]),[$,w]=r.useState(!1),[c,m]=r.useState(null),[q,F]=r.useState("required"),[I,C]=r.useState(!1),[N,P]=r.useState(!1),A=Y(),D=()=>{A("/signin")},E=r.useCallback(s=>{b(s),w(s.length>4)},[]),L=r.useCallback(s=>{const t=s.target.checked;b(t?["required-1","required-2","required-3","required-4","option-1"]:[]),w(t)},[]),U=r.useCallback(async s=>{console.log("아이디 중복 체크 시도"),m("validating");try{const t=await x.get(`${f.checkDuplicatedEmail}${s.target.value}`);t.data.data===!0?m("success"):m("error"),console.log("아이디 중복 체크",t.data)}catch(t){console.log(t),m("error")}},[]);r.useCallback(async s=>{console.log("이메일 발송 데이터:",s);try{const t=await x.get(`${f.sendMail}${s.email}`,s);console.log("이메일 발송 결과:",t.data)}catch(t){console.log(t)}},[]);const T=async s=>{const t=new FormData;t.append("p",new Blob([JSON.stringify(s)],{type:"application/json"})),y&&t.append("profilePic",y),console.log("JSON 데이터:",s),t.forEach((l,h)=>{console.log(`${h}:`,l)});try{const l=await x.post(`${f.signUpUser}`,t,{headers:{"Content-Type":"multipart/form-data"}});console.log("회원가입 성공:",l.data)}catch(l){console.error("회원가입 실패:",l)}},B=s=>{const{year:t,month:l,day:h}=s.birth,V=`${t}-${l}-${h}`,{confirm:se,...u}=s,G=j.filter(J=>J.includes("required"));u.tell&&(u.tell=M(u.tell));const k={...u,birth:V};G.length===4&&c==="success"?T(k):P(!0),v(k)},d=r.useCallback(s=>{F(s.target.value),C(!0)},[]),_=Array.from({length:100},(s,t)=>({value:new Date().getFullYear()-t,label:`${new Date().getFullYear()-t}년`})),O=Array.from({length:12},(s,t)=>({value:t+1,label:`${t+1}월`})),z=Array.from({length:31},(s,t)=>({value:t+1,label:`${t+1}일`}));r.useEffect(()=>{n.setFieldsValue({birthday:{year:1999,month:1,day:1}})},[n]);const M=s=>{if(!s)return s;const t=s.replace(/[^\d]/g,""),l=t.length;return l<=3?t:l<=7?`${t.slice(0,3)}-${t.slice(3)}`:`${t.slice(0,3)}-${t.slice(3,7)}-${t.slice(7,11)}`};return e.jsxs(e.Fragment,{children:[e.jsx(S,{icon:"back",title:"회원가입",onClick:D}),e.jsx("div",{className:"w-full",children:e.jsxs(a,{...Q,form:n,name:"register",onFinish:s=>B(s),className:"w-full px-4",layout:p,scrollToFirstError:!0,children:[e.jsx(a.Item,{name:"name",label:"이름",className:"custom-form-item",rules:[{required:!0,message:"이름은 필수 입력 항목입니다.",whitespace:!0}],children:e.jsx(i,{placeholder:"이름을 입력하세요",style:{height:"60px"}})}),e.jsx(a.Item,{name:"email",label:"이메일",className:"custom-form-item",rules:[{type:"email",message:"이메일 형식에 맞지 않는 메일 주소입니다. 다시 입력해주세요."},{required:!0,message:"이메일은 필수 입력 항목입니다."}],hasFeedback:!0,validateStatus:c,help:c==="error"?"이미 사용 중인 이메일입니다.":c==="success"?"사용 가능한 이메일입니다.":null,children:e.jsx(i,{onBlur:s=>{s.target.value&&U(s)},placeholder:"이메일을 입력하세요",style:{height:"60px"}})}),e.jsx(a.Item,{name:"pw",label:"비밀번호",className:"custom-form-item",rules:[{required:!0,message:"비밀번호는 필수 입력 항목입니다."},{pattern:/^(?=.*[A-Za-z])(?=.*[\d~!@#$%^&*()_+=])[A-Za-z\d~!@#$%^&*()_+=]{8,20}$/,message:"비밀번호는 반드시 8-20자 이내 숫자, 특수문자(), 영문자 중 2가지 이상을 조합하셔야 합니다"}],children:e.jsx(i.Password,{placeholder:"비밀번호를 입력하세요",style:{height:"60px"}})}),e.jsx(a.Item,{name:"confirm",label:"비밀번호 확인",className:"custom-form-item",dependencies:["password"],rules:[{required:!0,message:"비밀번호 확인은 필수 입력 항목입니다."},({getFieldValue:s})=>({validator(t,l){return!l||s("pw")===l?Promise.resolve():Promise.reject(new Error("비밀번호가 일치하지 않습니다. 다시 입력해주세요."))}})],children:e.jsx(i.Password,{placeholder:"비밀번호를 다시 한번 입력하세요",style:{height:"60px"}})}),e.jsx(a.Item,{name:"tell",label:"휴대폰 번호",rules:[{pattern:/^01([0|1|6|7|8|9])-?([0-9]{3,4})-?([0-9]{4})$/,message:"올바른 휴대폰 번호 형식이 아닙니다. (예: 010-1234-5678)"}],help:"* 휴대폰 번호는 광고 또는 서비스 이용을 위한 항목입니다.",children:e.jsx(i,{placeholder:"000-0000-0000",style:{height:"60px"},maxLength:13})}),e.jsx(a.Item,{name:"birth",label:"생일",className:"custom-form-item",help:"* 쿠폰 발급과 같은 서비스를 위한 항목입니다.",style:{paddingBottom:"20px"},children:e.jsxs(H.Compact,{block:!0,children:[e.jsx(a.Item,{name:["birth","year"],noStyle:!0,children:e.jsx(g,{placeholder:"년도",style:{width:"33%",height:"60px"},options:_})}),e.jsx(a.Item,{name:["birth","month"],noStyle:!0,children:e.jsx(g,{placeholder:"월",style:{width:"33%",height:"60px"},options:O})}),e.jsx(a.Item,{name:["birth","day"],noStyle:!0,children:e.jsx(g,{placeholder:"일",style:{width:"34%",height:"60px"},options:z})})]})}),e.jsx(o,{onChange:L,checked:$,className:"bg-slate-100 w-full font-medium text-lg  py-5 px-3 rounded-lg my-4 text-slate-700",children:"전체 동의합니다."}),e.jsxs(o.Group,{value:j,onChange:E,className:"flex flex-col gap-2 w-full px-3",children:[e.jsx(o,{value:"required-1",children:"[필수] 만 14세 이상입니다."}),e.jsxs("div",{className:"w-full flex justify-between",children:[e.jsx(o,{value:"required-2",className:"underline",children:"[필수] 서비스 이용약관"}),e.jsx("button",{type:"button",className:"text-xs text-slate-300",value:"required-2",onClick:d,children:"보기"})]}),e.jsxs("div",{className:"w-full flex justify-between",children:[e.jsx(o,{value:"required-3",className:"underline",children:"[필수] 개인정보 수집 및 이용 동의"}),e.jsx("button",{type:"button",className:"text-xs text-slate-300",value:"required-3",onClick:d,children:"보기"})]}),e.jsxs("div",{className:"w-full flex justify-between",children:[e.jsx(o,{value:"required-4",className:"underline",children:"[필수] 위치서비스 이용 동의"}),e.jsx("button",{type:"button",className:"text-xs text-slate-300",value:"required-4",onClick:d,children:"보기"})]}),e.jsx(o,{value:"option-1",children:"[선택] 이벤트 및 할인 혜택 안내 동의"})]}),N?e.jsx("p",{className:`${N?"text-secondary3":"text-white"} text-[14px] font-medium`,children:"* 필수 약관을 모두 동의해야 제출 가능합니다."}):null,I?e.jsx(K,{policyType:q,setShowPolicy:C}):null,e.jsx(a.Item,{...W,children:e.jsx(Z,{type:"primary",htmlType:"submit",block:!0,className:"text-base py-3 !h-auto mt-4 mb-12",children:"다음"})})]})})]})};export{Pe as default};
