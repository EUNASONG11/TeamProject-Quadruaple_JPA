import{u as S,j as e,a1 as $,a3 as C,g as I,an as n,r as l,B as P,c as f}from"./index-Ca07tLEd.js";import{e as E}from"./index-CSW4K44K.js";import{a as L}from"./index-CSRAnKVH.js";import{a as k}from"./index-Cyf1i0Ot.js";import{S as A}from"./index-oESjFo5O.js";import{S as D}from"./index-iREkJJLb.js";import"./isMobile-B4CO7CVJ.js";import"./Overflow-DimcLmKk.js";import"./Portal-bFZPeb1_.js";import"./index-C1FW6RQ6.js";import"./useId-Bji8iwmo.js";import"./motion-BEBWFKgD.js";import"./PurePanel-DeZC3cql.js";import"./useLocale-DUSaQ6sR.js";import"./useIcons-D8Xo9qVc.js";import"./CheckOutlined-BihJn51r.js";import"./DownOutlined-CZ6lxLXu.js";const M=({item:s})=>{var o,i;const d=S(),c=()=>{d(`/scheduleboard/scheduleDetail?tripId=${s.tripId}&TripReviewId=${s.tripReviewId}`)};return e.jsxs("div",{className:"flex flex-col gap-4 border-b-8 border-slate-100 px-4 py-6",onClick:c,children:[e.jsxs("section",{className:"flex items-center gap-4 py-6",children:[e.jsx("div",{className:"w-8 aspect-square rounded-full overflow-hidden bg-slate-200",children:e.jsx("img",{src:`${$}/${s.userId}/${s.profilePic}`,alt:s.profilePic,className:"w-full h-full object-cover"})}),e.jsx("p",{className:"text-base text-slate-700 font-semibold",children:s.name})]}),e.jsxs("section",{children:[e.jsx("div",{className:"w-full h-[53.33vw] max-h-[350px] bg-slate-100 rounded-lg overflow-hidden",children:e.jsx("img",{src:`${C}/${s.tripReviewId}/${(o=s.tripReviewPics)==null?void 0:o[0]}`,alt:(i=s.tripReviewPics)==null?void 0:i[0],className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"py-4 flex flex-col gap-4",children:[e.jsx("h3",{className:"text-lg text-slate-700 font-semibold",children:s.title}),e.jsx("p",{className:"text-base text-slate-500 line-clamp-3",children:s.content}),e.jsxs("ul",{className:"flex items-center justify-end gap-3",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"text-slate-300 text-base",children:e.jsx(E,{})}),e.jsx("p",{className:"text-slate-500 font-semibold text-sm",children:s.recentCount})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("i",{className:` text-base ${s.likeUser?"text-secondary3":"text-slate-300"}`,children:e.jsx(L,{})}),e.jsx("p",{className:"text-slate-500 font-semibold text-sm",children:s.likeCount})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"text-slate-300 text-base",children:e.jsx(k,{})}),e.jsx("p",{className:"text-slate-500 font-semibold text-sm",children:s.scrapCount})]})]})]})]})]})},ee=()=>{const s=I("accessToken"),d=[{label:"최신순",value:n.LATEST},{label:"추천순",value:n.POPULAR}],[c,o]=l.useState([]),[i,j]=l.useState(0),[g,h]=l.useState(!0),[x,v]=l.useState(n.LATEST),[p,b]=l.useState(1),[w,m]=l.useState(!1);console.log(c);const N=async()=>{const t="/api/trip-review/allTripReview";if(m(!0),!s)try{const a=(await f.get(`${t}?orderType=${x}&pageNumber=${p}`)).data;return console.log("여행기 리스트 조회",a),a.code==="200 성공"&&(h(a.data.hasMore),o(u=>[...u,...a.data.reviews])),a}catch(r){console.log("여행기 리스트 조회",r)}finally{m(!1)}if(s)try{const a=(await f.get(`${t}?orderType=${x}&pageNumber=${p}`,{headers:{Authorization:`Bearer ${s}`}})).data;return console.log("여행기 리스트 조회",a),a.code==="200 성공"&&(h(a.data.hasMore),o(u=>[...u,...a.data.reviews])),a}catch(r){console.log("여행기 리스트 조회",r)}finally{m(!1)}},y=async()=>{try{const r=(await f.get("/api/trip-review/allTripReviewCount")).data;return j(r.data),r}catch(t){return console.log("여행기 개수",t),null}},T=t=>{v(t),o([])},R=()=>{b(t=>t+1)};return l.useEffect(()=>{N()},[x,p]),l.useEffect(()=>{y()},[]),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("section",{className:"flex justify-between items-center px-4 py-4 border-b border-t border-slate-100",children:[e.jsxs("p",{className:"font-semibold text-sm text-slate-700",children:["총 ",i==null?void 0:i.toLocaleString(),"건"]}),e.jsx(A,{options:d,defaultValue:n.LATEST,variant:"borderless",className:"text-sm text-slate-700",onChange:t=>T(t)})]}),e.jsxs("section",{children:[e.jsx(D,{spinning:w,children:c.map((t,r)=>e.jsx(M,{item:t},r))}),e.jsx("div",{className:"flex items-center justify-center py-5",children:g&&e.jsx(P,{className:`px-5 py-4 border border-slate-300 \r
        rounded-3xl text-base text-slate-600`,onClick:R,children:"더보기"})})]})]})};export{ee as default};
