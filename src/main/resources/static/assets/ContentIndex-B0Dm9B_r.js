import{r as i,j as e,a_ as G,am as Q,B as b,n as V,w as C,b9 as W,a2 as X,a3 as q,a4 as Y,Z as D,aa as ee,k as se,q as te,u as le,h as ae}from"./index-Bm9G2PMV.js";import{j as w}from"./jwt-Dn912jOj.js";import{o as re,d as ie,F as Z,p as oe}from"./match-B5cQztbu.js";import{p as J,f as ce}from"./index-C5zS-AqD.js";import{a as ne}from"./index-CLNrjMx3.js";import{L as U}from"./index-BkaPrlqb.js";import{R as de}from"./ReviewImage-67IizvT4.js";/* empty css                    */import{R as xe}from"./index-8R5iMGzs.js";import{a as f,K as me,b as N,u as pe,M as ue}from"./MarkerClusterer-CN--b_2d.js";import{a as fe}from"./index-BnAqd88S.js";import{P as he}from"./index-D-yQF2EE.js";import{t as ge}from"./tripAtom-7MqWoO1T.js";import{M as je}from"./index-BLpFDF6V.js";import{T as be}from"./index-Dw5nKOw-.js";import"./index-DeqWFgCu.js";import"./index-BaGKYDlI.js";import"./index-DmEfB633.js";import"./index-C9KCZpy3.js";import"./swiper-react-Bl7aMMMp.js";import"./index-ylnYrNX2.js";import"./index-D4xBV9bV.js";import"./Portal-DxuW4Xz7.js";import"./useId-CZlJin9A.js";import"./motion-DRcDUBp1.js";import"./roundedArrow-CubeYIpZ.js";import"./zoom-K_8YKqxC.js";import"./Skeleton-CiOXL65A.js";import"./useLocale-D2xSzVRw.js";import"./index-Be5biOyE.js";import"./fade-CmhG3U0-.js";import"./PurePanel-BxV2mXmV.js";import"./EllipsisOutlined-C1sz4Ssr.js";import"./Overflow-CM5TO8zT.js";const we=({strfId:l})=>{const[t,d]=i.useState(),a=async()=>{try{const s=await w.get(`/api/detail/amenity?strf_id=${l}&category=숙소`);d(s.data.data),console.log("편의시설 조회",s.data.data)}catch(s){console.log("편의시설 조회",s)}};return i.useEffect(()=>{a()},[]),e.jsxs("div",{className:"px-4 my-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-slate-700 text-xl",children:"편의시설 및 서비스"}),e.jsxs("button",{className:"flex items-center gap-[6px] text-sm text-slate-400",children:["더보기 ",e.jsx(G,{className:"text-xl"})]})]}),e.jsx("ul",{className:"grid grid-flow-col gap-4 overflow-hidden w-full h-[90px] mt-3",children:t==null?void 0:t.map(s=>e.jsxs("li",{className:"min-w-14 flex flex-col items-center justify-center gap-[6px] text-slate-700",children:[e.jsx("i",{className:"text-2xl ",children:re(s.amenityId??0)}),e.jsx("p",{children:s.amenityTitle})]},s.amenityId))})]})},Ne=({strfId:l})=>{const[t,d]=i.useState(),a=async()=>{try{const s=await w.get(`/api/detail/menu?strf_id=${l}`);d(s.data.data),console.log("상품조회-메뉴",s.data.data)}catch(s){console.log("상품조회-메뉴",s)}};return i.useEffect(()=>{a()},[]),e.jsxs("div",{className:"mt-3 ",children:[e.jsxs("div",{className:"px-4",children:[e.jsx("button",{className:"w-full border border-slate-300 rounded-lg py-3 text-base text-slate-700 mb-3",children:"01.22(수)~01.23(목)"}),e.jsx("button",{className:"w-full border border-slate-300 rounded-lg py-3 text-base text-slate-700 mb-3",children:"성인 2"})]}),e.jsx("ul",{children:t==null?void 0:t.map(s=>e.jsxs("li",{className:"py-5 px-4 border-b-[10px] border-slate-100 last:border-b-0",children:[e.jsx("i",{children:e.jsx("img",{src:`${Q}/${l}/menu/${s==null?void 0:s.menuPic}`,alt:s==null?void 0:s.menuTitle,className:"w-full aspect-[2/1] object-cover rounded-lg"})}),e.jsxs("div",{className:"my-3",children:[e.jsx("h2",{className:"text-2xl text-slate-700 font-semibold",children:s.menuTitle}),e.jsxs("p",{className:"flex items-center gap-[6px] text-slate-500 text-sm my-1",children:[e.jsx(J,{className:"text-base"}),"입실 ",s.openCheckIn.replace(/:\d{2}$/,"")," - 퇴실",s.closeCheckIn.replace(/:\d{2}$/,"")]}),e.jsxs("p",{className:"flex items-center gap-[6px] text-slate-500 text-sm ",children:[e.jsx(ne,{className:"text-base"}),"기준 ",s.recomCapacity,"인 / 최대 ",s.maxCapacity,"인"]}),e.jsxs("div",{className:"w-full border-t border-slate-100 mt-3 pt-3 flex justify-between items-center",children:[e.jsxs("span",{className:"text-xl text-slate-700 font-semibold",children:[s.menuPrice.toLocaleString(),"원"]}),e.jsx(b,{type:"primary",className:"text-base py-2 px-4 h-auto rounded-lg",children:"예약하기"})]})]})]},s.menuId))})]})},ye=({strfId:l,contentData:t})=>{console.log("contentData",t);const[d,a]=i.useState(null),[s,c]=i.useState([]),[p,u]=i.useState(0),[h,o]=i.useState(!1),n=i.useRef(null);i.useEffect(()=>{console.log("리뷰 목록:",s)},[s]),i.useEffect(()=>{console.log("reviewIndex:",p)},[p]);const g=i.useCallback(async()=>{console.log("지금 보내는 start_idx",p);try{const r=await w.get(`/api/review?strf_id=${l}&start_idx=${p}`);console.log("리뷰 불러오기:",r.data),c([...s,...r.data])}catch(r){console.log("리뷰 불러오기:",r)}},[p,s,l]);return i.useEffect(()=>{g()},[p]),i.useEffect(()=>{if(n.current){const r=n.current,m=parseInt(window.getComputedStyle(r).lineHeight,4);o(r.scrollHeight>m*4)}},[]),e.jsxs("div",{children:[e.jsx("p",{children:"개의 리뷰"}),s?e.jsx("ul",{children:s==null?void 0:s.map((r,m)=>e.jsxs("li",{className:"flex flex-col gap-3 py-8 border-b border-slate-200 px-4",children:[e.jsxs("div",{className:"flex flex-col gap-[6px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:e.jsx("img",{src:`${V}/${r.writerUserId}/${r.writerUserPic}`,alt:"pofilePic",className:"w-full h-full object-cover"})}),e.jsx("p",{className:"font-semibold text-slate-700 text-base",children:r.writerUserName})]}),e.jsxs("div",{className:"flex gap-[6px] items-center",children:[e.jsx(U,{className:"text-base text-slate-300"}),e.jsx("p",{className:"font-semibold text-sm text-slate-500",children:r.userWriteReviewCnt})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-[6px]",children:[e.jsx(xe,{disabled:!0,count:5,value:r.rating,className:"custom-review-rate"}),e.jsx("p",{className:"font-semibold text-sm text-slate-700",children:r.rating})]}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-slate-500",children:r.reviewWriteDate.split(" ")[0].replace(/-/g,".")})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm tracking-tight ${m===d?"":"line-clamp-3"}`,ref:n,children:r.content}),h&&e.jsx("button",{type:"button",className:"text-primary p-0 text-base font-semibold",onClick:()=>a(m===d?null:m),children:m===d?"접기":"더보기"})]}),e.jsx(de,{imgArr:r.reviewPic,reviewId:r.reviewId})]},m))}):e.jsx("ul",{children:e.jsx("li",{className:"flex flex-col gap-[20px] py-[30px] border-b border-slate-200"})}),s.length>0?e.jsx("button",{type:"button",className:"w-full py-[20px] rounded-lg border border-slate-300",onClick:()=>u(r=>r+10),children:"리뷰 더보기"}):e.jsxs("div",{className:"flex flex-col gap-[20px] justify-center items-center",children:[e.jsx("i",{className:"text-slate-300 text-[100px]",children:e.jsx(U,{})}),e.jsx("p",{className:"text-slate-400 text-[20px]",children:"리뷰가 없습니다."})]})]})},ve=i.memo(ye),ke=C.forwardRef(function(t,d){let{map:a,position:s,marker:c,children:p,altitude:u,disableAutoPan:h,range:o,removable:n,zIndex:g,onCreate:r}=t;const m=i.useMemo(()=>{const y=document.createElement("div");return y.style.display="none",new kakao.maps.InfoWindow({altitude:u,disableAutoPan:h,range:o,removable:n,zIndex:g,content:y,position:s})},[h,n]),j=i.useMemo(()=>m.getContent(),[m]);return i.useImperativeHandle(d,()=>m,[m]),i.useLayoutEffect(()=>(m.open(a,c),()=>{m.close()}),[a,c]),i.useLayoutEffect(()=>{r&&r(m)},[m,r]),f(m,"setPosition",s),f(m,"setAltitude",u),f(m,"setRange",o),f(m,"setZIndex",g),W.createPortal(p,j.parentElement??j)}),Me=C.forwardRef(function(t,d){let{map:a,position:s,children:c,altitude:p,clickable:u,draggable:h,image:o,infoWindowOptions:n,onCreate:g,onClick:r,onDragEnd:m,onDragStart:j,onMouseOut:y,onMouseOver:R,opacity:S,range:k,title:M,zIndex:P}=t;const v=i.useContext(me),$=i.useMemo(()=>{var I,E,A,L,T,z,_,O,H,F,B,K;return o&&new kakao.maps.MarkerImage(o.src,new kakao.maps.Size(o.size.width,o.size.height),{alt:(I=o.options)==null?void 0:I.alt,coords:(E=o.options)==null?void 0:E.coords,offset:((A=o.options)==null?void 0:A.offset)&&new kakao.maps.Point((L=o.options)==null?void 0:L.offset.x,(T=o.options)==null?void 0:T.offset.y),shape:(z=o.options)==null?void 0:z.shape,spriteOrigin:((_=o.options)==null?void 0:_.spriteOrigin)&&new kakao.maps.Point((O=o.options)==null?void 0:O.spriteOrigin.x,(H=o.options)==null?void 0:H.spriteOrigin.y),spriteSize:((F=o.options)==null?void 0:F.spriteSize)&&new kakao.maps.Size((B=o.options)==null?void 0:B.spriteSize.width,(K=o.options)==null?void 0:K.spriteSize.height)})},[JSON.stringify(o)]),x=i.useMemo(()=>new kakao.maps.Marker({altitude:p,clickable:u,draggable:h,image:$,opacity:S,range:k,title:M,zIndex:P,position:s}),[]);return i.useImperativeHandle(d,()=>x,[x]),i.useLayoutEffect(()=>v?(v.addMarker(x,!0),()=>v.removeMarker(x,!0)):(x.setMap(a),()=>x.setMap(null)),[a,v,x]),i.useLayoutEffect(()=>{g&&g(x)},[x,g]),f(x,"setPosition",s),f(x,"setImage",$),f(x,"setAltitude",p),f(x,"setClickable",u),f(x,"setDraggable",h),f(x,"setOpacity",S),f(x,"setRange",k),f(x,"setRange",k),f(x,"setTitle",M),f(x,"setTitle",M),f(x,"setZIndex",P),N(x,"click",r),N(x,"dragstart",j),N(x,"dragend",m),N(x,"mouseout",y),N(x,"mouseover",R),c?e.jsx(ke,{position:s,map:a,marker:x,altitude:n==null?void 0:n.altitude,disableAutoPan:n==null?void 0:n.disableAutoPan,range:n==null?void 0:n.range,removable:n==null?void 0:n.removable,zIndex:n==null?void 0:n.zIndex,children:c}):null}),Ie=C.forwardRef(function(t,d){let{position:a,...s}=t;const c=pe("MapMarker"),p=i.useMemo(()=>"lat"in a?new kakao.maps.LatLng(a.lat,a.lng):new kakao.maps.Coords(a.x,a.y).toLatLng(),[a.lat,a.lng,a.x,a.y]);return e.jsx(Me,{map:c,position:p,...s,ref:d})}),Ce=({contentData:l})=>{const[t,d]=i.useState(!1);i.useState({lat:0,lng:0});const a={lat:(l==null?void 0:l.latit)||35.868358,lng:(l==null?void 0:l.longitude)||128.593778};return i.useEffect(()=>{const s=document.createElement("script");return s.async=!0,s.src="//dapi.kakao.com/v2/maps/sdk.js?appkey=1227efa5c91b2ace09ab915e643a15c9&autoload=false",s.addEventListener("load",()=>{window.kakao.maps.load(()=>{d(!0)})}),document.head.appendChild(s),()=>{document.head.removeChild(s)}},[]),t?e.jsx("div",{children:e.jsx(ue,{center:a,style:{width:"100%",height:"200px",borderRadius:"8px"},level:5,children:e.jsx(Ie,{position:a})})}):e.jsx("div",{children:"지도를 불러오는 중입니다..."})},Re=i.memo(Ce),Se=({contentData:l})=>{const[t,d]=i.useState(!1),[a,s]=i.useState(!1),c=i.useRef(null);return i.useEffect(()=>{c.current&&s(c.current.scrollHeight>c.current.clientHeight)},[l==null?void 0:l.detail]),e.jsxs("div",{children:[e.jsxs("section",{className:"my-6 px-4",children:[e.jsx("h3",{className:"font-semibold text-slate-700 text-xl mb-4",children:"소개"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("p",{ref:c,className:`text-base text-slate-500 ${t?"":"line-clamp-5"}`,children:l==null?void 0:l.detail}),a&&!t&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white/100 to-white/0"})]}),a&&e.jsx(b,{onClick:()=>d(p=>!p),className:"w-full h-auto py-[14px] border border-slate-300 rounded-lg",children:t?"숨기기":"펼치기"})]}),e.jsx("section",{className:"w-full h-[10px] bg-slate-100"}),e.jsxs("section",{className:"my-6 px-4",children:[e.jsx("h3",{className:"font-semibold text-slate-700 text-xl mb-4",children:"위치"}),e.jsx(Re,{contentData:l}),e.jsx("div",{children:e.jsxs("dl",{className:"mt-4 px-4 py-6 bg-slate-50 rounded-lg",children:[e.jsx("dt",{className:"text-base text-slate-700 font-semibold float-left mr-3",children:"주소"}),e.jsxs("dd",{className:"text-base text-slate-500 mb-1",children:["(",l==null?void 0:l.post,") ",l==null?void 0:l.address]}),e.jsx("dt",{className:"text-base text-slate-700 font-semibold float-left mr-3",children:"전화"}),e.jsx("dd",{className:"text-base text-slate-500 mb-1",children:"062-610-7000"}),e.jsx("dt",{className:"text-base text-slate-700 font-semibold float-left mr-3",children:"사업자번호"}),e.jsx("dd",{className:"text-base text-slate-500",children:"410-86-60209"})]})})]})]})},Pe=({strfId:l,contentData:t})=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("img",{src:`${X}/${l}/${t==null?void 0:t.strfPics[0].strfPic}`,alt:(t==null?void 0:t.strfTitle)||""})}),e.jsxs("div",{className:"px-4 py-3 flex flex-col gap-2",children:[e.jsx("p",{className:"text-sm text-slate-500 -mb-[6px]",children:ie(t==null?void 0:t.category)}),e.jsx("h2",{className:"text-2xl text-slate-700 font-semibold",children:t==null?void 0:t.strfTitle}),e.jsxs("p",{className:"text-sm text-slate-500 flex items-center gap-[6px]",children:[e.jsx(Z,{className:" text-slate-300"}),t==null?void 0:t.address]}),e.jsxs("ul",{className:"flex items-center gap-[6px]",children:[e.jsx("li",{children:e.jsx(fe,{className:"text-primary text-base"})}),e.jsx("li",{className:"text-sm text-slate-700 font-semibold",children:t==null?void 0:t.ratingAvg}),e.jsxs("li",{className:"text-sm text-primary underline",children:["리뷰 ",t==null?void 0:t.reviewCnt.toLocaleString(),"개"]}),e.jsx("li",{className:"text-slate-300 text-base mx-1",children:"|"}),e.jsx("li",{className:"text-lg text-slate-400",children:t!=null&&t.wishIn?e.jsx(q,{className:"text-secondary3"}):e.jsx(Y,{})}),e.jsx("li",{className:"text-slate-500 text-sm",children:t==null?void 0:t.wishCnt})]}),e.jsx("div",{children:e.jsxs("p",{className:"flex items-center gap-[6px] text-slate-500",children:[e.jsx(J,{className:"text-base"}),"매일 00:00 ~ 24:00"]})})]})]}),$e=({scrollEvent:l=!0,strfId:t,contentData:d,getDetailMember:a})=>{const[s,c]=i.useState(!1),p=async()=>{const o={strfId:t};console.log("찜하기 데이터:",o);try{const n=await w.post("/api/wish-list",{...o});console.log("찜하기",n.data),n.data.code==="200 성공"&&a()}catch(n){console.log("찜하기",n)}};i.useEffect(()=>{if(!l){c(!1);return}const o=()=>{window.scrollY>0?c(!0):c(!1)};return window.addEventListener("scroll",o),()=>{window.removeEventListener("scroll",o)}},[l]);const u=window.location.href,h=async()=>{try{await navigator.clipboard.writeText(u)}catch(o){console.error("복사 실패",o)}};return console.log("currentUri",u),e.jsx("div",{className:`max-w-[768px] w-full px-4  fixed top-0 left-1/2 -translate-x-1/2 z-10
        duration-300 ${l?s?"bg-white text-slate-700":"bg-transparent text-white":"bg-transparent"}`,children:e.jsxs("div",{className:"flex justify-between items-center h-[60px]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{className:"text-3xl "}),e.jsx("h2",{className:"font-semibold text-xl",children:d==null?void 0:d.strfTitle})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[d!=null&&d.wishIn?e.jsx(q,{className:`text-2xl ${scrollY>0?"text-secondary3":"text-white"}`,onClick:p}):e.jsx(Y,{className:`text-2xl ${scrollY>0?"text-slate-700":"text-white"}`,onClick:p}),e.jsx(he,{className:"!rounded-2xl",content:e.jsxs("div",{className:"flex items-center justify-between gap-3 bg-slate-100 pl-3 pr-1 py-1 rounded-lg",children:[e.jsx("p",{className:"line-clamp-1 w-[189px]",children:u}),e.jsxs("button",{onClick:()=>h(),className:" flex items-center gap-1 bg-primary px-3 py-1 rounded-lg text-white",children:[e.jsx(oe,{}),"복사"]})]}),trigger:"click",children:e.jsx(ee,{className:" text-2xl"})})]})]})})},Ee=({strfId:l,contentData:t})=>{const[d,a]=i.useState({isRegistModalOpen:!1,openPathModal:!1,isReviewModalOpen:!1}),[s]=i.useState({}),[c]=se(ge),[p]=te.useMessage(),u=le(),h=async r=>{const m={seq:r.trip.lastSeq+1,day:r.trip.day||1,time:r.selectPath.totalTime||null,distance:r.selectPath.totalDistance||null,strf_id:Number(r.contentData.strfId),trip_id:r.trip.nowTripId,path_type:r.selectPath.path_type||null};console.log("sendData",m);try{const j=await w.post("/api/schedule",{...m});console.log("일정등록 결과",j.data),j.data.code==="200 성공"&&o()}catch(j){console.log("일정등록 결과",j)}},o=i.useCallback(()=>{p.open({type:"success",content:"일정 추가가 완료되었습니다",style:{marginTop:"20vh"}})},[p]),n=()=>{c.nowTripId===0?a(r=>({...r,isRegistModalOpen:!0})):c.lastSeq>0?a(r=>({...r,openPathModal:!0})):(h({trip:c,selectPath:s,contentData:{strfId:(t==null?void 0:t.strfId)??0}}),u(`/schedule/index?tripId=${c.nowTripId}`))},g=()=>{a(r=>({...r,isReviewModalOpen:!0})),u(`/contents/postreview?strfId=${l}`,{state:t})};return e.jsxs("div",{className:"sticky bottom-0 left-0 z-50 w-full px-4 py-5 flex gap-3 bg-white border-t-[1px] border-slate-100",children:[e.jsxs(b,{onClick:n,className:"flex items-center justify-center gap-[6px] border-slate-200 rounded-lg w-full h-auto py-[14px] text-lg text-slate-700",children:[e.jsx(Z,{className:"text-sm text-slate-400"}),"일정 추가"]}),e.jsxs(b,{onClick:()=>{g()},className:"flex items-center justify-center gap-[6px]  border-slate-200 rounded-lg w-full  h-auto py-[14px] text-lg text-slate-700",children:[e.jsx(ce,{className:"text-sm text-slate-400"}),"리뷰쓰기"]}),e.jsx(je,{title:"일정추가",open:d.isRegistModalOpen,onOk:()=>u("/search/location"),onCancel:()=>a(r=>({...r,isRegistModalOpen:!1})),closable:!1,className:"custom-modal-confirm",footer:[e.jsx(b,{onClick:()=>a(r=>({...r,isRegistModalOpen:!1})),className:"text-slate-500",children:"취소"}),e.jsx(b,{onClick:()=>u("/search/location"),className:"text-primary",children:"일정 등록"})],children:e.jsx("p",{className:"text-sm text-slate-500 text-center mb-6",children:"일정 추가는 일정 등록 후 추가하실 수 있습니다."})})]})},ps=()=>{const[l,t]=i.useState(null),[d]=ae(),a=Number(d.get("strfId"))||0,s=async()=>{try{const c=await w.get(`/api/detail/member?&strf_id=${a}`);c.data.data,console.log("상품조회-회원",c.data.data),t(c.data.data)}catch(c){console.log("상품조회-회원",c)}};return i.useEffect(()=>{s()},[]),e.jsxs("div",{children:[l&&e.jsx($e,{strfId:a,contentData:l,getDetailMember:s}),e.jsx("section",{children:l&&e.jsx(Pe,{strfId:a,contentData:l})}),e.jsx("section",{className:"w-full h-[10px] bg-slate-100"}),e.jsx("section",{children:e.jsx(Ne,{strfId:a})}),e.jsx("section",{className:"w-full h-[10px] bg-slate-100"}),e.jsx("section",{children:e.jsx(we,{strfId:a})}),e.jsx("section",{className:"w-full h-[10px] bg-slate-100"}),e.jsx("section",{children:e.jsx(be,{defaultActiveKey:"1",centered:!0,className:"custom-strf-tabs",items:[{label:"상세정보",key:"1",children:e.jsx(e.Fragment,{children:l&&e.jsx(Se,{strfId:a,contentData:l})})},{label:"리뷰",key:"2",children:e.jsx(e.Fragment,{children:l&&e.jsx(ve,{strfId:a,contentData:l})})}]})}),l&&e.jsx(Ee,{strfId:a,contentData:l})]})};export{ps as default};
