import{b as I,g as v,r,j as e,Z as w,B as N,c as R}from"./index-Ca07tLEd.js";import{R as k}from"./ReviewItem-CfVkUeWZ.js";import{S as b}from"./StrfInfo-Dkyy6eju.js";import{N as y}from"./NoData-D3eEVehR.js";import{S as M}from"./index-iREkJJLb.js";import"./index-CSW4K44K.js";import"./index-BKGoaEOV.js";import"./index-jXb6QSXU.js";import"./BottomSheet-DOqrMaFf.js";import"./proxy-CQK-WOoG.js";import"./swiper-react-cC1NnD66.js";import"./index-DMEkP_Cf.js";import"./index-DgQEJAJb.js";import"./index-C1FW6RQ6.js";import"./Portal-bFZPeb1_.js";import"./useId-Bji8iwmo.js";import"./isMobile-B4CO7CVJ.js";import"./motion-BEBWFKgD.js";import"./roundedArrow-6vZVf-sn.js";import"./zoom-B1Y8MrBX.js";import"./index-yMZQKGyH.js";const V=()=>{var p;const[f]=I(),u=Number(f.get("strfId")),d=v("accessToken"),[s,a]=r.useState([]),[i,l]=r.useState(0),[g,n]=r.useState(!1),[h,j]=r.useState(!0),m=async o=>{const c="/api/business/review/all";n(!0);try{const t=(await R.get(`${c}?start_idx=${i}&page_size=20`,{headers:{Authorization:`Bearer ${d}`}})).data;return console.log("리뷰 목록 조회",t),t&&o==="more"&&a([...s,...t]),t&&o==="delete"&&(l(0),a(t)),t[t.length-1].isMore===!1&&j(!1),n(!1),t}catch(x){return console.log("리뷰 목록 조회",x),n(!1),null}},S=async()=>{l(i+20)};return r.useEffect(()=>{m("more")},[i]),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(b,{}),e.jsxs(M,{spinning:g,children:[e.jsx("section",{className:"flex flex-col gap-10 pb-10",children:((p=s[0])==null?void 0:p.reviewId)!==null?s==null?void 0:s.map((o,c)=>e.jsx(k,{item:o,strfId:u,setReviewList:a,getReviewList:m},c)):e.jsx(y,{icon:e.jsx(w,{}),content:"리뷰가 없습니다."})}),h&&e.jsx("div",{className:"flex justify-center",children:e.jsx(N,{variant:"outlined",className:"px-5 py-1 h-[9.6vw] max-h-[50px] text-xl text-slate-400 rounded-[32px]",onClick:S,children:"더보기"})})]})]})};export{V as default};
