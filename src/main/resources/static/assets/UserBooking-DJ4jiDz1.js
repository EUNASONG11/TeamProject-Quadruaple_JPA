import{r as a,u as y,g as N,j as e,m as k,w as F,B as c,a as I}from"./index-BDvp6vJ-.js";import{T as $}from"./TitleHeader-ZSoYWPdt.js";import"./jwt-uWIXluU6.js";import{u as A}from"./userAtom-JbkXtLql.js";import{F as O}from"./Footer-B-_QThPp.js";import{d as o}from"./dayjs.min-DUCNHo1R.js";import{a as E}from"./index-CI5zJzi3.js";import{B as R}from"./BottomSheet-CorLbzWB.js";import{b as z}from"./index-ByWf6pOP.js";import"./ko-DCBf4ncz.js";import"./index-BUmFPigH.js";import"./index-CpGEo4ZF.js";import"./DockBar-NALwX1Dj.js";import"./index-BXm6OxAN.js";import"./index-RBkh3_Fy.js";import"./searchAtom-DDR1b8k3.js";import"./searchSelector-o0_nUbIN.js";o.locale("ko");const P=n=>{console.log(n.bookingId);const{checkInDate:m,checkOutDate:p,strfTitle:i,strfPic:u,price:x,state:l,strfId:h,checkInTime:Y,checkOutTime:f,createdAt:t,bookingId:s}=n.data,v=y(),w=N("accessToken"),D=[{label:e.jsxs("p",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(z,{className:"text-slate-300"}),"문의하기"]}),onClick:()=>{C()}}],[B,g]=a.useState(!1),C=async()=>{const r="/api/chat-room",b={strfId:h,title:i,bookingId:s};console.log("채팅방 생성 요청",b);try{const d=await k.post(r,b,{headers:{Authorization:`Bearer ${w}`}});console.log("채팅방 생성",d.data);const j=d.data;j&&v(`/chatroom?roomId=${j.data}`)}catch(d){console.log("채팅방 생성",d),F.error("채팅방 생성에 실패했습니다.")}};o().format("YYYY.MM.DD");const M=r=>{switch(r){case 0:return"결제완료";case 1:return"예약확정";case 2:return"이용완료";case 3:return"취소완료"}},S=r=>{switch(r){case 0:return"bg-[rgba(255,253,204,0.6)] text-[#FFCC00]";case 1:return"bg-[rgba(165,238,254,0.3)] text-primary";case 2:return"bg-slate-100 text-slate-400";case 3:return"bg-[rgba(253,180,161,0.3)] text-secondary3"}},T=r=>{switch(r){case 0:case 1:return e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"w-full h-auto py-3 rounded-lg text-base font-semibold text-slate-700",children:"상세보기"}),e.jsx(c,{className:"w-full h-auto py-3 rounded-lg text-base font-semibold text-slate-700",children:"예약 취소"})]});case 2:return e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"w-full h-auto py-3 rounded-lg text-base font-semibold text-slate-700",children:"상세보기"}),e.jsx(c,{type:"primary",className:"w-full h-auto py-3 rounded-lg text-base font-semibold  text-white bg-primary",children:"리뷰작성"})]});case 3:return e.jsx(e.Fragment,{children:e.jsx(c,{className:"w-full h-auto py-3 rounded-lg text-base font-semibold text-slate-700",children:"상세보기"})})}};return e.jsxs("div",{className:"w-full px-6 py-4 flex flex-col gap-4 border-b-[10px] border-slate-100 last:border-none",children:[e.jsx("div",{className:`w-fit flex items-center justify-center px-2 py-1 text-sm font-bold ${S(l)}`,children:e.jsx("p",{children:M(l)})}),e.jsx("div",{children:e.jsx("h3",{className:"text-xl font-bold text-slate-700",children:i})}),e.jsx("div",{className:"flex gap-[20px]",children:e.jsxs("div",{className:"flex flex-col gap-[10px]",children:[e.jsxs("div",{className:"flex items-center gap-3 text-[16px] text-slate-700",children:[e.jsx("h4",{className:"text-slate-400 font-semibold text-base tracking-tight",children:"이용일시"}),e.jsxs("p",{className:"text-base text-slate-700",children:[e.jsx("span",{children:o(m).format("YYYY.MM.DD ddd")}),e.jsx("span",{children:"~"}),e.jsx("span",{children:o(p).format("YYYY.MM.DD ddd")})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[16px] text-slate-700",children:[e.jsx("h4",{className:"text-slate-400 font-semibold text-base",children:"예약일시"}),e.jsx("p",{className:"text-base text-slate-700 tracking-tight",children:o(t).format("YYYY.MM.DD ddd")})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[16px] text-slate-700",children:[e.jsx("h4",{className:"text-slate-400 font-semibold text-base tracking-tight",children:"인원"}),e.jsx("p",{className:"text-base text-slate-700",children:o(t).format("YYYY.MM.DD ddd")})]})]})}),e.jsxs("div",{className:"flex gap-[8px] items-center",children:[T(l),e.jsx("button",{type:"button",className:"aspect-square h-auto py-3 px-3 text-2xl text-slate-700 rounded-lg border border-slate-300 flex justify-center items-center",onClick:()=>g(!0),children:e.jsx(E,{})})]}),e.jsx(R,{open:B,onClose:()=>g(!1),actions:D})]})},_=a.memo(P),q=["예약 목록","예약 완료"],le=()=>{const n=N("accessToken");I(A);const m=y(),p=()=>{m(-1)},[i,u]=a.useState(0),[x,l]=a.useState([]);a.useState([]),a.useState([]),a.useState(!0);const[h,Y]=a.useState(0),f=a.useCallback(async()=>{try{const t=await k.get(`/api/booking?page=${h}`,{headers:{Authorization:`Bearer ${n}`}});console.log("예약 목록",t.data);const s=t.data;s.code==="200 성공"&&l(s.data)}catch(t){console.log("예약 목록 불러오기 실패",t)}},[]);return a.useEffect(()=>{f()},[]),e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsx($,{icon:"back",title:"내 예약",onClick:p}),e.jsxs("div",{className:"flex flex-col gap-[20px] w-full",children:[e.jsx("div",{children:e.jsx("ul",{className:"flex gap-6 w-full border-b border-slate-200 px-[32px]",children:q.map((t,s)=>e.jsx("li",{onClick:()=>u(s),className:`flex justify-center items-center 
                  pt-[17px] pb-[16px]
                  text-lg cursor-pointer
                  border-b-[2px] transition-all duration-300 ease-in-out
                  ${s===i?"border-primary text-primary":"border-transparent text-slate-500 hover:text-primary"}`,children:t},s))})}),e.jsx("div",{className:"min-h-[500px] flex flex-col justify-center items-center",children:x==null?void 0:x.map((t,s)=>e.jsx(_,{data:t},s))}),e.jsx(O,{})]})]})};export{le as default};
