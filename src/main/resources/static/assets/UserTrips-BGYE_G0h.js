import{r as t,R as F,b as U,g as R,u as z,j as e,I as H,f as b,d as K}from"./index-BE7VYVOv.js";import{A as _,h as G}from"./index-Ch_E0Laj.js";import{a as v}from"./index-BbXaoV9_.js";import{B as A}from"./BottomSheet-DrLD2FYX.js";import{T as Q}from"./TitleHeader-CV-x6l8Z.js";import{L as C}from"./pic-Jp7D6aQ0.js";import{F as V}from"./Footer-sZg7zyO_.js";/* empty css                    */import"./DockBar-CuN8XtQU.js";import{d as T}from"./dayjs.min-DV5wt3YS.js";import{g as q,h as J}from"./index-BokRKycC.js";import{F as W}from"./index-b09DTqhM.js";import{M as X}from"./index-CyGysLWl.js";import{T as Y}from"./index-BFrQ11KA.js";import"./index-ByuoUydi.js";import"./index-HTNiKBmE.js";import"./searchAtom-XhfzCZ1p.js";import"./searchSelector-5p95EtB6.js";import"./index-D6HujVga.js";import"./ExclamationCircleFilled-CPpPIG-H.js";import"./InfoCircleFilled-uHmMXwCt.js";import"./KeyCode-DNlgD2sM.js";import"./Keyframes-DuZXdA1R.js";import"./useZIndex-Bue6RuKI.js";import"./CloseOutlined-BdJ8RO0i.js";import"./Portal-B27f54IH.js";import"./collapse-BbEVqHco.js";import"./zoom-CfBlLY5N.js";import"./index-1QgSoTkJ.js";import"./useLocale-De-VlUhZ.js";import"./useId-CgD2_zXU.js";import"./Skeleton-BmgqNPGs.js";import"./fade-auCC0lxQ.js";import"./PurePanel-CqvjXrBo.js";import"./index-IFp1_UId.js";const i=c=>T(c.endAt).diff(T(c.startAt),"day"),Z=()=>{var g,N;F(U);const[c,w]=t.useState({}),[o,k]=t.useState({}),[y,n]=t.useState(!1),[S,x]=t.useState(!1),[I,p]=t.useState(!1),[M,f]=t.useState([]);W.useForm();const d=R("accessToken"),[$,O]=t.useState(""),[u,ee]=t.useState(0);t.useEffect(()=>{},[o]),t.useEffect(()=>{},[u]);const E=async()=>{try{const a=(await b.get("/api/trip-list",{headers:{Authorization:`Bearer ${d}`}})).data,l=a.beforeTripList,te=a.afterTripList;k(a.data)}catch(s){console.log("여행 목록 불러오기:",s)}},P=async()=>{const s={inviteKey:$};try{const l=(await K.post("/api/trip/user",s,{headers:{Authorization:`Bearer ${d}`}})).data;l.code==="200 성공"&&r(`/schedule/index?tripId=${l.data}`)}catch(a){console.log("구성원 추가",a)}},B=async()=>{try{const a=(await b.get("/api/user/userInfo")).data;w(a.data)}catch(s){console.log("유저 정보",s)}};t.useEffect(()=>{d&&(E(),B())},[]);const r=z(),L=()=>{r(-2)},h=s=>{console.log(s),r(`/schedule/index?tripId=${s.tripId}`)};t.useEffect(()=>{},[u]);const[m,se]=t.useState("Show");t.useMemo(()=>m==="Hide"?!1:m==="Show"?!0:{pointAtCenter:!0},[m]);const D=[{label:"여행 일정 추가하기",onClick:()=>console.log("수정하기 클릭")},{label:"초대코드 입력하기",onClick:()=>{p(!0),n(!1)}}],j=s=>[{label:e.jsxs("div",{className:"flex items-center gap-3 text-lg",children:[e.jsx(q,{className:"text-slate-400"})," 해당 일정 수정하기"]}),onClick:()=>{r(`/schedule/index?tripId=${s.tripId}`),console.log("인식")}},{label:e.jsxs("div",{className:"flex items-center gap-3 text-lg",children:[e.jsx(J,{className:"text-slate-400"})," 해당 일정 삭제하기"]}),onClick:()=>{console.log("수정하기 클릭")}}];return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(Q,{icon:"back",title:"여행",onClick:L}),e.jsxs("div",{className:"w-auto h-auto p-5 bg-slate-50 rounded-lg flex items-center gap-5 mx-4 cursor-pointer",onClick:()=>n(!0),children:[e.jsx("i",{className:"inline-block p-[10px] bg-primary rounded-full",children:e.jsx(_,{className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg text-slate-700 font-semibold",children:"여행 일정 만들기"}),e.jsx("p",{className:"text-sm text-slate-500 tracking-tight",children:"새로운 여행 일정을 만들어 보세요 !"})]})]}),e.jsxs("div",{className:"px-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-slate-700 mt-5",children:"다가오는 여행"}),e.jsx("ul",{className:"flex flex-col",children:(g=o==null?void 0:o.beforeTripList)==null?void 0:g.map((s,a)=>e.jsxs("li",{className:"flex items-center justify-between py-5",onClick:()=>{h(s)},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("img",{src:`${C}${s.locationPic}`,alt:s.title,className:"w-full h-full"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-base text-slate-700 font-semibold",children:s.title}),e.jsxs("p",{className:"text-sm text-slate-400",children:[e.jsx("span",{children:s.startAt}),"~",e.jsx("span",{children:s.endAt}),e.jsxs("span",{className:"ml-1",children:["(",i(s),"박",i(s)+1,"일)"]})]})]})]}),e.jsx(v,{className:"text-3xl text-slate-500",onClick:l=>{l.stopPropagation(),x(!0),f(j(s))}})]},a))}),e.jsx("h1",{className:"text-xl font-semibold text-slate-700 mt-5",children:"완료된 여행"}),e.jsx("ul",{className:"flex flex-col",children:(N=o.afterTripList)==null?void 0:N.map((s,a)=>e.jsxs("li",{className:"flex items-center justify-between py-5",onClick:()=>{h(s)},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("img",{src:`${C}${s.locationPic}`,alt:s.title,className:"w-full h-full"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-base text-slate-700 font-semibold",children:s.title}),e.jsxs("p",{className:"text-sm text-slate-400",children:[e.jsx("span",{children:s.startAt}),"~",e.jsxs("span",{children:[s.endAt,e.jsxs("span",{className:"ml-1",children:["(",i(s),"박",i(s)+1,"일)"]})]})]})]})]}),e.jsx(v,{className:"text-3xl text-slate-500",onClick:l=>{l.stopPropagation(),x(!0),f(j(s))}})]},a))})]}),e.jsx(A,{open:y,onClose:()=>n(!1),actions:D}),e.jsx(A,{open:S,onClose:()=>x(!1),actions:M}),e.jsx(V,{}),e.jsx(X,{className:"custom-modal-invite",open:I,onOk:()=>{p(!1)},onCancel:()=>{p(!1)},children:e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-slate-700 text-xs font-semibold",children:"초대코드 입력"}),e.jsx(Y,{placement:"right",className:"custom-tooltip",title:e.jsx("span",{className:"text-[10px]",children:"친구에게 받은 일정코드를 입력하시고 함께 여행 일정을 만들어주세요"}),children:e.jsx(G,{className:"text-sm text-slate-400"})})]}),e.jsx(H,{placeholder:"친구와 여행을 함께하기 위해 코드를 입력해주세요",className:" py-[20px] h-[79px]",onChange:s=>O(s.target.value),onKeyDown:s=>{s.code==="Enter"&&P()}})]})})]})},Fe=t.memo(Z);export{Fe as default};
