import{f as O,g as S,u as E,i as T,k as M,r as t,j as e,n as P,B as _,an as D,m as z,w as v}from"./index-B5mutXqH.js";import{a as H}from"./index-BV7vgP9f.js";import{B as U}from"./BottomSheet-ef9iIxAN.js";import{R as V}from"./ReviewImage-C32OXhgv.js";import{f as W,g as q}from"./index-Dwc3GK1e.js";import{R as F}from"./index-CDS9wvZX.js";const G=O({key:"editReview",default:{userReview:null,reviewReply:""}}),ee=({strfId:c,item:s,getReviewList:a})=>{const h=S("accessToken"),d=E(),w=()=>{d(`/business/review/edit?type=create&strfId=${c}&reviewId=${s.reviewId}`)},j=()=>{d(`/business/review/edit?type=edit&strfId=${c}&reviewId=${s.reviewId}&replayId=${s.reviewReplyId}`)},x=T().pathname,[p,f]=M(G),[i,g]=t.useState(!1),[y,b]=t.useState(!1),[m,l]=t.useState(!1),[R,n]=t.useState(!1),r=t.useRef(null),N=async()=>{const A=`/api/business/review/delete?replyId=${s.reviewReplyId}`;try{const o=(await z.delete(A,{headers:{Authorization:`Bearer ${h}`}})).data;return console.log("삭제",o),v.success("삭제가 완료되었습니다"),o&&(a==null||a("delete"),l(!1),n(!1)),o}catch(u){return console.log("삭제",u),v.error("삭제를 실패했습니다"),null}},I=[{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(W,{className:"text-slate-300"}),"수정하기"]}),onClick:()=>B()},{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(q,{className:"text-slate-400"}),"삭제하기"]}),onClick:()=>$()}],C=()=>{l(!m)},k=()=>{f({...p,userReview:s}),w()},B=()=>{f({...p,userReview:s,reviewReply:s.reviewReply??""}),j()},$=()=>{n(!0),l(!1)};return t.useEffect(()=>{r.current&&b(r.current.scrollHeight>72)},[s.content]),e.jsxs("div",{className:"flex flex-col gap-4 px-4 py-5",children:[e.jsxs("section",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-slate-200 rounded-full w-10 h-10 overflow-hidden",children:e.jsx("img",{src:`${P}/${s.userId}/${s.writerUserProfilePic}`,alt:"프로필 사진"})}),e.jsx("p",{className:"text-lg font-semibold text-slate-700",children:s.userName})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{value:s.ratingAvg,disabled:!0}),e.jsx("p",{className:"text-sm font-semibold text-slate-700",children:s.ratingAvg})]}),e.jsx("p",{className:"text-sm text-slate-500",children:s.createdAt})]}),e.jsxs("div",{children:[e.jsx("p",{ref:r,className:`text-base text-slate-700 overflow-hidden transition-[max-height] duration-500 ease-in-out ${i?"max-h-[1000px]":"max-h-[72px]"}`,children:s.content}),y&&e.jsx("button",{type:"button",className:"text-primary text-base font-semibold mt-2",onClick:()=>g(!i),children:i?"접기":"더보기"})]}),e.jsx(V,{imgArr:s.reviewPicList,reviewId:s.reviewId})]}),s.reviewReply&&e.jsxs("section",{className:"p-4 bg-slate-100 rounded-lg flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"사장님"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-slate-500",children:s.reviewReplyCreatedAt}),x!=="/business/review/edit"&&e.jsx("button",{type:"button",className:"text-slate-500 text-xl font-semibold",onClick:()=>{l(!0)},children:e.jsx(H,{})})]})]}),e.jsx("div",{children:e.jsx("p",{className:"text-base text-slate-700",children:s.reviewReply})})]}),x==="/business/review/edit"||s.reviewReply?null:e.jsx(_,{color:"primary",variant:"outlined",className:"text-xl font-semibold px-3 py-1 max-h-[50px] h-[16vw]",onClick:k,children:"댓글 작성"}),e.jsx(U,{open:m,onClose:C,actions:I}),R&&e.jsx(D,{handleClickCancle:()=>n(!1),handleClickSubmit:N,content:"삭제하시겠습니까?"})]})};export{ee as R,G as e};
