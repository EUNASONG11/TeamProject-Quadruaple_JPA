import{a as b,t as w,R as v,r as d,g as c,u as y,j as e,$ as S,b as P,q as C,n as E,a1 as k,L as s,a4 as A,A as I,o as $,I as x,m as L,d as T,s as u,e as U}from"./index-B5mutXqH.js";import{a as B,B as R,e as O,b as D}from"./index-Dwc3GK1e.js";import{G as F}from"./index-Cvs32X4Y.js";import{H as _}from"./index-DIYsrSQS.js";import{R as G}from"./index-C291fQXa.js";import{S as H,a as z}from"./swiper-react-C7pi3sW5.js";import{r as q,e as M}from"./eventsource-D4KQoscn.js";import"./userAtom-DhkwmYod.js";const ee=()=>{var m;const a=b(w),p=v(q),[l,h]=d.useState({name:"",couponCnt:0,profilePic:"",tripList:[]}),r=c("accessToken"),n=c("user"),j=async()=>{try{const f=(await L.get("/api/home/user",{headers:{Authorization:`Bearer ${r}`}})).data;return h(f.data),f}catch(t){return console.log(t),null}};d.useEffect(()=>{r&&j()},[]);const o=y(),N=()=>{p(),T("accessToken");const t=c("user");t.isSaveEmail===!1&&u("user",{...t,email:""}),t.isSaveLogin===!1&&u("user",{...t,userId:"",email:"",accessToken:"",role:[U.GUEST]}),o("/signin")},g=()=>{o("/user/useredit",{state:l})},i=new M.EventSourcePolyfill("/api/notice",{headers:{Authorization:`Bearer ${r}`},heartbeatTimeout:36e5});return console.log("eventSource",i),i.onopen=function(){console.log("SSE 연결 성공!")},i.onmessage=function(t){console.log("새 알림:",t.data)},i.onerror=function(t){console.error("SSE 연결 오류:",t),setTimeout(()=>{},36e5)},e.jsx("div",{className:" w-full flex justify-end",children:e.jsxs("div",{className:"w-full h-screen bg-white ",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"flex justify-between py-[14px]",children:[e.jsx(S,{onClick:()=>o("/"),className:"text-3xl cursor-pointer text-slate-700"}),e.jsxs("h1",{className:"flex gap-5",children:[e.jsx(B,{onClick:()=>o("/user/notification"),className:"text-3xl text-slate-700 cursor-pointer"}),e.jsx(P,{className:"text-3xl text-slate-700 cursor-pointer",onClick:()=>g()})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mt-5",children:[e.jsx("div",{className:"mx-auto w-32 h-32 rounded-full overflow-hidden",children:e.jsx("img",{src:a.providerType===C.LOCAL?a.profilePic?`${E}/${n==null?void 0:n.userId}/${a==null?void 0:a.profilePic}`:"/images/user.png":a.profilePic?`${a.profilePic}`:"/images/user.png",alt:"User-Profile",className:"w-full h-full object-cover"})}),e.jsx("h1",{className:"text-2xl font-bold text-slate-700 mt-[14px] text-center",children:a.name}),e.jsx(H,{slidesPerView:1,className:"mySwiper",children:(m=l.tripList)==null?void 0:m.map(t=>e.jsx(z,{children:e.jsxs("div",{className:`flex items-center justify-between bg-slate-100 mt-5 px-4 py-4 rounded-full relative\r
                    after:absolute after:border-solid after:border-transparent after:border-b-slate-100 after:border-x-[16px] after:border-b-[30px] after:-top-4 after:left-1/2 after:-translate-x-1/2`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:`${k}/${t.locationPic}`,alt:"",className:"w-8 h-8 rounded-full mr-3"}),e.jsx("span",{className:"text-lg text-slate-700 font-normal",children:t.title})]}),e.jsx("span",{className:"text-lg text-primary font-semibold",children:t.dday>0?`D-${t.dday}`:"여행중"})]})},t.tripId))})]}),e.jsxs("div",{className:"flex my-5",children:[e.jsxs(s,{to:"/user/usertrips",className:"w-1/4 text-center text-base text-slate-500 font-normal relative after:absolute after:top-1/2 after:-translate-y-1/2 after:right-0 after: after:bg-slate-200 after:w-[1px] after:h-14",children:[e.jsx(_,{className:"w-full text-3xl text-slate-700 mb-2"}),"여행"]}),e.jsxs(s,{to:"/user/userwishlist",className:"w-1/4 text-center text-base text-slate-500 font-normal relative after:absolute after:top-1/2 after:-translate-y-1/2 after:right-0 after: after:bg-slate-200 after:w-[1px] after:h-14",children:[e.jsx(A,{className:"w-full text-3xl text-slate-700 mb-2"}),"찜하기"]}),e.jsxs(s,{to:"/user/userreview",className:"w-1/4 text-center text-base text-slate-500 font-normal relative after:absolute after:top-1/2 after:-translate-y-1/2 after:right-0 after: after:bg-slate-200 after:w-[1px] after:h-14",children:[e.jsx(I,{className:"w-full text-3xl text-slate-700 mb-2"}),"리뷰"]}),e.jsxs(s,{to:"/user/usertrip",className:"w-1/4 text-center text-base text-slate-500 font-normal",children:[e.jsx($,{className:"w-full text-3xl text-slate-700 mb-2"}),"내 여행기"]})]})]})]}),e.jsx("p",{className:"w-full h-[10px] bg-slate-100"}),e.jsxs("div",{className:"w-full px-4",children:[e.jsxs(s,{to:"/user/userbooking",className:"flex items-center py-5 text-xl text-slate-700 font-normal",children:[e.jsx(F,{className:"text-3xl text-slate-400 mr-4"}),"내예약",e.jsx(x,{className:"text-slate-300 ml-auto"})]}),e.jsxs(s,{to:"/user/usercoupon",className:"flex items-center py-5 text-xl text-slate-700 font-normal",children:[e.jsx(R,{className:"text-3xl text-slate-400 mr-4"}),"쿠폰함",l.couponCnt>0&&e.jsx("span",{className:"ml-auto w-9 h-6 rounded-2xl text-sm text-center leading-[1.45rem] text-primary3 bg-[#A5EEFE]/50",children:l.couponCnt}),e.jsx(x,{className:"text-slate-300 ml-2"})]}),e.jsxs(s,{to:"/user/point",className:"flex items-center py-5 text-xl text-slate-700 font-normal",children:[e.jsx(O,{className:"text-3xl text-slate-400 mr-4"}),"포인트",e.jsx(x,{className:"text-slate-300 ml-auto"})]}),e.jsxs(s,{to:"/user/recentlist",className:"flex items-center py-5 text-xl text-slate-700 font-normal",children:[e.jsx(D,{className:"text-3xl text-slate-400 mr-4"}),"최근 본 목록",e.jsx(x,{className:"text-slate-300 ml-auto"})]})]}),e.jsx("p",{className:"w-full h-[10px] bg-slate-100"}),e.jsxs("div",{className:"px-4 pb-[130px]",children:[e.jsx(s,{to:"",className:"flex py-5  text-slate-500 text-sm",children:"공지사항"}),e.jsx(s,{to:"",className:"flex  text-slate-500 py-5 text-sm",children:"FAQ"}),e.jsx(s,{to:"",className:"flex   text-slate-500 py-5 text-sm",children:"고객센터"}),e.jsx(s,{to:"",className:"flex text-slate-500 py-5 text-sm",children:"1:1 문의하기"}),e.jsx(s,{to:"/user/changepw",className:"flex text-slate-500 py-5 text-sm",children:"비밀번호 변경"}),r&&e.jsxs("p",{onClick:()=>N(),className:"flex gap-3 items-center text-slate-500 py-5 text-sm",children:[e.jsx(G,{className:"text-slate-300"}),"로그아웃"]})]})]})})};export{ee as default};
