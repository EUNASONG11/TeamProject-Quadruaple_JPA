import{r as s,g as y,u as I,j as t,T as N,a4 as C,ab as R,B as S,ac as k}from"./index-BntdmLw6.js";/* empty css                    */import{j as i}from"./jwt-fW46sxL_.js";import{B}from"./BottomSheet-BJ5uX72Z.js";import{D as T}from"./DynamicGrid-ChfxA7yx.js";import{R as E}from"./index-CGR3KpPN.js";import"./proxy-UoHTkF4V.js";import"./index-Cx8rCkDl.js";import"./index-D-KvkW_H.js";import"./Portal-DrvEm9SG.js";import"./useId-1CjrgjZ5.js";import"./index-f2vjQ5p_.js";import"./fade-Cg5Cr7pw.js";import"./zoom-CZrdmVqU.js";import"./addEventListener-BuCUmhKD.js";import"./motion-C0u11WnX.js";import"./RightOutlined-ChHi09xb.js";import"./index-BwdDw7dk.js";import"./index-CQPU18Q9.js";import"./isMobile-B4CO7CVJ.js";import"./roundedArrow-BJTQLzTE.js";const te=()=>{const[a,l]=s.useState([]),[m,u]=s.useState(0),[c,n]=s.useState(0),[f,L]=s.useState(!0),[v,o]=s.useState(!1),[d,w]=s.useState(null);y("accessToken");const x=async()=>{try{const e=await i.get(`/api/review/my?start_idx=${c}`);l(r=>[...r,...e.data.data.dtoList]),e.data.data.dtoList&&n(r=>r+10),console.log("✅  getUserReview  res.data.data:",e.data.data.dtoList)}catch(e){console.log("✅  getUserReview  error:",e)}},g=async()=>{try{const e=await i.get("/api/review/count");console.log("✅  reviewCount  res:",e.data),u(e.data)}catch(e){console.log("✅  reviewCount  error:",e)}};console.log(" reviewInfo",a);const j=async e=>{console.log(e);try{await i.delete(`/api/review/del?review_id=${e.reviewId}`),n(0),l([]),console.log("리뷰 삭제:",res.data)}catch(r){console.log("리뷰 삭제:",r)}};s.useEffect(()=>{a.length===0&&x()},[c]),s.useEffect(()=>{g()},[]);const h=()=>{x()},p=I(),b=e=>[{label:t.jsxs("div",{className:"flex items-center gap-3 text-lg",children:[t.jsx(k,{className:"text-slate-400"}),"삭제하기"]}),onClick:()=>{j(e),o(!1)}}];return t.jsxs("div",{children:[t.jsx(N,{icon:"back",title:"리뷰",onClick:()=>p(-2)}),t.jsx("div",{className:"flex justify-between py-[14px] px-4 border-b-[1px] border-t-[1px] border-slate-100 ",children:t.jsxs("p",{className:"text-sm font-semibold",children:["총 ",m,"개"]})}),t.jsx("div",{children:a.map((e,r)=>t.jsxs("div",{className:"py-8 px-4 border-b-[10px] border-slate-100 last:border-none",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("div",{children:t.jsxs("h1",{className:"flex items-center gap-2 h text-lg font-semibold text-slate-700 mb-2 cursor-pointer",onClick:()=>p(`/contents/index?strfId=${e.strfId}`),children:[e.strfTitle,t.jsx(C,{})]})}),t.jsx(R,{className:"text-slate-400 text-2xl cursor-pointer",onClick:M=>{o(!0),w(e)}})]}),t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(E,{className:"custom-rate flex items-center gap-[2px]",disabled:!0,allowHalf:!0,defaultValue:e.rating}),t.jsx("p",{className:"text-slate-400 text-base",children:e.reviewWriteDate.split(" ")[0].replace(/-/g,".")})]}),t.jsx("p",{className:"text-base text-slate-700 mb-2",children:e.content}),e.myReviewPic&&e.myReviewPic.length>0&&t.jsx(T,{reviewPics:e,type:"myReview"})]},r))}),f&&t.jsx("div",{className:"flex justify-center py-[14px]",children:t.jsx(S,{className:"text-slate-500 text-base !h-auto py-2 px-5 border-1 border-slate-200 rounded-full",onClick:()=>h(),children:"더보기"})}),t.jsx(B,{open:v,onClose:()=>o(!1),actions:d?b(d):[]})]})};export{te as default};
