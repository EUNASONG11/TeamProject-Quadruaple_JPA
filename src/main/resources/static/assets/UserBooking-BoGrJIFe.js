import{r as a,u as Y,g as y,j as e,U as T,c as N,M as F,B as n,S as I}from"./index-ztVTG9lp.js";import{T as A}from"./TitleHeader-lhIfQ61P.js";import"./jwt-Dpt0WQzU.js";import{u as O}from"./userAtom-BNiKeFLi.js";import{F as P}from"./Footer-BAxsxnc4.js";import{d as o}from"./dayjs.min-Ti2bJ-a6.js";import{a as E}from"./index-Dx8wNGhz.js";import{B as R}from"./BottomSheet-wJVPawZI.js";import{b as z}from"./index-DlO1jS7p.js";import"./ko-DT7Ny484.js";import"./index-BNRq6L-3.js";import"./index-DIofXRia.js";import"./DockBar-CciJ2Xoe.js";import"./index-DpREiSBa.js";import"./index-BJLpRm29.js";import"./searchAtom-s5gqmvmf.js";import"./eventsource-Cd5SwtWz.js";import"./proxy-s5gT8Z6H.js";o.locale("ko");const U=i=>{console.log(i.bookingId);const{checkInDate:h,checkOutDate:u,strfTitle:l,strfPic:x,price:d,state:c,strfId:m,checkInTime:k,checkOutTime:f,createdAt:t,bookingId:s}=i.data,D=Y(),v=y("accessToken"),M=[{label:e.jsxs("p",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(z,{className:"text-slate-300"}),"문의하기"]}),onClick:()=>{B()}}],[w,g]=a.useState(!1),B=async()=>{const r="/api/chat-room",b={strfId:m,title:l,bookingId:s};console.log("채팅방 생성 요청",b);try{const p=await N.post(r,b,{headers:{Authorization:`Bearer ${v}`}});console.log("채팅방 생성",p.data);const j=p.data;j&&D(`/chatroom?roomId=${j.data}`)}catch(p){console.log("채팅방 생성",p),F.error("채팅방 생성에 실패했습니다.")}};o().format("YYYY.MM.DD");const C=r=>{switch(r){case 0:return"결제완료";case 1:return"예약확정";case 2:return"이용완료";case 3:return"취소완료"}},S=r=>{switch(r){case 0:return"bg-[rgba(255,253,204,0.6)] text-[#FFCC00]";case 1:return"bg-[rgba(165,238,254,0.3)] text-primary";case 2:return"bg-slate-100 text-slate-400";case 3:return"bg-[rgba(253,180,161,0.3)] text-secondary3"}},$=r=>{switch(r){case 0:case 1:return e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"w-full h-auto py-3 rounded-lg text-base font-semibold text-slate-700",children:"상세보기"}),e.jsx(n,{className:"w-full h-auto py-3 rounded-lg text-base font-semibold text-slate-700",children:"예약 취소"})]});case 2:return e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"w-full h-auto py-3 rounded-lg text-base font-semibold text-slate-700",children:"상세보기"}),e.jsx(n,{type:"primary",className:"w-full h-auto py-3 rounded-lg text-base font-semibold  text-white bg-primary",children:"리뷰작성"})]});case 3:return e.jsx(e.Fragment,{children:e.jsx(n,{className:"w-full h-auto py-3 rounded-lg text-base font-semibold text-slate-700",children:"상세보기"})})}};return e.jsxs("div",{className:"w-full px-6 py-4 flex flex-col gap-4 border-b-[10px] border-slate-100 last:border-none",children:[e.jsx("div",{className:`w-fit flex items-center justify-center px-2 py-1 text-sm font-bold ${S(c)}`,children:e.jsx("p",{children:C(c)})}),e.jsx("div",{children:e.jsx("h3",{className:"text-xl font-bold text-slate-700",children:l})}),e.jsxs("div",{className:"flex gap-[20px]",children:[e.jsx("div",{className:"w-[85px] h-[85px] rounded-2xl overflow-hidden bg-slate-100",children:e.jsx("img",{src:x?`${T}/${m}/${x}`:"",alt:l||"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-[10px]",children:[e.jsxs("div",{className:"flex items-center gap-3 text-[16px] text-slate-700",children:[e.jsx("h4",{className:"text-slate-400 font-semibold text-base tracking-tight",children:"이용일시"}),e.jsxs("p",{className:"text-base text-slate-700",children:[e.jsx("span",{children:o(h,"YYYY-MM-DD").format("YYYY.MM.DD ddd")}),e.jsx("span",{children:"~"}),e.jsx("span",{children:o(u,"YYYY-MM-DD").format("YYYY.MM.DD ddd")})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[16px] text-slate-700",children:[e.jsx("h4",{className:"text-slate-400 font-semibold text-base",children:"예약일시"}),e.jsx("p",{className:"text-base text-slate-700 tracking-tight",children:o(t,"YYYY-MM-DD").format("YYYY.MM.DD ddd")})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[16px] text-slate-700",children:[e.jsx("h4",{className:"text-slate-400 font-semibold text-base tracking-tight",children:"인원"}),e.jsx("p",{className:"text-base text-slate-700",children:o(t,"YYYY-MM-DD").format("YYYY.MM.DD ddd")})]})]})]}),e.jsxs("div",{className:"flex gap-[8px] items-center",children:[$(c),e.jsx("button",{type:"button",className:"aspect-square h-auto py-3 px-3 text-2xl text-slate-700 rounded-lg border border-slate-300 flex justify-center items-center",onClick:()=>g(!0),children:e.jsx(E,{})})]}),e.jsx(R,{open:w,onClose:()=>g(!1),actions:M})]})},_=a.memo(U),q=["예약 목록","예약 완료"],ne=()=>{const i=y("accessToken");I(O);const h=Y(),u=()=>{h(-1)},[l,x]=a.useState(0),[d,c]=a.useState([]);a.useState([]),a.useState([]),a.useState(!0);const[m,k]=a.useState(0),f=a.useCallback(async()=>{try{const t=await N.get(`/api/booking?page=${m}`,{headers:{Authorization:`Bearer ${i}`}});console.log("예약 목록",t.data);const s=t.data;s.code==="200 성공"&&c(s.data)}catch(t){console.log("예약 목록 불러오기 실패",t)}},[]);return a.useEffect(()=>{f()},[]),e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsx(A,{icon:"back",title:"내 예약",onClick:u}),e.jsxs("div",{className:"flex flex-col gap-[20px] w-full",children:[e.jsx("div",{children:e.jsx("ul",{className:"flex gap-6 w-full border-b border-slate-200 px-[32px]",children:q.map((t,s)=>e.jsx("li",{onClick:()=>x(s),className:`flex justify-center items-center 
                  pt-[17px] pb-[16px]
                  text-lg cursor-pointer
                  border-b-[2px] transition-all duration-300 ease-in-out
                  ${s===l?"border-primary text-primary":"border-transparent text-slate-500 hover:text-primary"}`,children:t},s))})}),e.jsx("div",{className:"min-h-[500px] flex flex-col justify-center items-center",children:d==null?void 0:d.map((t,s)=>e.jsx(_,{data:t},s))}),e.jsx(P,{})]})]})};export{ne as default};
