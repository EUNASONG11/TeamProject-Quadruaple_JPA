import{r as l,g as y,u as I,j as e,I as R,B as C,f as w,i as $}from"./index-Cwx4I7Vi.js";import{T as S}from"./TitleHeader-B_AiqjDt.js";import{R as k}from"./pic-Jp7D6aQ0.js";/* empty css                    */import{a as B}from"./index-zy4pIAEY.js";import{B as U}from"./BottomSheet-C7e8_EJv.js";import{g as A,h as T}from"./index-CWBfKhhN.js";import{R as E}from"./index-Dbth3xtv.js";import"./index-C1nPTQe_.js";import"./KeyCode-DNlgD2sM.js";import"./index-G7OR39Gq.js";import"./index-B7BtatMF.js";import"./Portal-SJsC_TZ1.js";import"./useId-cPQzkJ8H.js";import"./useZIndex-0xqzHicI.js";import"./zoom-D6z5ctYs.js";import"./Keyframes-C9Oo5sJi.js";const M=({images:c})=>{const r=c.length,a={1:"grid-cols-1 grid-rows-1",2:"grid-cols-2 grid-rows-1",3:"grid-cols-2 grid-rows-2",4:"grid-cols-2 grid-rows-2",5:"grid-cols-4 grid-rows-2"}[r]||"grid-cols-3 grid-rows-2";return e.jsx("div",{className:`grid gap-1 ${a} w-full aspect-[3/2] rounded-lg overflow-hidden`,children:c.map((n,o)=>{let i="";return r===3&&o===0&&(i="row-span-2"),r===5&&o===0&&(i="row-span-2 col-span-2"),e.jsx("img",{src:n,alt:`image-${o}`,className:`w-full h-full overflow-hidden object-cover ${i}`},o)})})},Z=()=>{const[c,r]=l.useState([]),[a,n]=l.useState(0),[o,i]=l.useState(!0),[u,d]=l.useState(!1),[x,h]=l.useState(null),m=y("accessToken"),v=async()=>{try{const s=await w.get(`/api/review/my?start_idx=${a}`,{headers:{Authorization:`Bearer ${m}`}});r(t=>[...t,...s.data]),s.data.more===!1&&i(!1),console.log("✅  getUserReview  res.data.data:",s.data)}catch(s){console.log("✅  getUserReview  error:",s)}},p=async()=>{try{const s=await w.get(`/api/review/my?start_idx=${a}`,{headers:{Authorization:`Bearer ${m}`}});r(s.data),console.log("✅  getUserReview  res.data.data:",s.data),s.data.more===!1&&i(!1)}catch(s){console.log("✅  getUserReview  error:",s)}},j=async s=>{console.log(s);try{const t=await $.delete(`/api/review/del?review_id=${s.reviewId}`);console.log("리뷰 삭제:",t.data),t.data&&p()}catch(t){console.log("리뷰 삭제:",t)}};l.useEffect(()=>{a>0?v():p()},[a]);const g=I(),b=s=>[{label:e.jsxs("div",{className:"flex items-center gap-3 text-lg",children:[e.jsx(A,{className:"text-slate-400"})," 수정하기"]}),onClick:()=>{console.log("인식")}},{label:e.jsxs("div",{className:"flex items-center gap-3 text-lg",children:[e.jsx(T,{className:"text-slate-400"}),"삭제하기"]}),onClick:()=>{j(s),d(!1)}}];return e.jsxs("div",{children:[e.jsx(S,{icon:"back",title:"리뷰",onClick:()=>g(-2)}),e.jsx("div",{className:"flex justify-between py-[14px] px-4 border-b-[1px] border-t-[1px] border-slate-100 ",children:e.jsxs("p",{className:"text-sm font-semibold",children:["총 ",c.length,"개"]})}),e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{children:[e.jsx("p",{}),e.jsx("p",{})]}),c.map((s,t)=>{const N=s.myReviewPic.map(f=>`${k}${s.reviewId}/${f.pic}`);return e.jsxs("div",{className:"py-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsxs("h1",{className:"flex items-center gap-2 h text-lg font-semibold text-slate-700 mb-2 cursor-pointer",onClick:()=>g(`/contents/index?strfId=${s.strfId}`),children:[s.strfTitle,e.jsx(R,{})]})}),e.jsx(B,{className:"text-xl cursor-pointer",onClick:f=>{d(!0),h(s)}})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(E,{className:"custom-rate flex items-center gap-[2px]",disabled:!0,allowHalf:!0,defaultValue:s.rating}),e.jsx("p",{className:"text-slate-400 text-base",children:s.reviewWriteDate.split(" ")[0].replace(/-/g,".")})]}),e.jsx("p",{className:"text-base text-slate-700 mb-2",children:s.content}),e.jsx(M,{images:N})]},t)}),o&&e.jsx("div",{className:"flex justify-center py-[14px]",children:e.jsx(C,{className:"text-slate-500 text-base !h-auto py-2 px-5 border-1 border-slate-200 rounded-full",onClick:()=>{n(s=>s+10)},children:"더보기"})})]}),e.jsx(U,{open:u,onClose:()=>d(!1),actions:x?b(x):[]})]})};export{Z as default};
