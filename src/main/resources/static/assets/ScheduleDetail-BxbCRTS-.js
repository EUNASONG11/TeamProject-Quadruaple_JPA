import{u as A,r as i,j as e,a1 as M,B,g as _,a as U,h as z,p as F,o as G,aa as H,a5 as V,m as $}from"./index-B5mutXqH.js";import{T as q,R as J}from"./TitleHeader-BbAGeC8B.js";import{b as K}from"./index-Dwc3GK1e.js";import{a as P}from"./index-Cvs32X4Y.js";import{S as Q}from"./ScheduleDay-DpImA-as.js";import{S as W,a as X}from"./swiper-react-C7pi3sW5.js";import{j as b}from"./jwt-BB-8DCFM.js";import{u as Y}from"./userAtom-DhkwmYod.js";import"./index-BV7vgP9f.js";import"./index-DIYsrSQS.js";import"./match-CC9Jzjkz.js";import"./index-BJiJYRrR.js";import"./index-CYfWfzdt.js";import"./index-BQGSIoXt.js";import"./index-5wnY7uQU.js";import"./index-DRs9Aw0K.js";import"./index-DJIGv9MU.js";import"./tripAtom-B_R7g5Cz.js";import"./CenterModal-BI_220JM.js";import"./dayjs.min-DQZRn8d9.js";import"./MarkerClusterer-Czl5pmQV.js";import"./index-CDS9wvZX.js";import"./index-DUI94dea.js";import"./index-BAYCThZ_.js";import"./Portal-Cl124Xm8.js";import"./useId-DwjxQd62.js";import"./motion-Bx9cQuU0.js";import"./roundedArrow-DZNwFq69.js";import"./zoom-6e5oPkw1.js";const Z=({openSelectTripModal:d,setOpenSelectTripModal:p,tripLocationList:m,tripReviewId:n})=>{const h=A(),u=()=>{h("/schedule/days",{state:{selectedLocationId:m,tripReviewId:n,tripId:c.tripId,title:c.title,from:"/scheduleboard/scheduleDetail"}})},[l,f]=i.useState([]),[r,g]=i.useState(null),[c,x]=i.useState(null);i.useEffect(()=>{console.log("tripListData",l)},[l]),i.useEffect(()=>{console.log("selectedTripData",c)},[c]);const j=async()=>{try{const t=await b.get("/api/trip-list");console.log(t.data);const y=t.data.data.beforeTripList;f(y)}catch(t){console.log("여행 목록 불러오기:",t)}},w=(t,o)=>{g(o),console.log("item",t),x(t)},v=()=>{p(!1)},N=t=>{t.stopPropagation()};return i.useEffect(()=>{j()},[]),e.jsx("div",{className:`fixed top-0 left-[50%] translate-x-[-50%] z-10\r
\r
            max-w-3xl w-full mx-auto h-screen\r
            flex items-end justify-center\r
            bg-[rgba(0,0,0,0.5)]\r
            pb-[70px]\r
            `,onClick:()=>{v()},children:e.jsxs("div",{className:`bg-white w-full \r
                rounded-t-2xl px-[60px] py-[55px]\r
                flex flex-col gap-[20px]\r
                `,onClick:N,children:[e.jsx("h2",{className:"text-[28px] text-slate-700 font-bold",children:"이 일정을 담을 여행을 선택해주세요."}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("h3",{className:"text-[18px] text-slate-700 font-semibold",children:"나의 다가오는 여행"}),e.jsx("ul",{className:`flex flex-col px-[10px] py-[20px] gap-[30px]\r
          max-h-[55vh] overflow-y-auto`,children:l==null?void 0:l.map((t,o)=>e.jsxs("li",{className:`flex items-center gap-[20px] px-[20px] py-[10px] rounded-[16px] ${r===o?"bg-slate-200":""}`,onClick:()=>w(t,o),children:[e.jsx("div",{className:"w-[50px] h-[50px] bg-slate-100 rounded-full overflow-hidden",children:e.jsx("img",{src:`${M}/${t.locationPic}`,alt:"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("h4",{className:"text-[18px] text-slate-700 font-semibold",children:t.title}),e.jsxs("p",{className:"text-[16px] text-slate-500",children:[e.jsx("span",{children:t.startAt}),e.jsx("span",{children:"-"}),e.jsx("span",{children:t.endAt})]})]})]},o))})]}),e.jsx(B,{type:"primary",htmlType:"button",className:"h-[50px] px-[15px] py-[20px] text-[24px] text-white font-semibold",onClick:u,children:"선택 완료"})]})})},Ie=()=>{var T,S,k,R,D,I,L,C;_("accessToken");const{userId:d}=U(Y),[p]=z(),m=parseInt(p.get("tripId")),n=parseInt(p.get("TripReviewId")),h=A(),u=()=>{h(-1)},[l,f]=i.useState({}),[r,g]=i.useState({}),[c,x]=i.useState(!1),[j,w]=i.useState(!1),[v,N]=i.useState(!1),t=async()=>{try{const a=await $.get(`/api/trip-review/otherTripReview?tripReviewId=${n}`);console.log("다른 사람 여행기 조회",a.data);const s=a.data;f(s.data),s&&N(!0)}catch(a){console.log("다른 사람 여행기 조회",a)}},o=async()=>{try{const a=await $.get(`/api/trip?trip_id=${m}&signed=false`);console.log("여행확인하기",a.data);const s=a.data.data;g(s),s&&w(!0)}catch(a){console.log(a)}},y=async()=>{const a={userId:d,tripReviewId:n};try{const s=await b.post("/api/trip-review/like",a);console.log("여행기 추천",s.data),s.data.code==="200 성공"&&t()}catch(s){console.log("여행기 추천",s)}},E=async()=>{const a={userId:d,tripReviewId:n};try{const s=await b.delete("/api/trip-review/like",a);console.log("여행기 추천 취소",s.data),s.data.status===200&&t()}catch(s){console.log("여행기 추천 취소",s)}};return i.useEffect(()=>{t(),o()},[]),e.jsx("div",{children:j&&v?e.jsxs(e.Fragment,{children:[e.jsx(q,{icon:"back",onClick:u,rightContent:e.jsx(J,{})}),e.jsxs("div",{className:"flex flex-col px-[32px] py-[30px] gap-[30px]",children:[e.jsx(W,{slidesPerView:1,spaceBetween:0,loop:!0,className:"mySwiper w-full h-[406px] overflow-hidden",children:l.length>0?(S=(T=l[0])==null?void 0:T.tripReviewPics)==null?void 0:S.map((a,s)=>e.jsx(X,{className:"max-w-3xl h-[406px] bg-slate-200",children:e.jsx("img",{src:`${F}/${l[0].tripReviewId}/${a}`,alt:"thum",className:"w-full h-full object-cover"})},s)):null}),e.jsx("div",{className:"flex flex-col gap-[10px]",children:e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-[36px] text-slate-700",children:(k=l[0])==null?void 0:k.title}),e.jsxs("ul",{className:"flex gap-[10px] items-center",children:[e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(K,{className:"text-slate-300 text-[18px]"}),e.jsx("p",{className:"text-slate-500 font-bold text-[14px]",children:(R=l[0])==null?void 0:R.recentCount})]}),e.jsxs("li",{className:"flex gap-[5px] items-center cursor-pointer",children:[e.jsx(P,{className:"text-slate-300 text-[18px] focus:text-secondary3 transition-all duration-300"}),e.jsx("button",{type:"button",className:"text-slate-500 font-bold text-[14px]",children:(D=l[0])==null?void 0:D.likeCount})]}),e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(G,{className:"text-slate-300 text-[18px]"}),e.jsxs("p",{className:"text-slate-500 font-bold text-[14px]",children:[" ",(I=l[0])==null?void 0:I.scrapCount]})]})]})]})}),e.jsx("div",{children:e.jsx("p",{children:(L=l[0])==null?void 0:L.content})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",className:`w-[50px] h-[50px] flex items-center justify-center
                   bg-slate-100 rounded-full 
                   text-slate-300 text-[20px]
                   transition-all duration-300
                   hover:bg-slate-200
                   ${l.likeUser===0?"text-secondary3":"text-slate-500"}`,onClick:()=>{l.likeUser===0?y():E()},children:e.jsx(P,{})})})]}),e.jsx("div",{children:e.jsx("div",{className:"flex flex-col gap-[50px]",children:(C=r==null?void 0:r.days)==null?void 0:C.map((a,s)=>e.jsx(Q,{data:a,newTrip:!1,readOnly:!0},s))})}),e.jsx("div",{className:"px-[32px] mb-[30px]",children:e.jsxs(B,{type:"primary",variant:"filled",className:"flex gap-[10px] py-[10px] h-auto w-full",onClick:()=>x(!0),classNames:"bg-slate-100",children:[e.jsx(H,{className:"w-[30px] h-[30px] text-white"}),e.jsx("span",{className:"font-semibold text-[24px] text-white",children:"내 여행에 담기"})]})}),c&&e.jsx(Z,{openSelectTripModal:c,setOpenSelectTripModal:x,tripLocationList:r==null?void 0:r.tripLocationList,tripReviewId:n})]}):e.jsx(V,{})})};export{Ie as default};
