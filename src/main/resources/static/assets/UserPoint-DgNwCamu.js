import{r as a,j as e,B as M,T as S,aG as P,u as $,L as I,aa as E}from"./index-Ca07tLEd.js";import{d}from"./dayjs.min-KiVL71rA.js";import{j as A}from"./jwt-B4KiaZnV.js";/* empty css                    */import{m as v}from"./proxy-CQK-WOoG.js";import{D as L}from"./index-D1DTbGX0.js";import{F as O}from"./Footer-hXPc4Tzd.js";import"./customParseFormat-Ceax_keq.js";import"./PurePanel-DeZC3cql.js";import"./index-C1FW6RQ6.js";import"./Portal-bFZPeb1_.js";import"./useId-Bji8iwmo.js";import"./isMobile-B4CO7CVJ.js";import"./Overflow-DimcLmKk.js";import"./useIcons-D8Xo9qVc.js";import"./CheckOutlined-BihJn51r.js";import"./DownOutlined-CZ6lxLXu.js";import"./roundedArrow-6vZVf-sn.js";import"./useLocale-DUSaQ6sR.js";import"./index-CSW4K44K.js";import"./DockBar-Ds7k9Pi-.js";import"./index-DQCX8ula.js";import"./userAtom-BJ4gzrPx.js";import"./index-i_TGYzGR.js";import"./searchAtom-B-a_Blas.js";const{RangePicker:R}=L,T=({open:o,onClose:n,onSelect:b})=>{const[l,r]=a.useState(1),[x,u]=a.useState("latest"),[i,j]=a.useState([d().subtract(1,"month"),d()]),m="YYYY/MM/DD";if(a.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[o]),!o)return null;const f=t=>{r(t)},h=()=>{let t,c,p;l==="direct"?(t=i[0].format("YYYY-MM-DD"),c=i[1].format("YYYY-MM-DD"),p="직접입력"):(t=d().subtract(l,"month").format("YYYY-MM-DD"),c=d().format("YYYY-MM-DD"),p=`${l}개월`),b(t,c,x==="latest",p),n()};return e.jsx("div",{children:e.jsx(v.div,{tabIndex:-1,className:"max-w-[768px] w-full left-1/2 -translate-x-1/2 fixed inset-0 bg-black/50 flex justify-center items-end z-50 overflow-hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(),children:e.jsxs(v.div,{className:" bg-white w-full rounded-t-3xl py-5 shadow-lg",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},drag:"y",dragConstraints:{top:0,bottom:100},dragElastic:.2,onDragEnd:(t,c)=>{c.offset.y>100&&n()},onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"w-12 h-1 bg-slate-400 rounded-full mx-auto mb-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-semibold text-slate-700 px-4 py-4",children:"조회기간"}),e.jsxs("div",{className:"w-full flex justify-center px-4",children:[[1,3,6,12].map(t=>e.jsxs("button",{onClick:()=>f(t),className:`w-1/5 py-3 text-slate-400 border border-slate-200 border-l-0 first:border-l las text-sm 
                    ${l===t?"bg-white !border-slate-400 !border text-slate-700":"bg-slate-50"}`,children:[t,"개월"]},t)),e.jsx("button",{onClick:()=>f("direct"),className:`w-1/5 py-3 text-slate-400 border border-slate-200 border-l-0 text-sm 
                  ${l==="direct"?"bg-white !border-slate-400 !border text-slate-700":"bg-slate-50"}`,children:"직접입력"})]}),l==="direct"&&e.jsx("div",{className:"px-4 mt-4",children:e.jsx(R,{value:i,onChange:t=>{t&&j([t[0],t[1]])},format:m,className:"custom-date-picker w-full py-3 rounded-none"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-semibold text-slate-700 px-4 py-4",children:"정렬선택"}),e.jsxs("div",{className:"flex justify-center px-4",children:[e.jsx("button",{onClick:()=>u("latest"),className:`w-1/2 py-3 text-slate-400 border border-slate-200 border-l-0 first:border-l text-sm
                  ${x==="latest"?"bg-white !border-slate-400 !border text-slate-700":"bg-slate-50"}`,children:"최신순"}),e.jsx("button",{onClick:()=>u("oldest"),className:`w-1/2 py-3 text-slate-400 border border-slate-200 border-l-0 text-sm
                  ${x==="oldest"?"bg-white !border-slate-400 !border text-slate-700":"bg-slate-50"}`,children:"과거순"})]})]}),e.jsx("div",{className:"px-4 mt-6",children:e.jsx(M,{type:"primary",className:"text-base h-auto py-3 w-full",onClick:h,children:"조회하기"})})]})})})},H=({handleClose:o})=>e.jsxs("div",{className:"max-w-[768px] w-full h-screen fixed top-0 left-1/2 -translate-x-1/2 bg-white z-50",children:[e.jsx(S,{icon:"",onClick:o}),e.jsxs("div",{className:"h-screen pb-16 flex flex-col justify-center items-center",children:[e.jsxs("div",{className:"relative inline-block p-4 w-36",children:[e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/241/241528.png",alt:""}),e.jsx("div",{className:"absolute top-0 left-0 w-10 h-10 rounded-tl-xl border-t-4 border-l-4 border-primary"}),e.jsx("div",{className:"absolute top-0 right-0 w-10 h-10 rounded-tr-xl border-t-4 border-r-4 border-primary"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-10 h-10 rounded-bl-xl border-b-4 border-l-4 border-primary"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-10 h-10 rounded-br-xl   border-b-4 border-r-4 border-primary"})]}),e.jsxs("p",{className:"flex items-center text-slate-700 text-base mt-6",children:[e.jsx(P,{className:"text-2xl text-slate-400 mr-1"}),e.jsx("b",{children:"QR코드"}),"를 촬영해주세요"]})]})]}),xe=()=>{const[o,n]=a.useState(!1),[b,l]=a.useState(!1),[r,x]=a.useState(),u=$(),[i,j]=a.useState(d().subtract(1,"month").format("YYYY-MM-DD")),[m,f]=a.useState(d().format("YYYY-MM-DD")),[h,t]=a.useState(!0),[c,p]=a.useState("1개월"),[g,D]=a.useState("최신순"),Y=()=>{o===!0&&n(!1)},y=async()=>{try{const s=await A.get(`/api/point/history?start_at=${i}&end_at=${m}&is_desc=${h}`);x(s.data.data),console.log("✅  pointHis  res:",s.data.data)}catch(s){console.log("✅  pointHis  error:",s)}};a.useEffect(()=>{y()},[]),a.useEffect(()=>{i&&m&&y()},[i,m,h]);const k=(s,C,N,w)=>{j(s),f(C),t(N),w&&p(w),D(N?"최신순":"과거순")};return e.jsxs("div",{children:[e.jsx(S,{icon:"back",title:"포인트",onClick:()=>u(-1)}),e.jsxs("div",{children:[e.jsxs("div",{className:"mx-4 my-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base text-slate-500 mb-[6px]",children:[r==null?void 0:r.userName,"님의",e.jsx("span",{className:"text-primary",children:"보유 포인트"})]}),e.jsxs("h1",{className:"text-4xl font-bold text-slate-700",children:[r==null?void 0:r.remainPoint.toLocaleString(),e.jsx("span",{className:"font-light text-slate-500 ml-3",children:"P"})]})]}),e.jsxs("div",{className:"flex py-6 border-[1px] border-slate-200 rounded-lg mt-4",children:[e.jsxs("div",{className:"flex flex-col flex-1 items-center gap-[6px] border-r-[1px] border-slate-100 cursor-pointer",onClick:()=>n(!0),children:[e.jsx("img",{src:"/images/icon/IoQrCode.svg",alt:"IoQrCode",className:"w-6 aspect-square"}),e.jsx("p",{className:"text-sm text-slate-700",children:"QR/스마트 결제"})]}),e.jsxs(I,{to:"payment",className:"flex flex-col flex-1 items-center gap-[6px] cursor-pointer",children:[e.jsx("img",{src:"/images/icon/AiOutlinePlusCircle.svg",alt:"AiOutlinePlusCircle",className:"w-6 aspect-square"}),e.jsx("p",{className:"text-sm text-slate-700",children:"포인트 충전"})]})]})]}),e.jsxs("ul",{className:"px-4",children:[e.jsxs("li",{className:"flex justify-between py-4 ",children:[e.jsx("p",{className:"text-base text-slate-700 font-semibold",children:"적립/사용내역"}),e.jsxs("button",{onClick:()=>l(!b),className:"flex items-center gap-[6px] text-sm text-slate-500",children:[c," · ",g,e.jsx(E,{className:"text-slate-400 text-sm"})]})]}),r==null?void 0:r.pointList.map(s=>e.jsxs("li",{className:"flex justify-between py-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-700 text-base mb-[2px]",children:s.usedAt}),e.jsx("p",{className:"text-slate-400 text-sm tracking-tight",children:s.addedAt})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-lg font-semibold mb-[2px] ${[1,4].includes(s.category)?"text-primary":"text-slate-700"}`,children:[1,4].includes(s.category)?`+${s.amount.toLocaleString()}P`:`${s.amount.toLocaleString()}P`}),e.jsxs("p",{className:"text-slate-400 text-sm text-right",children:[s.remainPoint.toLocaleString(),"P"]})]})]},s.pointHistoryId))]})]}),o&&e.jsx(H,{handleClose:Y}),e.jsx(T,{open:b,onClose:()=>l(!1),onSelect:k}),e.jsx(O,{})]})};export{xe as default};
