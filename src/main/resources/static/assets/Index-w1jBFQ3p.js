import{u,j as e,S as N,N as L,r,U as y,V as k,L as R,a$ as A,g as P,M as F,I as E,c as B}from"./index-CiM0iehI.js";import{b as V}from"./index-D5eFVfyz.js";import{C as D}from"./index-DxYWFAJ6.js";import{F as z}from"./index-DD-JyHDZ.js";import{u as Y}from"./userAtom-z3SjLGJk.js";import{D as _}from"./DockBar-CTYLmRzl.js";import{S as w,a as b}from"./swiper-react-DXCZApEp.js";import{R as H}from"./index-ntae1Qnb.js";import{F as M}from"./Footer-y3LJIjFf.js";import"./userSelector-CYXCfKbj.js";import{N as O}from"./NotificationComponent-BuYRDQ6d.js";import{j as U}from"./jwt-QgJYqd_L.js";import"./index-BCTjbqQi.js";import"./searchAtom-DTGwh01d.js";import"./eventsource-Cd5SwtWz.js";import"./index-c8GoCNeN.js";import"./index-BB0IkGXf.js";import"./Portal-C3bpsPPe.js";import"./useId-CfZRftqB.js";import"./isMobile-B4CO7CVJ.js";import"./motion-BUbX8Cb0.js";import"./roundedArrow-CePw_OaH.js";import"./zoom-BZWbfUq2.js";const q=({festivities:a})=>{const l=u();return e.jsx("div",{children:e.jsx(w,{slidesPerView:1.3,spaceBetween:12,className:"mySwiper",children:a.map(s=>e.jsxs(b,{className:"aspect-[3/4] cursor-pointer relative text-white rounded-tl-[32px] rounded-br-[32px] overflow-hidden after:absolute after:left-0 after:bottom-0 after:w-full after:h-[50%] after:bg-gradient-to-b after:from-transparent after:to-black after:opacity-70",onClick:()=>l(`/contents/index?strfId=${s.strfId}`),children:[e.jsx("img",{src:`${N}/${s.strfId}/${s.strfPic}`,alt:s.festTitle,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute bottom-10 right-8 text-right z-[99] pl-8",children:[s.open&&e.jsx("span",{className:"text-xs inline-block bg-secondary3 px-2 py-1 font-light ",children:"개최중"}),e.jsx("h2",{className:"text-xl font-semibold",style:{wordBreak:"auto-phrase"},children:s.festTitle}),e.jsxs("h4",{className:"text-sm font-medium ",children:[s.startAt.replaceAll("-","."),"~",s.endAt.replaceAll("-",".")]}),e.jsx("p",{className:"text-sm font-normal",children:s.locationTitle})]})]},s.strfId))})})},G=({locations:a})=>e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-700",children:["국내 여행지 ",e.jsx("b",{className:"text-secondary3 font-bold",children:"BEST 10"})]}),e.jsx(w,{slidesPerView:3,spaceBetween:12,className:"mySwiper ",children:a.map((l,s)=>e.jsx(b,{className:"relative pt-5",children:e.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden ",children:[e.jsx("img",{src:`${L}/${l.locationPic}`,alt:l.locationTitle,className:"opacity-70 w-full aspect-square object-cover"}),e.jsx("p",{className:"absolute z-[999] bg-secondary3 text-white w-6 h-6 leading-6 left-0 top-0 text-center inline-block text-xs rounded-br-lg",children:s+1}),e.jsxs("div",{className:"absolute top-[50%] left-[50%] -translate-x-1/2 -translate-y-1/2 text-center text-white ",children:[e.jsx("p",{className:"text-xs",children:"대한민국"}),e.jsx("h3",{className:"font-semibold text-lg mt-1",children:l.locationTitle})]})]})},l.locationId))})]}),W=({recent:a,getMainList:l,setFestivities:s,setLocations:v,setRecent:j,setRecommend:g})=>{const d=u(),[n,m]=r.useState("STAY"),p={STAY:"숙소",RESTAUR:"맛집",TOUR:"관광지"},i=a.find(t=>t.category===n),h=async t=>{const f={strfId:t.strfId};console.log("찜하기 데이터:",f);try{const x=await axios.post("/api/wish-list",{...f},{headers:{Authorization:`Bearer ${accessToken}`}});console.log("찜하기",x.data),x.data.code==="200 성공"&&l()}catch(x){console.log("찜하기",x)}};return!a||a.length===0?null:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-700",children:"최근 본 목록"}),e.jsx("div",{children:a.map(t=>e.jsx("button",{onClick:()=>m(t.category),className:`px-4 py-1.5 my-5 border cursor-pointer text-base mr-3 rounded-2xl ${n===t.category?"bg-primary text-white border-none":"bg-white text-slate-500 border-1 border-slate-300"}`,children:p[t.category]},t.category))}),e.jsx("div",{className:" flex flex-wrap ",children:i==null?void 0:i.recent.slice(0,6).map(t=>e.jsxs("div",{className:"w-full flex items-center gap-5 mb-5 cursor-pointer",onClick:()=>{d(`/contents/index?strfId=${t.strfId}`)},children:[e.jsxs("div",{className:"w-[14vw] min-w-32 aspect-square rounded-lg relative overflow-hidden",children:[e.jsx("img",{src:`${N}/${t.strfId}/${t.strfPic}`,alt:t.strfTitle,className:"w-full h-full object-cover"}),e.jsx("i",{className:"absolute top-2.5 right-2.5 cursor-pointer",onClick:()=>h(item),children:t.wishIn?e.jsx(y,{className:"text-secondary3 text-lg"}):e.jsx(k,{className:"text-white text-lg"})})]}),e.jsxs("div",{className:"flex-1 pr-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-700 break-keep",children:t.strfTitle}),e.jsxs("p",{className:"font-light text-sm text-slate-400",children:[t.locationName," · ",p[n]]}),e.jsx("div",{children:e.jsx(H,{disabled:!0,allowHalf:!0,defaultValue:t.averageRating,className:"custom-star"})}),e.jsxs("div",{className:"flex text-slate-400 text-sm items-center gap-1",children:[t.wishIn?e.jsx(y,{className:"text-secondary3 text-lg"}):e.jsx(k,{className:"text-slate-400 text-lg"}),t.wishCnt]})]})]},t.strfId))})]})},J=({recommend:a})=>{const l=u();return!a||a.length===0?null:e.jsxs("div",{children:[e.jsx("h1",{className:"px-4 text-2xl font-bold text-slate-700",children:"회원님에게 추천하는 여행지"}),e.jsx(w,{slidesPerView:2.3,breakpoints:{420:{slidesPerView:2.3},0:{slidesPerView:1}},className:"mySwiper mt-5",children:a.map(s=>e.jsxs(b,{className:"align-middle justify-center  px-3 cursor-pointer",onClick:()=>l(`/contents/index?strfId=${s.strfId}`),children:[e.jsx("img",{src:`${N}/${s.strfId}/${s.strfPic}`,alt:s.strfTitle,className:"w-full aspect-[6/4] rounded-tr-[32px] rounded-bl-[32px]"}),e.jsxs("div",{className:" gap-[6px] mt-3 ml-3 w-full",children:[e.jsx("span",{className:"bg-slate-800 text-white py-1 px-2 rounded-2xl font-light text-xs inline",children:s.locationTitle}),e.jsx("h2",{className:"text-xl font-semibold break-keep mt-1",children:s.strfTitle}),e.jsx("p",{className:"text-lg font-light text-slate-600 break-keep mt-1",children:s.explain}),e.jsxs(R,{to:"",className:"py-2 text-sm text-slate-400 flex items-center font-light",children:["자세히보기 ",e.jsx(A,{className:"text-lg"})]})]})]},s.strfId))})]})},Ne=()=>{const a=P("accessToken"),[l,s]=r.useState([]),[v,j]=r.useState([]),[g,d]=r.useState([]),[n,m]=r.useState([]);r.useState(!1);const[p,i]=r.useState(0),h=async()=>{try{let c;a?c=await U.get("/api/home"):c=await B.get("/api/home"),console.log("메인",c.data.data);const{festivalList:S,locationList:T,recentList:$,recommendList:C}=c.data.data;s(S),j(T),d($),m(C)}catch(c){console.log(c)}};r.useEffect(()=>{h()},[]);const t=()=>{window.scrollY>0?i(!0):i(!1)};window.addEventListener("scroll",t);const[f,x]=F(Y),o=u();r.useEffect(()=>{},[f]);const I=()=>{o("/search/before")};return e.jsxs("div",{children:[e.jsxs("header",{className:`flex h-auto items-center px-4 py-3 max-w-3xl w-full sticky top-0 left-0 z-10 duration-300 ${p?"shadow-sm":"shadow-none"} z-50 bg-white `,children:[e.jsx("h1",{className:"w-[32vw] max-w-32 mr-auto",children:e.jsx("img",{src:"/images/logo_1.png",alt:"main_logo",className:"cursor-pointer",onClick:()=>{o("/")}})}),e.jsxs("nav",{className:" flex gap-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx(V,{onClick:()=>o("/user/notification"),className:"text-2xl text-slate-400 cursor-pointer"}),e.jsx(O,{token:a})]}),e.jsx(D,{className:"text-2xl text-slate-400 cursor-pointer",onClick:()=>{o(a?"/user/index":"/signin")}})]})]}),e.jsxs("main",{className:"pb-10",children:[e.jsx("section",{className:"px-4 mt-3",children:e.jsx(E,{className:"h-auto text-sm rounded-lg  !bg-slate-100 !border-slate-300 py-[14px] px-3",placeholder:" 지금 어디로 여행을 떠나고 싶으신가요?",readOnly:!0,prefix:e.jsx(z,{className:"text-slate-400 text-sm"}),onClick:()=>I()})}),e.jsx("section",{className:"px-4 mt-5",children:e.jsx(q,{festivities:l})}),e.jsx("section",{className:"px-4 mt-10",children:e.jsx(G,{locations:v})}),e.jsxs("section",{className:"bg-[#E8F6EF] px-4 mt-10 mx-4 h-[100px] xs:h-28 md:h-36 max-h-[140px] rounded-2xl flex items-center relative",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-light text-[#4C4C6D]",children:"신규회원 가입시 누구나"}),e.jsx("p",{className:"text-lg font-semibold text-[#4C4C6D]",children:"최대 20만원 쿠폰팩 증정"})]}),e.jsx("img",{src:"/images/main-banner_img.png",alt:"",className:"w-36 xs:w-40 md:w-42 absolute right-6 -top-5 md:!-top-7"})]}),g&&e.jsx("section",{className:"px-4 mt-10",children:e.jsx(W,{recent:g,getMainList:h,setFestivities:s,setLocations:j,setRecent:d,setRecommend:m})}),e.jsx("section",{className:"mt-10 w-full",children:e.jsx(J,{recommend:n})})]}),e.jsx(M,{}),e.jsx(_,{})]})};export{Ne as default};
