import{g as T,u as A,r as t,c as f,j as s,o as E,I as L,S as D}from"./index-BimvysYt.js";import{j as h}from"./jwt-jY-xOGEA.js";import{F as _}from"./index-BPQRvUZ9.js";import{S as z,a as F}from"./swiper-react-Cs8l4XxB.js";import{c as M}from"./match-DVYPyL97.js";import"./index-CBTeAnO8.js";import"./index-RocX-qI1.js";import"./index-uWf7NwqX.js";import"./index-DLTftulB.js";import"./index-CKWfeYRa.js";const X=()=>{const c=T("accessToken"),r=A(),m=()=>{r("/")},[n,u]=t.useState([]),[o,g]=t.useState([]),[x,j]=t.useState([]),[N,i]=t.useState(!1),[b,d]=t.useState(!1),y=t.useRef(null),k=t.useCallback(async()=>{const e="/api/search/popular";try{const a=await f.get(e);u(a.data.data)}catch(a){console.log("인기 검색어",a)}},[]),p=t.useCallback(async()=>{try{const a=(await h.get("/api/search/basic")).data;g(a.data)}catch(e){console.log("최근 본 검색 결과",e)}},[]),w=t.useCallback(async()=>{d(!0);try{const l=(await h.get("/api/search/list")).data.data.filter(R=>R.txt!=="");j(l),d(!1)}catch(e){console.log("최근 검색어 호출 결과:",e),d(!1)}},[]);t.useCallback(async e=>{const a={strf_id:e.strfId};try{const l=await f.patch(`/api/recent/hide?strf_id=${e.strfId}`,{...a},{headers:{Authorization:`Bearer ${c}`}});console.log(l.data),l.data&&p()}catch(l){console.log("개별 삭제",l)}},[]);const C=t.useCallback(async()=>{try{const e=await f.patch("/api/recent/hide/all",{},{headers:{Authorization:`Bearer ${c}`}});console.log(e.data),e.data&&(p(),i(!1))}catch(e){console.log("개별 삭제",e)}},[]),v=t.useCallback(e=>{console.log("클릭한 최근 검색어:",e),r(`/search/strf?keyword=${e.txt}&category=0&orderType=0&filter=none`)},[]),I=t.useCallback(e=>{console.log("클릭한 인기 검색어:",e),r(`/contents/index?strfId=${e.strfId}`)},[]),S=t.useCallback(e=>{console.log("클릭한 최근 본 목록:",e),r(`/contents/index?strfId=${e.strfId}`)},[]),$=t.useCallback(()=>{},[]),B=()=>{i(!1)},P=e=>{r(`/search/strf?keyword=${e.target.value}&category=0&orderType=0&filter=none`)};return t.useEffect(()=>{k(),c&&(p(),w())},[]),s.jsxs("div",{className:"w-full flex flex-col  mb-[100px]",children:[s.jsxs("section",{className:"w-full px-4 py-6 flex items-center gap-3 relative",ref:y,children:[s.jsx("div",{className:"text-3xl cursor-pointer",onClick:()=>{m()},children:s.jsx(E,{})}),s.jsx("label",{htmlFor:"searchBar",className:"relative w-full",children:s.jsx(L,{id:"searchBar",placeholder:"관광지, 장소, 숙소,맛집을 검색해 보세요",allowClear:!0,onClear:$,suffix:s.jsx(_,{className:"text-slate-400 text-2xl"}),onPressEnter:e=>{e.target.value.trim()&&P(e)},variant:"filled",className:`max-h-[60px] h-[16vw] text-lg rounded-lg gap-[5px]\r
            bg-slate-50 hover:bg-slate-100 placeholder:text-slate-400 `})})]}),s.jsxs("section",{className:"flex flex-col gap-8 px-4",children:[c&&s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-700 select-none",children:"최근 검색어"}),s.jsx("ul",{className:"flex gap-3 flex-wrap",children:b?s.jsxs("div",{className:"flex justify-center items-center",children:[s.jsx("li",{className:"text-transparent bg-slate-50 px-4 py-[6px] rounded-[20px] text-sm select-none",children:"제주"}),s.jsx("li",{className:"text-transparent bg-slate-50 px-4 py-[6px] rounded-[20px] text-sm select-none",children:"제주"}),s.jsx("li",{className:"text-transparent bg-slate-50 px-4 py-[6px] rounded-[20px] text-sm select-none",children:"제주"}),s.jsx("li",{className:"text-transparent bg-slate-50 px-4 py-[6px] rounded-[20px] text-sm select-none",children:"제주"}),s.jsx("li",{className:"text-transparent bg-slate-50 px-4 py-[6px] rounded-[20px] text-sm select-none",children:"제주"})]}):x?x==null?void 0:x.map((e,a)=>s.jsx("li",{className:"cursor-pointer text-slate-700 bg-slate-50 px-4 py-[6px] rounded-[20px] text-sm select-none",onClick:()=>v(e),children:e.txt},a)):s.jsx("li",{className:"text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",children:"데이터 없음"})})]}),s.jsxs("div",{className:"flex flex-col gap-[30px]",children:[s.jsx("h2",{className:"text-lg  font-semibold text-slate-700 select-none",children:"인기 검색어"}),s.jsx("ul",{className:"flex flex-col gap-[20px] flex-wrap h-[40vw] max-h-[230px]",children:n?n==null?void 0:n.map((e,a)=>s.jsx("li",{className:"cursor-pointer ",onClick:()=>I(e),children:s.jsxs("p",{className:"flex gap-3 items-center select-none",children:[s.jsx("span",{className:"text-slate-700 text-sm font-semibold",children:a+1}),s.jsx("span",{className:"text-slate-700 text-sm",children:e.strfName})]})},a)):s.jsx("li",{className:"text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",children:"데이터 없음"})})]}),c&&s.jsxs("div",{className:"flex flex-col gap-[30px]",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg  font-semibold text-slate-700 select-none",children:"최근 본 상품"}),s.jsx("button",{type:"button",className:"text-slate-400 text-[18px] select-none",onClick:()=>i(!0),children:"모두 삭제"})]}),s.jsx("div",{className:"w-full select-none",children:s.jsx(z,{slidesPerView:2.5,spaceBetween:12,direction:"horizontal",className:"w-full flex select-none",children:o?o==null?void 0:o.map((e,a)=>s.jsx(F,{className:"w-auto !h-auto shrink-0 select-none",onClick:()=>S(e),children:s.jsxs("div",{className:"flex flex-col gap-[15px] w-full select-none",children:[s.jsx("div",{className:"aspect-square w-full rounded-2xl overflow-hidden",children:s.jsx("img",{className:"w-full h-full object-cover",src:e.strfPic?`${D}/${e.strfId}/${e.strfPic}`:"/images/logo_icon_4.png",alt:e.strfName})}),s.jsxs("div",{className:"flex flex-col gap-[5px] justify-center",children:[s.jsx("div",{className:"text-[18px] text-slate-700 font-semibold",children:e.strfName}),s.jsxs("div",{className:"flex gap-[5px]",children:[s.jsx("span",{className:"text-slate-500 text-sm",children:M(e.category)}),s.jsx("span",{className:"text-slate-500 text-sm",children:"•"}),s.jsx("span",{className:"text-slate-500 text-sm",children:e.locationTitle})]})]})]})},a)):null})})]})]}),N&&s.jsx(CenterModal,{handleClickCancle:B,handleClickSubmit:C,content:"최근 본 목록을 모두 삭제하시겠습니까?"})]})};export{X as default};
