import{g as L,h as T,u as B,r as a,j as e,l as f,B as k,q as P}from"./index-Bm9G2PMV.js";import{T as q}from"./TitleHeader-C44OYHxH.js";import{S as C}from"./ScheduleDay-BIOg69K7.js";import{j as h}from"./jwt-Dn912jOj.js";import{F as o}from"./index-BlAJfQ7H.js";import{U as E}from"./index-D7LfL9HE.js";import"./index-C5zS-AqD.js";import"./index-C-xthC12.js";import"./index-BQ4hq33F.js";import"./match-B5cQztbu.js";import"./index-DeqWFgCu.js";import"./index-BaGKYDlI.js";import"./index-BkaPrlqb.js";import"./index-DmEfB633.js";import"./index-C9KCZpy3.js";import"./index-DUn6QwIU.js";import"./tripAtom-7MqWoO1T.js";import"./CenterModal-DhGjZK3-.js";import"./dayjs.min-C5j8qgA9.js";import"./MarkerClusterer-CN--b_2d.js";import"./index-8R5iMGzs.js";import"./index-ylnYrNX2.js";import"./index-D4xBV9bV.js";import"./Portal-DxuW4Xz7.js";import"./useId-CZlJin9A.js";import"./motion-DRcDUBp1.js";import"./roundedArrow-CubeYIpZ.js";import"./zoom-K_8YKqxC.js";import"./responsiveObserver-uzRv6USo.js";import"./index-Be5biOyE.js";import"./useLocale-D2xSzVRw.js";import"./fade-CmhG3U0-.js";import"./CheckOutlined-Dsj-6UOX.js";const ue=()=>{var d;L("accessToken");const[u]=T(),n=parseInt(u.get("tripId")),g=B(),j=()=>{g(-1)};a.useState(""),a.useState("여행기 제목"),a.useState("");const[y,b]=a.useState({}),[p,c]=a.useState([]),[w,m]=a.useState(!1),v=async()=>{try{const t=await h.get(`/api/trip?trip_id=${n}`);console.log("여행확인하기",t.data);const l=t.data.data;b(l)}catch(t){console.log(t)}};a.useEffect(()=>{v()},[]);const[N]=o.useForm(),S=({fileList:t})=>c(t),D=async t=>{const{title:l,file:r,content:F}=t,I={tripId:n,title:l,content:F},i=new FormData;c(r.fileList),i.append("req",new Blob([JSON.stringify(I)],{type:"application/json"})),console.log(t),console.log(p),r&&r.fileList&&r.fileList.length>0&&r.fileList.forEach(s=>{i.append("tripReviewPic",s.originFileObj)});const x=i.get("p");x&&x.text().then(s=>console.log("p의 내용:",s)),console.log("보낸 데이터",[...i]);try{const s=await h.post("/api/trip-review",i);s.data.code==="200 성공"&&P.success("여행기 등록에 성공했습니다"),console.log(s.data)}catch(s){console.error(s)}};return e.jsxs("div",{children:[e.jsx(q,{icon:"back",onClick:j,title:"여행기 공유"}),e.jsx("div",{className:"mt-[60px] py-[40px] flex flex-col gap-[40px]",children:e.jsx("div",{className:"flex flex-col  px-[32px]",children:e.jsxs(o,{form:N,onFinish:D,layout:"vertical",className:"flex flex-col gap-[48px]",children:[e.jsx(o.Item,{name:"file",rules:[{required:!0,message:"여행기를 위한 사진을 올려주세요."}],children:e.jsx(E,{id:"file",listType:"picture-card",beforeUpload:()=>!1,fileList:p,onChange:S,accept:"image/*",multiple:!0,children:p.length<5&&"+ Upload"})}),e.jsx(o.Item,{name:"title",className:`border-b ${w?"border-primary":"border-slate-200"}`,children:e.jsx(f,{variant:"borderless",className:` px-[10px] py-[10px]\r
                text-slate-400 text-[36px] font-semibold\r
              placeholder:text-slate-400\r
                 `,onFocus:()=>m(!0),onBlur:()=>m(!1),placeholder:"여행기 제목"})}),e.jsx(o.Item,{name:"content",children:e.jsx(f.TextArea,{rows:4,placeholder:"이번 여행은 어떠셨나요? 여행에 대한 감상과 여행에서 경험한 꿀팁들을 남겨 다른 회원님들과 공유해보세요 !",variant:"borderless",maxLength:100,autoSize:{minRows:3,maxRows:5},style:{height:300,resize:"none"},className:"placeholder: text-[24px] placeholder: text-slate-400"})}),e.jsx("div",{className:"flex flex-col gap-[50px]",children:(d=y.days)==null?void 0:d.map((t,l)=>e.jsx(C,{data:t,showMap:!1,readOnly:!0}))}),e.jsx(o.Item,{className:"w-full",children:e.jsx(k,{type:"primary",htmlType:"submit",className:`w-full h-[80px] \r
                    text-slate-50 text-[24px] font-semibold`,children:"완료"})})]})})})]})};export{ue as default};
