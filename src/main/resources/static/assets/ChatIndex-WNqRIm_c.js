import{r as a,u as m,j as e,m as g,g as h,T as j,l as v}from"./index-C92yST0r.js";import{L as C}from"./index-CdxTluAn.js";const N=({chatList:l})=>{const n=m(),c=s=>{n(`/chatroom?roomId=${s}`)};return e.jsx(e.Fragment,{children:e.jsx("ul",{className:"flex flex-col",children:l.map((s,r)=>e.jsxs("li",{className:"flex items-center justify-between gap-3 px-4 py-4 cursor-pointer",onClick:()=>c(s.roomId),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 bg-slate-200 flex items-center justify-center rounded-2xl overflow-hidden",children:e.jsx("img",{src:`${g}/${s.pic}`,alt:"채팅방 사진"})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("p",{className:"text-lg text-slate-700 font-semibold",children:s.title}),e.jsx("p",{children:s.latestChat})]})]}),e.jsxs("div",{className:"flex flex-col items-end justify-between",children:[e.jsx("p",{className:"text-sm text-slate-400",children:s.lastChatTime}),s.unreadChat&&e.jsx("p",{className:"px-3 py-[5px] bg-primary rounded-2xl text-white text-sm",children:s.unreadChat})]})]},r))})})},y=a.memo(N),k=()=>{const l=h("accessToken"),c=h("user").role[0],s=m(),r=()=>{s("/")},[u]=a.useState("전체"),[o,i]=a.useState([]),[x,p]=a.useState(0),f=async()=>{try{const t=(await v.get(`/api/chat-room?page=${x}&role=${c}`,{headers:{Authorization:`Bearer ${l}`}})).data;return console.log("채팅 목록 조회",t),t.code==="200 성공"&&i(t.data),t.data.length===30&&p(x+1),t}catch(d){return console.log("채팅 목록 조회",d),i([]),null}};return a.useEffect(()=>{f()},[]),e.jsxs("div",{className:"max-w-[768px] min-w-xs mx-auto relative min-h-screen ",children:[e.jsx(j,{title:"채팅",icon:"back",onClick:r}),e.jsx("div",{children:o.length>0?e.jsx(y,{category:u,chatList:o}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-[16px] pt-28",children:[e.jsx("i",{className:"text-6xl text-slate-400",children:e.jsx(C,{})}),e.jsx("p",{className:"text-slate-400",children:"채팅 목록이 없습니다."})]})})]})};export{k as default};
