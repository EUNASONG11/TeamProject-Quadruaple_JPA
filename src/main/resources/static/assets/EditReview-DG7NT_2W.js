import{g as E,b as S,u as k,M as A,Y as B,r as C,j as e,a7 as T,B as h,c as p,J as i}from"./index-C93OXIGC.js";import{e as g,R as _}from"./ReviewItem-B_H6MOod.js";import{S as z}from"./StrfInfo-DBD94q7n.js";import{S as D}from"./index-BTIIt3Y0.js";import"./index-C-xkmeiy.js";import"./index-BrsyDvBu.js";import"./index-D85vvWje.js";import"./BottomSheet-D7-uJt9r.js";import"./proxy-Dj3NXsV6.js";import"./swiper-react-Cpepichv.js";import"./index-CasC0ZUd.js";import"./index-Dngrxowb.js";import"./index-Q7DGeqqa.js";import"./Portal-CSn-TfAb.js";import"./useId-BANbKrPT.js";import"./isMobile-B4CO7CVJ.js";import"./motion-0KRY6bgR.js";import"./roundedArrow-sw5LZQSn.js";import"./zoom-CHy3k0MF.js";const se=()=>{const m=E("accessToken"),[o]=S(),d=Number(o.get("strfId")),w=Number(o.get("reviewId")),f=Number(o.get("replayId")),u=o.get("type"),y=k(),x=()=>{y(`/business/review?strfId=${d}`)},[t,R]=A(g),v=B(g),[j,n]=C.useState(!1),I=async()=>{var a;const r="/api/business/review/create",c={reviewId:w,content:t.reviewReply};n(!0);try{const l=(await p.post(r,c,{headers:{Authorization:`Bearer ${m}`}})).data;return l&&(n(!1),x(),v(),i.success("리뷰가 작성되었습니다")),console.log("대댓글 생성",l),l}catch(s){return p.isAxiosError(s)&&(console.error("Error status:",(a=s.response)==null?void 0:a.status),console.error("Error message:",s.message)),console.log("대댓글 생성",s),i.success("리뷰 작성에 실패했습니다"),n(!1),null}},N=async()=>{const r="/api/business/review/update",c={reviewReplyId:f,content:t.reviewReply};try{const s=(await p.put(r,c,{headers:{Authorization:`Bearer ${m}`}})).data;return s&&(v(),x(),i.success("리뷰 수정을 성공했습니다.")),console.log("대댓글 생성",s),s}catch(a){return console.log("대댓글 생성",a),i.success("리뷰 수정에 실패했습니다."),null}},b=()=>{u==="create"?I():N()};return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(z,{}),e.jsx("div",{className:"px-4",children:e.jsx("h2",{className:"text-2xl font-semibold text-slate-600",children:u==="create"?"댓글 작성":"댓글 수정"})}),t.userReview&&e.jsx(_,{strfId:d,item:t.userReview}),e.jsx("div",{className:"px-4",children:e.jsx(D,{spinning:j,children:e.jsx(T,{placeholder:"댓글을 입력해주세요",maxLength:50,style:{resize:"none",height:"27.73vw",padding:"20px"},value:t.reviewReply,onChange:r=>{R({...t,reviewReply:r.target.value})}})})}),e.jsxs("div",{className:"px-4 py-3 flex gap-3 justify-end",children:[e.jsx(h,{color:"primary",variant:"outlined",className:"text-xl font-semibold px-3 py-1 max-h-[50px] h-[16vw]",children:"취소"}),e.jsx(h,{type:"primary",className:"text-xl font-semibold px-3 py-1 max-h-[50px] h-[16vw]",onClick:b,children:"등록"})]})]})};export{se as default};
