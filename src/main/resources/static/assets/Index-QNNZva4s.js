import{f as H,u as Q,g,ag as d,U as C,t as M,S as W,r,j as e,$ as X,a3 as J,a2 as K,b as V,W as Z,X as ee,a5 as se,a1 as I,aD as te,e as S,a6 as ae,s as A,R as ne}from"./index-DZF_lMwV.js";import{G as oe}from"./index-Ce58HCJJ.js";import{R as ie}from"./index-C2sVj-25.js";import{b as le,d as re,m as j,a as ce}from"./match-DOxPiXvs.js";import"./index-C8yBNrXo.js";import"./index-BDHbZjIV.js";import"./index-DWVMhexM.js";import"./index-CqiZLVFA.js";import"./index-BMyrdrr4.js";const ue=H({key:"salesAtom",default:{data:[]}}),ye=()=>{var k,w;const o=Q(),O=s=>{o(`/chatroom?roomId=${s}`)},l=g("user"),y=g("accessToken"),n=(k=l==null?void 0:l.strfDtos[0])==null?void 0:k.strfId,i=le((w=l==null?void 0:l.strfDtos[0])==null?void 0:w.category)||d.STAY,T=C(M),D=C(ue),h=W(M),R=()=>{o("/business")},[c,E]=r.useState(0),[u,B]=r.useState(0),[x,v]=r.useState(!1),[m,N]=r.useState(!1),[f,P]=r.useState(null),[p,$]=r.useState(!1),U=async()=>{const s="/api/user/userInfo";$(!0);try{const a=(await S.get(s,{headers:{Authorization:`Bearer ${y}`}})).data;a&&P(a.data)}catch(t){console.log("유저 정보 조회",t)}finally{$(!1)}},_=async()=>{const s="/api/chat-room/admin";try{const t=await S.post(s,null,{headers:{Authorization:`Bearer ${y}`}});console.log("관리자 채팅방 생성",t.data);const a=t.data;return a.code==="200 성공"&&O(a.data),a}catch(t){return console.log("관리자 채팅방 생성",t),null}},L=[{icon:re(i),name:"가게 관리",path:"/business/store",subMenu:[{name:"기본 정보",path:`/business/store?strfId=${n}&category=${i}&tab=0`},{name:"운영정보",path:`/business/store?strfId=${n}&category=${i}&tab=1`}]},{icon:ce(i),name:`${j(i)} 관리`,path:"/business/menu",subMenu:[{name:`${j(i)} 목록`,path:`/business/menu?strfId=${n}&category=${i}`},{name:`${j(i)} 등록`,path:`/business/menu/create?strfId=${n}&category=${i}`}]},{icon:e.jsx(X,{}),name:"리뷰 관리",path:`/business/review?strfId=${n}`},{icon:e.jsx(J,{}),name:"포인트 관리",path:"/business/point",subMenu:[{name:"포인트 입금 내역",path:`/business/point?strfId=${n}`},{name:"포인트 QR 생성",path:`/business/point/qr?strfId=${n}`}]}],Y=[{icon:e.jsx(K,{}),name:"쿠폰 관리",path:"/business/coupon",subMenu:[{name:"쿠폰 목록",path:`/business/coupon?strfId=${n}`},{name:"쿠폰 발급",path:`/business/coupon/create?strfId=${n}`}],category:[d.STAY]},{icon:e.jsx(oe,{}),name:"예약 관리",path:`/business/booking?strfId=${n}`,category:[d.STAY]}],F=[{name:"공지사항",onClick:()=>o("/announcement?type=business")},{name:"자주 묻는 질문",onClick:()=>o("/qna")},{name:"관리자에게 문의하기",onClick:()=>_()}],G=s=>{c===s?(m&&N(!1),v(!x)):E(s)},q=s=>{u===s?(x&&v(!1),N(!m)):B(s)},z=()=>{T(),D(),ae("accessToken");const s=g("user");s.isSaveEmail===!1&&A("user",{...s,email:""}),s.isSaveLogin===!1&&A("user",{...s,userId:"",email:"",accessToken:"",role:[ne.GUEST]}),o("/signin")};return r.useEffect(()=>{U()},[]),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(V,{icon:"close",title:"",onClick:R,rightContent:e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("button",{type:"button",children:e.jsx(Z,{})}),e.jsx("button",{type:"button",onClick:()=>o("/business/mypage/edit"),children:e.jsx(ee,{})})]})}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-col items-center gap-5 px-5 pt-5 pb-4 ",children:[p&&e.jsx("div",{className:"mx-auto w-32 h-32 rounded-full overflow-hidden bg-slate-100"}),!p&&e.jsx("div",{className:"mx-auto w-32 h-32 rounded-full overflow-hidden bg-slate-100",children:e.jsx("img",{src:`${se}/${l==null?void 0:l.userId}/${f==null?void 0:f.profilePic}`,alt:"User-Profile",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"text-2xl text-slate-700 flex items-end gap-2",children:[p&&e.jsx("span",{className:"text-transparent",children:"닉네임"}),!p&&e.jsx("span",{className:"text-3xl font-semibold line-clamp-1",children:h==null?void 0:h.name})]})]}),e.jsx("div",{className:"w-full h-[2.67vw] max-h-[10px] bg-slate-100"}),e.jsx("ul",{className:"flex flex-col gap-5 px-6",children:n?e.jsxs(e.Fragment,{children:[L.map((s,t)=>e.jsxs("li",{className:"py-4",children:[e.jsxs("button",{type:"button",onClick:()=>{s.subMenu?G(t):o(s.path)},className:"w-full flex items-center justify-between gap-4 text-2xl font-medium text-slate-700 ",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"text-2xl text-slate-400",children:s.icon}),s.name]}),s.subMenu&&e.jsx("i",{className:`text-2xl text-slate-300 ${c===t&&x===!0?"rotate-90":"rotate-0"} transition-transform duration-300`,children:e.jsx(I,{})})]}),s.subMenu&&e.jsx("ul",{className:`flex flex-col py-4 ${c===t&&x===!0?"visible h-auto opacity-100 relative":"invisible max-h-0 opacity-0 absolute"} overflow-hidden transition-[max-height] duration-300 ease-in-out opacity-transition`,style:{transitionProperty:"opacity, max-height, visibility",transitionDuration:c===t?"400ms":"300ms"},children:s.subMenu.map((a,b)=>e.jsx("li",{className:`px-10 py-2 text-xl text-slate-500 cursor-pointer\r
                      hover:bg-slate-100 transition-all duration-300 flex items-center justify-between`,onClick:()=>o(a.path),children:a.name},b))})]},t)),Y.map((s,t)=>e.jsxs("li",{className:"py-4",children:[e.jsxs("button",{type:"button",onClick:()=>{s.subMenu?q(t):o(s.path)},className:`w-full flex items-center justify-between gap-4 text-2xl font-medium text-slate-700
                      ${i===d.STAY?"":"hidden"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("i",{className:"text-2xl text-slate-400",children:s.icon}),s.name]}),s.subMenu&&e.jsx("i",{className:`text-2xl text-slate-300 ${u===t&&m===!0?"rotate-90":"rotate-0"} transition-transform duration-300`,children:e.jsx(I,{})})]}),s.subMenu&&e.jsx("ul",{className:`flex flex-col gap-2 py-4 ${u===t&&m===!0?"visible h-auto opacity-100 relative":"invisible max-h-0 opacity-0 absolute"} overflow-hidden transition-[max-height] duration-300 ease-in-out opacity-transition`,style:{transitionProperty:"opacity, max-height, visibility",transitionDuration:u===t?"400ms":"300ms"},children:s.subMenu.map((a,b)=>e.jsx("li",{className:"px-10 text-xl text-slate-500 py-1 cursor-pointer ",onClick:()=>o(a.path),children:a.name},b))})]},t))]}):e.jsxs("li",{className:"py-4 flex items-center gap-4 text-2xl font-medium text-slate-700",children:[e.jsx("i",{className:"text-2xl text-slate-400",children:e.jsx(te,{})}),"업체 등록"]})}),e.jsx("div",{className:"w-full h-[2.67vw] max-h-[10px] bg-slate-100"}),e.jsxs("ul",{className:"py-5 px-6",children:[F.map((s,t)=>e.jsx("li",{className:"cursor-pointer text-slate-500 py-3 text-lg select-none",onClick:s.onClick,children:s.name},t)),e.jsxs("li",{className:"cursor-pointer text-slate-500 py-3 text-lg flex items-center gap-2",onClick:z,children:[e.jsx(ie,{className:"text-slate-300"}),"로그아웃"]})]})]})]})};export{ye as default};
