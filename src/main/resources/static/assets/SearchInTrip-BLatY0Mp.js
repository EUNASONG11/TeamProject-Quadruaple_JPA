import{u as j,j as e,V as A,aa as T,a1 as B,g as P,c as E,r as x,U as R,I as z,B as F,e as y}from"./index-BntdmLw6.js";import{F as M}from"./index-DGDOMr42.js";import{c as D}from"./match-QPO8WXvd.js";import{R as H}from"./index-CGR3KpPN.js";import{c as K}from"./search-CYEcxJpF.js";import{S as O}from"./index-xetdIjy9.js";import"./index-DlpCU_wW.js";import"./index-D--tJV0U.js";import"./index-_SN7yVUb.js";import"./index-uPMp8crv.js";import"./index-B594j0i6.js";import"./index-BwdDw7dk.js";import"./index-CQPU18Q9.js";import"./Portal-DrvEm9SG.js";import"./useId-1CjrgjZ5.js";import"./isMobile-B4CO7CVJ.js";import"./motion-C0u11WnX.js";import"./roundedArrow-BJTQLzTE.js";import"./zoom-CZrdmVqU.js";const q=({item:s})=>{const l=j(),c=o=>{console.log(o),l(`/contents/index?strfId=${o}`)};return e.jsxs("li",{className:"flex gap-5 items-center cursor-pointer",onClick:()=>{c(s.strfId)},children:[e.jsx("div",{className:"w-32 aspect-square bg-slate-200 rounded-lg overflow-hidden",children:e.jsx("img",{src:`${A}/${s.strfId}/${s.picTitle}`,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("div",{className:"flex gap-[5px] items-center ",children:e.jsx("h3",{className:"text-[20px] font-semibold text-slate-700",children:s.title})}),e.jsx("div",{className:"flex gap-[5px] items-center",children:e.jsx("p",{className:"text-[14px] text-slate-500",children:D(s.category)})}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx(H,{disabled:!0,count:1,value:s.ratingIn?1:0,style:{fontSize:"16px"}}),e.jsx("p",{className:"text-[12px] text-slate-500",children:s.ratingCnt}),e.jsxs("p",{className:"text-[12px] text-slate-500",children:["(",s.ratingCnt.toLocaleString(),")"]})]}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx("div",{children:s.wishIn?e.jsx(T,{className:"text-secondary3 text-[16px]"}):e.jsx(B,{className:"text-slate-400 text-[16px]"})}),e.jsx("p",{className:"text-[12px] text-slate-500",children:s.wishCnt.toLocaleString()})]})]})]})},xe=()=>{const s=P("accessToken"),[l]=E(),c=Number(l.get("tripId")),o=l.get("category"),h=l.get("keyword"),u=l.get("type"),p=j(),$=()=>{p(-1)},N=t=>{t.type!=="ALL"&&p(`/search/trip?tripId=${c}&category=${t.type}&keyword=${r}&type=search`),t.type==="ALL"&&p(`/search/trip?tripId=${c}&category=${t.type}&keyword=${r}&type=basic`)},[r,v]=x.useState(h==="null"?"":h),[w,d]=x.useState(!1),[n,I]=x.useState(0),[b,g]=x.useState([]),[S,m]=x.useState(!0),k=async()=>{const t="/api/search/strf-list-basic";d(!0);try{const a=(await y.get(`${t}?trip_id=${c}&start_idx=${n}`,{headers:{Authorization:`Bearer ${s}`}})).data;return console.log("일정 기본 검색",a),a.code==="200 성공"&&(g(a.data.list),m(a.data.more)),a}catch(i){return console.log("일정 추가 검색",i),null}finally{d(!1)}},C=async()=>{const t="/api/search/strf-list-word";d(!0);try{const a=(await y.get(o==="ALL"?(r==null?void 0:r.trim())===""?`${t}?trip_id=${c}&start_idx=${n}`:`${t}?trip_id=${c}&start_idx=${n}&search_word=${r}`:(r==null?void 0:r.trim())===""?`${t}?trip_id=${c}&start_idx=${n}&category=${o}`:`${t}?trip_id=${c}&start_idx=${n}&category=${o}&search_word=${r}`,{headers:{Authorization:`Bearer ${s}`}})).data;return console.log("일정 추가 검색",a),a.code==="200 성공"&&(g(a.data.list),m(a.data.more)),a}catch(i){return console.log("일정 추가 검색",i),null}finally{d(!1)}},f=()=>{p(`/search/trip?tripId=${c}&category=${o}&keyword=${r}&type=search`)},L=t=>{console.log(t.type),g([]),N(t)},_=()=>{I(t=>t+10)};return x.useEffect(()=>{u==="basic"&&k(),u==="search"&&C()},[h,o,u,n]),e.jsxs("div",{children:[e.jsxs("section",{className:"w-full px-8 py-7 flex items-center gap-10 relative ",children:[e.jsx("div",{className:"text-3xl cursor-pointer",onClick:$,children:e.jsx(R,{})}),e.jsx(z,{placeholder:"지금 어디로 여행을 떠나고 싶으신가요?",variant:"borderless",suffix:e.jsx("button",{type:"button",onClick:f,children:e.jsx(M,{className:"text-slate-400 text-2xl"})}),allowClear:!0,value:r,onChange:t=>v(t.target.value),onPressEnter:f})]}),e.jsx("section",{children:e.jsx("ul",{className:"flex gap-3 px-7 justify-between items-center",children:K.map((t,i)=>e.jsx("li",{className:`cursor-pointer text-sm w-full flex justify-center items-center py-2 gap-3 rounded-xl 
                    ${t.type===o?"bg-primary text-white":"bg-white text-slate-500"}`,onClick:()=>{L(t)},children:e.jsxs("p",{className:"text-center",children:[" ",t.name]})},i))})}),e.jsxs("section",{children:[e.jsx(O,{spinning:w,children:e.jsx("ul",{className:"px-8 py-7 flex flex-col gap-8",children:b.map((t,i)=>e.jsx(q,{item:t},i))})}),e.jsx("div",{className:"flex justify-center",children:S&&e.jsx(F,{className:"text-slate-500 text-base !h-auto py-2 px-5 border-1 border-slate-200 rounded-full",onClick:_,children:"더보기"})})]})]})};export{xe as default};
