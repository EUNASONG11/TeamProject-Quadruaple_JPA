import{r as c,g as w,u,j as e,M as v,B as j,d as h,f as N}from"./index-BE7VYVOv.js";import{A as b}from"./index-Ch_E0Laj.js";import{T as y}from"./TitleHeader-CV-x6l8Z.js";import{R}from"./pic-Jp7D6aQ0.js";/* empty css                    */import{R as I}from"./index-UfEmshDV.js";import"./index-BokRKycC.js";import"./index-BbXaoV9_.js";import"./index-ByuoUydi.js";import"./KeyCode-DNlgD2sM.js";import"./index-BFrQ11KA.js";import"./index-IFp1_UId.js";import"./Portal-B27f54IH.js";import"./useId-CgD2_zXU.js";import"./useZIndex-Bue6RuKI.js";import"./zoom-CfBlLY5N.js";import"./Keyframes-DuZXdA1R.js";const $=({images:i})=>{const o=i.length,l={1:"grid-cols-1 grid-rows-1",2:"grid-cols-2 grid-rows-1",3:"grid-cols-2 grid-rows-2",4:"grid-cols-2 grid-rows-2",5:"grid-cols-4 grid-rows-2"}[o]||"grid-cols-3 grid-rows-2";return e.jsx("div",{className:`grid gap-2 ${l} w-full h-[400px] rounded-lg overflow-hidden`,children:i.map((n,t)=>{let a="";return o===3&&t===0&&(a="row-span-2"),o===5&&t===0&&(a="row-span-2 col-span-2"),e.jsx("img",{src:n,alt:`image-${t}`,className:`w-full h-full overflow-hidden object-cover ${a}`},t)})})},V=()=>{const[i,o]=c.useState([]),[l,n]=c.useState(0),[t,a]=c.useState(!0),m=w("accessToken"),d=async()=>{try{const s=await h.get(`/api/review/my?start_idx=${l}`,{headers:{Authorization:`Bearer ${m}`}});o(s.data),console.log("✅  getUserReview  res.data.data:",s.data),s.data.more===!1&&a(!1)}catch(s){console.log("✅  getUserReview  error:",s)}},p=async s=>{console.log(s);try{const r=await N.delete(`/api/review/del?review_id=${s.reviewId}`);console.log("리뷰 삭제:",r.data),r.data&&d()}catch(r){console.log("리뷰 삭제:",r)}};c.useEffect(()=>{d()},[l]);const x=u();return e.jsxs("div",{children:[e.jsx(y,{icon:"back",title:"리뷰",onClick:()=>x(-2)}),e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{children:[e.jsx("p",{}),e.jsx("p",{})]}),i.map((s,r)=>{const g=s.myReviewPic.map(f=>`${R}${s.reviewId}/${f.pic}`);return e.jsxs("div",{className:"py-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsxs("h1",{className:"flex items-center gap-5 h text-3xl font-bold text-slate-700 mb-3 cursor-pointer",onClick:()=>x(`/contents/index?strfId=${s.strfId}`),children:[s.strfTitle,e.jsx(v,{})]})}),e.jsx("button",{type:"button",className:"px-3 py-1 rounded-lg bg-slate-100 text-slate-700 text-[16px]",onClick:()=>p(s),children:"삭제"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx(I,{className:"custom-rate flex items-center gap-1",disabled:!0,allowHalf:!0,defaultValue:s.rating}),e.jsx("p",{className:"text-slate-500 text-xl",children:s.reviewWriteDate.split(" ")[0]})]}),e.jsx("p",{className:"text-2xl text-slate-700 mb-10 font-normal",children:s.content}),e.jsx($,{images:g})]},r)}),t&&e.jsx("div",{className:"flex justify-center mb-14",children:e.jsxs(j,{onClick:()=>n(s=>s+10),children:[e.jsx(b,{}),"더보기"]})})]})]})};export{V as default};
