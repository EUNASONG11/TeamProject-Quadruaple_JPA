import{g as B,b as k,u as P,r as o,j as e,I as h,B as C,N as g}from"./index-CXgPt5JN.js";import{T as E}from"./TitleHeader-CzykBaxH.js";import{S as R}from"./ScheduleDay-LfU_1h7s.js";import{j}from"./jwt-68WmjUBv.js";import{F as r}from"./index-03v7AaTi.js";import{U}from"./index-DutcZXZ9.js";import"./dayjs.min-CM77hzp1.js";import"./index-CDNxKOHP.js";import"./index-BIhRtoM_.js";import"./index-BjxdQkl4.js";import"./match-YbLQ2-HI.js";import"./index-BHcAlC-o.js";import"./index-kMgS0FzX.js";import"./index-D0c2BEnw.js";import"./index-BQ3DKWO0.js";import"./index-DhnFfT0_.js";import"./index-ClkmJtaA.js";import"./tripAtom-CMbIV323.js";import"./MarkerClusterer-DbNkeOxK.js";import"./index-2ZNAj9Vd.js";import"./index-g46somhf.js";import"./index-DVNH3El3.js";import"./Portal-DyoJ0XAQ.js";import"./useId-CFvmNKkm.js";import"./isMobile-B4CO7CVJ.js";import"./motion-COLDN99j.js";import"./roundedArrow-BJ1xfU1K.js";import"./zoom-DXKB7aGh.js";import"./collapse-BbEVqHco.js";import"./responsiveObserver-C8PfZDab.js";import"./index-Cc8zrrM2.js";import"./useLocale-XAzq5U5g.js";import"./fade-DtEfEpc4.js";import"./useForceUpdate-Brh-2j-i.js";import"./CheckOutlined-Bh0Z4Jmq.js";const ye=()=>{var f;B("accessToken");const[y]=k(),n=parseInt(y.get("tripId")),c=P(),m=()=>{c(-1)},b=()=>{c("/scheduleboard")};o.useState(""),o.useState("여행기 제목"),o.useState("");const[w,v]=o.useState({}),[p,d]=o.useState([]),[N,x]=o.useState(!1),S=async()=>{try{const t=await j.get(`/api/trip?trip_id=${n}`);console.log("여행확인하기",t.data);const l=t.data.data;v(l)}catch(t){console.log(t)}};o.useEffect(()=>{S()},[]);const[I]=r.useForm(),T=({fileList:t})=>d(t),D=async t=>{const{title:l,file:a,content:F}=t,L={tripId:n,title:l,content:F},i=new FormData;d(a.fileList),i.append("req",new Blob([JSON.stringify(L)],{type:"application/json"})),console.log(t),console.log(p),a&&a.fileList&&a.fileList.length>0&&a.fileList.forEach(s=>{i.append("tripReviewPic",s.originFileObj)});const u=i.get("p");u&&u.text().then(s=>console.log("p의 내용:",s)),console.log("보낸 데이터",[...i]);try{const s=await j.post("/api/trip-review",i);s.data.code==="200 성공"&&(g.success("여행기 등록에 성공했습니다"),b()),console.log(s.data)}catch(s){s.response.status===400&&(g.error("아직 완료되지 않은 여행입니다."),m()),console.error(s)}};return e.jsxs("div",{children:[e.jsx(E,{icon:"back",onClick:m,title:"여행기 공유"}),e.jsx("div",{className:"mt-[60px] py-[40px] flex flex-col gap-[40px]",children:e.jsx("div",{className:"flex flex-col  px-[32px]",children:e.jsxs(r,{form:I,onFinish:D,layout:"vertical",className:"flex flex-col gap-[48px]",children:[e.jsx(r.Item,{name:"file",rules:[{required:!0,message:"여행기를 위한 사진을 올려주세요."}],children:e.jsx(U,{id:"file",listType:"picture-card",beforeUpload:()=>!1,fileList:p,onChange:T,accept:"image/*",multiple:!0,children:p.length<5&&"+ Upload"})}),e.jsx(r.Item,{name:"title",className:`border-b ${N?"border-primary":"border-slate-200"}`,children:e.jsx(h,{variant:"borderless",className:` px-[10px] py-[10px]\r
                text-slate-400 text-[36px] font-semibold\r
              placeholder:text-slate-400\r
                 `,onFocus:()=>x(!0),onBlur:()=>x(!1),placeholder:"여행기 제목"})}),e.jsx(r.Item,{name:"content",children:e.jsx(h.TextArea,{rows:4,placeholder:"이번 여행은 어떠셨나요? 여행에 대한 감상과 여행에서 경험한 꿀팁들을 남겨 다른 회원님들과 공유해보세요 !",variant:"borderless",maxLength:500,autoSize:{minRows:3,maxRows:5},style:{height:300,resize:"none"},className:"placeholder: text-[24px] placeholder: text-slate-400"})}),e.jsx("div",{className:"flex flex-col gap-[50px]",children:(f=w.days)==null?void 0:f.map((t,l)=>e.jsx(R,{data:t,showMap:!1,readOnly:!0}))}),e.jsx(r.Item,{className:"w-full",children:e.jsx(C,{type:"primary",htmlType:"submit",className:`w-full h-[80px] \r
                    text-slate-50 text-[24px] font-semibold`,children:"완료"})})]})})})]})};export{ye as default};
