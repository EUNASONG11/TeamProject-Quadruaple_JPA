import{r as o,u as p,j as e,a1 as f,g as h,T as j,c as N}from"./index-Ca07tLEd.js";import{N as v}from"./NoData-D3eEVehR.js";import"./index-yMZQKGyH.js";const C=({chatList:c})=>{const t=p(),l=s=>{t(`/chatroom?roomId=${s}`)};return console.log(c[0]),e.jsx(e.Fragment,{children:e.jsx("ul",{className:"flex flex-col",children:c.map((s,r)=>e.jsxs("li",{className:"flex items-center justify-between gap-3 px-4 py-4 cursor-pointer",onClick:()=>l(s.roomId),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-2xl overflow-hidden border border-slate-200",children:e.jsx("img",{src:s.pic==="user_profile.png"?"/images/logo_icon_2.png":`${f}/${s.userId}/${s.pic}`,alt:"채팅방 사진",className:`w-full h-full object-cover
                      ${s.pic==="user_profile.png"&&"object-[50%_-70%] scale-110"}`})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("p",{className:"text-lg text-slate-700 font-semibold",children:s.title}),e.jsx("p",{className:"text-base text-slate-500",children:s.latestChat})]})]}),e.jsxs("div",{className:"flex flex-col items-end justify-between",children:[e.jsx("p",{className:"text-sm text-slate-400",children:s.lastChatTime}),s.unreadChat&&e.jsx("p",{className:"px-3 py-[5px] bg-primary rounded-2xl text-white text-sm",children:s.unreadChat})]})]},r))})})},b=o.memo(C),k=()=>{const c=h("accessToken"),t=h("user"),l=t==null?void 0:t.role[0],s=p(),r=()=>{s("/")},[m]=o.useState("전체"),[n,i]=o.useState([]),[x,u]=o.useState(0),g=async()=>{try{const a=(await N.get(`/api/chat-room?page=${x}&role=${l}`,{headers:{Authorization:`Bearer ${c}`}})).data;return console.log("채팅 목록 조회",a),a.code==="200 성공"&&i(a.data),a.data.length===30&&u(x+1),a}catch(d){return console.log("채팅 목록 조회",d),i([]),null}};return o.useEffect(()=>{g()},[]),e.jsxs("div",{className:"max-w-[768px] min-w-xs mx-auto relative min-h-screen ",children:[e.jsx(j,{title:"채팅",icon:"back",onClick:r}),e.jsx("div",{children:n.length>0?e.jsx(b,{category:m,chatList:n}):e.jsx(v,{content:"채팅 목록이 없습니다"})})]})};export{k as default};
